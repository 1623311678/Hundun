(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./ sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id="./ sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./ sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$":function(module,exports,__webpack_require__){var map={"./stories/AI/AI.intro.stories.mdx":"./stories/AI/AI.intro.stories.mdx","./stories/AI/intro.stories.mdx":"./stories/AI/intro.stories.mdx","./stories/AI/mcp.stories.mdx":"./stories/AI/mcp.stories.mdx","./stories/Adapt/mobile.stories.mdx":"./stories/Adapt/mobile.stories.mdx","./stories/Adapt/pc.stories.mdx":"./stories/Adapt/pc.stories.mdx","./stories/Ajax/axios.stories.mdx":"./stories/Ajax/axios.stories.mdx","./stories/Ajax/intro.stories.mdx":"./stories/Ajax/intro.stories.mdx","./stories/Ajax/xhr.stories.mdx":"./stories/Ajax/xhr.stories.mdx","./stories/BaGuWen/design.stories.mdx":"./stories/BaGuWen/design.stories.mdx","./stories/BaGuWen/mianshiti.stories.mdx":"./stories/BaGuWen/mianshiti.stories.mdx","./stories/CLI/cli.stories.mdx":"./stories/CLI/cli.stories.mdx","./stories/CLI/study.stories.mdx":"./stories/CLI/study.stories.mdx","./stories/Deploy/nginx.stories.mdx":"./stories/Deploy/nginx.stories.mdx","./stories/Deploy/node.stories.mdx":"./stories/Deploy/node.stories.mdx","./stories/DevRules/DevRules.stories.mdx":"./stories/DevRules/DevRules.stories.mdx","./stories/Fetch/intro.stories.mdx":"./stories/Fetch/intro.stories.mdx","./stories/Flutter/flutter.stories.mdx":"./stories/Flutter/flutter.stories.mdx","./stories/HM/hm-intro.stories.mdx":"./stories/HM/hm-intro.stories.mdx","./stories/Intro/Intro.stories.mdx":"./stories/Intro/Intro.stories.mdx","./stories/JavaScript/es2025.stories.mdx":"./stories/JavaScript/es2025.stories.mdx","./stories/JavaScript/intro.stories.mdx":"./stories/JavaScript/intro.stories.mdx","./stories/LowCode/Intro.stories.mdx":"./stories/LowCode/Intro.stories.mdx","./stories/LowCode/openSource.stories.mdx":"./stories/LowCode/openSource.stories.mdx","./stories/MicroClient/Intro.stories.mdx":"./stories/MicroClient/Intro.stories.mdx","./stories/Monitor/CAT.stories.mdx":"./stories/Monitor/CAT.stories.mdx","./stories/Monitor/Logan.stories.mdx":"./stories/Monitor/Logan.stories.mdx","./stories/Monitor/Monitor.stories.mdx":"./stories/Monitor/Monitor.stories.mdx","./stories/Monitor/Sentry.stories.mdx":"./stories/Monitor/Sentry.stories.mdx","./stories/Monitor/open-monitor.stories.mdx":"./stories/Monitor/open-monitor.stories.mdx","./stories/Monitor/白泽.stories.mdx":"./stories/Monitor/白泽.stories.mdx","./stories/Node/intro.stories.mdx":"./stories/Node/intro.stories.mdx","./stories/Node/package.stories.mdx":"./stories/Node/package.stories.mdx","./stories/Pipeline/github.stories.mdx":"./stories/Pipeline/github.stories.mdx","./stories/Pipeline/gitlab.stories.mdx":"./stories/Pipeline/gitlab.stories.mdx","./stories/Pipeline/jenkins.stories.mdx":"./stories/Pipeline/jenkins.stories.mdx","./stories/React/React-SSR.stories.mdx":"./stories/React/React-SSR.stories.mdx","./stories/React/React17.stories.mdx":"./stories/React/React17.stories.mdx","./stories/React/React18.stories.mdx":"./stories/React/React18.stories.mdx","./stories/React/React19.stories.mdx":"./stories/React/React19.stories.mdx","./stories/React/domDiff.stories.mdx":"./stories/React/domDiff.stories.mdx","./stories/React/event.stories.mdx":"./stories/React/event.stories.mdx","./stories/React/fiber.stories.mdx":"./stories/React/fiber.stories.mdx","./stories/React/setState.stories.mdx":"./stories/React/setState.stories.mdx","./stories/React/status-maange.stories.mdx":"./stories/React/status-maange.stories.mdx","./stories/ReactNative/expo/camera.stories.mdx":"./stories/ReactNative/expo/camera.stories.mdx","./stories/ReactNative/expo/dynamic.stories.mdx":"./stories/ReactNative/expo/dynamic.stories.mdx","./stories/ReactNative/expo/expo-webview.stories.mdx":"./stories/ReactNative/expo/expo-webview.stories.mdx","./stories/ReactNative/expo/intro.stories.mdx":"./stories/ReactNative/expo/intro.stories.mdx","./stories/ReactNative/origin/env/android.stories.mdx":"./stories/ReactNative/origin/env/android.stories.mdx","./stories/ReactNative/origin/env/ios.stories.mdx":"./stories/ReactNative/origin/env/ios.stories.mdx","./stories/ReactNative/taro/taro-intro.stories.mdx":"./stories/ReactNative/taro/taro-intro.stories.mdx","./stories/TypeScript/intro.stories.mdx":"./stories/TypeScript/intro.stories.mdx","./stories/Vue/intro.stories.mdx":"./stories/Vue/intro.stories.mdx","./stories/Vue/process.stories.mdx":"./stories/Vue/process.stories.mdx","./stories/WebSocket/intro.stories.mdx":"./stories/WebSocket/intro.stories.mdx","./stories/clientTrend/2023.stories.mdx":"./stories/clientTrend/2023.stories.mdx","./stories/clientTrend/2024.stories.mdx":"./stories/clientTrend/2024.stories.mdx","./stories/clientTrend/2025.stories.mdx":"./stories/clientTrend/2025.stories.mdx","./stories/clientTrend/2026.stories.mdx":"./stories/clientTrend/2026.stories.mdx","./stories/desk/intro.stories.mdx":"./stories/desk/intro.stories.mdx","./stories/performence/intro.stories.mdx":"./stories/performence/intro.stories.mdx","./stories/program/intro.stories.mdx":"./stories/program/intro.stories.mdx","./stories/quickApp/intro.stories.mdx":"./stories/quickApp/intro.stories.mdx","./stories/rust/intro.stories.mdx":"./stories/rust/intro.stories.mdx","./stories/serve/MQ.stories.mdx":"./stories/serve/MQ.stories.mdx","./stories/serve/RDS&Redis.stories.mdx":"./stories/serve/RDS&Redis.stories.mdx","./stories/serve/RPC&HTTP.stories.mdx":"./stories/serve/RPC&HTTP.stories.mdx","./stories/serve/api-style.stories.mdx":"./stories/serve/api-style.stories.mdx","./stories/serve/database.stories.mdx":"./stories/serve/database.stories.mdx","./stories/serve/es.stories.mdx":"./stories/serve/es.stories.mdx","./stories/serve/java-code-style.stories.mdx":"./stories/serve/java-code-style.stories.mdx","./stories/serve/java-mvc.stories.mdx":"./stories/serve/java-mvc.stories.mdx","./stories/serve/java.stories.mdx":"./stories/serve/java.stories.mdx","./stories/serve/load-blance.stories.mdx":"./stories/serve/load-blance.stories.mdx","./stories/serve/mcor-server.stories.mdx":"./stories/serve/mcor-server.stories.mdx","./stories/serve/monitor.stories.mdx":"./stories/serve/monitor.stories.mdx","./stories/serve/mysql-doc.stories.mdx":"./stories/serve/mysql-doc.stories.mdx","./stories/serve/nodejs.stories.mdx":"./stories/serve/nodejs.stories.mdx","./stories/serve/server.stories.mdx":"./stories/serve/server.stories.mdx","./stories/sf/concurrent.stories.mdx":"./stories/sf/concurrent.stories.mdx","./stories/sf/event-bus.stories.mdx":"./stories/sf/event-bus.stories.mdx","./stories/software-sys-design/BS-CS.stories.mdx":"./stories/software-sys-design/BS-CS.stories.mdx","./stories/software-sys-design/aliyun-dev.stories.mdx":"./stories/software-sys-design/aliyun-dev.stories.mdx","./stories/software-sys-design/aliyun.stories.mdx":"./stories/software-sys-design/aliyun.stories.mdx","./stories/software-sys-design/k8s.stories.mdx":"./stories/software-sys-design/k8s.stories.mdx","./stories/software-sys-design/moden.stories.mdx":"./stories/software-sys-design/moden.stories.mdx","./stories/software-sys-design/monitor-sdk.stories.mdx":"./stories/software-sys-design/monitor-sdk.stories.mdx","./stories/software-sys-design/mp-client.stories.mdx":"./stories/software-sys-design/mp-client.stories.mdx","./stories/software-sys-design/mp-h5-imp.stories.mdx":"./stories/software-sys-design/mp-h5-imp.stories.mdx","./stories/software-sys-design/mulity-client.stories.mdx":"./stories/software-sys-design/mulity-client.stories.mdx","./stories/ssr/ssr.intro.stories.mdx":"./stories/ssr/ssr.intro.stories.mdx","./stories/standardTemplates/Intro.stories.mdx":"./stories/standardTemplates/Intro.stories.mdx","./stories/standardTemplates/mobile.stories.mdx":"./stories/standardTemplates/mobile.stories.mdx","./stories/standardTemplates/react-antd-mobile.stories.mdx":"./stories/standardTemplates/react-antd-mobile.stories.mdx","./stories/standardTemplates/react-pc.stories.mdx":"./stories/standardTemplates/react-pc.stories.mdx","./stories/standardTemplates/react-ui-components.stories.mdx":"./stories/standardTemplates/react-ui-components.stories.mdx","./stories/standardTemplates/vue2-ui-components.stories.mdx":"./stories/standardTemplates/vue2-ui-components.stories.mdx","./stories/uniapp/uni-app.stories.mdx":"./stories/uniapp/uni-app.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./ sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"},"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",function(){return parameters});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},viewMode:"docs",previewTabs:{canvas:{hidden:!0}},options:{storySort:{order:["Hundun",["混沌建站-前端工程化","AI","脚手架","标准化模版",["介绍","移动端",["介绍","react-antd-mobile"],"PC端"],"react-native",["原生","expo",["介绍","webView","相机","动态化更新"],"taro"],"uniapp","鸿蒙","flutter","性能优化","部署","流水线","前后端通信",["Ajax",["介绍","xhr","Axios"],"Fetch","WebSocket"],"监控","八股文","前端适配","服务端渲染",["服务端",["介绍","nodejs"]],["前端演进趋势",["2023前端技术演进趋势","2024前端技术演进趋势"]]]]}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach(function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach(function(decorator){return Object(ClientApi.f)(decorator,!1)});case"loaders":return value.forEach(function(loader){return Object(ClientApi.g)(loader,!1)});case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},value),!1);case"argTypesEnhancers":return value.forEach(function(enhancer){return Object(ClientApi.c)(enhancer)});case"argsEnhancers":return value.forEach(function(enhancer){return Object(ClientApi.e)(enhancer)});case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}})},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./ sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./ sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./stories/AI/AI.intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/AI/介绍&汇总",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"业界ai最新态势"},"业界AI最新态势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://ai-bot.cn/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://ai-bot.cn/")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/AI/介绍&汇总",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/AI/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/AI/AI-Coding/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"什么是ai-coding"},"什么是AI Coding？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-定义与原理"},"1. 定义与原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"AI Coding（AI辅助编程）是指利用人工智能（如大语言模型、代码生成模型）辅助或自动完成代码编写、调试、重构、文档生成等开发任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型原理：基于大规模代码语料训练的AI模型，理解自然语言需求，生成高质量代码片段、单元测试、注释等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-主流ai-coding工具"},"2. 主流AI Coding工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"GitHub Copilot"),"：基于OpenAI Codex，VSCode/JetBrains插件，自动补全、函数生成、注释解释"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Cursor"),"：AI驱动的IDE，支持自然语言指令、代码重构、自动文档、单元测试生成等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Tabnine"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Codeium"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Amazon CodeWhisperer"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"腾讯CodeFuse"),"等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ChatGPT/Claude/通义灵码"),"：对话式AI，支持代码问答、重构、解释、Bug定位")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-ai-coding如何改变码农的生活"},"3. AI Coding如何改变码农的生活？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"效率提升"),"：自动补全、代码生成、单元测试、文档注释，大幅减少重复劳动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"学习与成长"),"：AI可解释代码、推荐最佳实践，帮助开发者快速掌握新技术"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码质量提升"),"：AI辅助重构、静态分析、自动修复Bug，减少低级错误"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"沟通协作优化"),"：自然语言描述需求，AI自动转化为代码/接口/文档，提升团队协作效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"创新与创造力释放"),"：开发者可专注于业务逻辑与创新，AI承担机械性工作"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"个性化助手"),'：AI可根据个人习惯、项目风格定制建议，成为"贴身编程助理"')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-未来趋势与挑战"},"4. 未来趋势与挑战"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"趋势"),'：AI Coding将成为开发者标配，代码生产力工具与AI深度融合，推动"人机协作开发"新范式'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"挑战"),"：代码安全与隐私、AI生成代码的可维护性/可解释性、对开发者能力结构的重塑")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-总结"},"5. 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"AI Coding正深刻改变开发者的工作方式和生活，建议积极拥抱AI工具，提升效率与创造力，把握技术变革新机遇。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Cursor 使用技巧"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.axtonliu.ai/blog/cursor-ai-programming-assistant-guide",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.axtonliu.ai/blog/cursor-ai-programming-assistant-guide")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.ifb.me/zh/blog/backend/10-fen-zhong-jie-suo",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.ifb.me/zh/blog/backend/10-fen-zhong-jie-suo")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.cursor-ide.com/blog/cursor-usage-guide",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.cursor-ide.com/blog/cursor-usage-guide")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/AI/AI-Coding/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/AI/mcp.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/AI/AI-Coding/MCP",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"mcp"},"Mcp"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.cursor-ide.com/blog/cursor-mcp-guide",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.cursor-ide.com/blog/cursor-mcp-guide")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.cursor-ide.com/blog/cursor-mcp-guide",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.cursor-ide.com/blog/cursor-mcp-guide")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/28320655477",target:"_blank",rel:"nofollow noopener noreferrer"},"https://zhuanlan.zhihu.com/p/28320655477")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、自动化测试-playwright-mcp ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/microsoft/playwright-mcp",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/microsoft/playwright-mcp")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、D2C MCP\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://aibook.ren/archives/cursor-work-with-figma-mcp-server",target:"_blank",rel:"nofollow noopener noreferrer"},"https://aibook.ren/archives/cursor-work-with-figma-mcp-server")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/GLips/Figma-Context-MCP?tab=readme-ov-file",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/GLips/Figma-Context-MCP?tab=readme-ov-file")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、MarkDown转Html MCP  ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://glama.ai/mcp/servers/@fashionzzZ/markdown-to-html?locale=zh-CN",target:"_blank",rel:"nofollow noopener noreferrer"},"https://glama.ai/mcp/servers/@fashionzzZ/markdown-to-html?locale=zh-CN")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、antd MCP ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://glama.ai/mcp/servers/@hannesj/mcp-antd-components?locale=zh-CN",target:"_blank",rel:"nofollow noopener noreferrer"},"https://glama.ai/mcp/servers/@hannesj/mcp-antd-components?locale=zh-CN")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"什么是mcp"},"什么是MCP？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-定义与原理"},"1. 定义与原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"MCP（Markdown Content Processor/Model Content Processor）是一类自动化内容处理器，常用于将结构化/半结构化内容（如Markdown、JSON、设计稿等）自动转换为目标格式（如HTML、测试用例、API文档、代码等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型原理：基于规则引擎、模板引擎或AI模型，自动解析输入内容，生成目标产物，支持批量、自动化、可扩展。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-典型场景与开源实现"},"2. 典型场景与开源实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-自动化测试playwright-mcp"},"2.1 自动化测试（Playwright MCP）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过MCP自动生成Playwright测试用例，提升测试开发效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://github.com/microsoft/playwright-mcp",target:"_blank",rel:"nofollow noopener noreferrer"},"playwright-mcp"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-d2cdesign-to-codemcp"},"2.2 D2C（Design to Code）MCP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"设计稿（如Figma）自动转为前端代码、组件、文档"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://github.com/GLips/Figma-Context-MCP",target:"_blank",rel:"nofollow noopener noreferrer"},"Figma-Context-MCP")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://aibook.ren/archives/cursor-work-with-figma-mcp-server",target:"_blank",rel:"nofollow noopener noreferrer"},"D2C MCP 文章"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-markdown转html-mcp"},"2.3 Markdown转HTML MCP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动将Markdown文档批量转为HTML，支持自定义模板、批量处理、API服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://glama.ai/mcp/servers/@fashionzzZ/markdown-to-html?locale=zh-CN",target:"_blank",rel:"nofollow noopener noreferrer"},"Markdown转Html MCP"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-nodejstypescript实现markdown转html-mcp"},"3. Node.js/TypeScript实现Markdown转HTML MCP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/1623311678/markdown-to-html-mcp",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/1623311678/markdown-to-html-mcp")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-最佳实践与扩展建议"},"4. 最佳实践与扩展建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持批量转换、目录遍历、模板美化、前端上传/预览"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可集成CI/CD、Serverless、云函数等自动化场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合AI模型实现更智能的内容理解与转换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API协议，便于多端/多语言集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-参考资料与生态"},"5. 参考资料与生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://www.cursor-ide.com/blog/cursor-mcp-guide",target:"_blank",rel:"nofollow noopener noreferrer"},"Cursor MCP官方指南")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://github.com/microsoft/playwright-mcp",target:"_blank",rel:"nofollow noopener noreferrer"},"Playwright MCP")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://github.com/GLips/Figma-Context-MCP",target:"_blank",rel:"nofollow noopener noreferrer"},"Figma-Context-MCP")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://glama.ai/mcp/servers/@fashionzzZ/markdown-to-html?locale=zh-CN",target:"_blank",rel:"nofollow noopener noreferrer"},"Markdown转Html MCP"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"MCP是现代内容自动化处理的关键基础设施，建议结合业务场景与技术栈灵活选型与扩展。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/AI/AI-Coding/MCP",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Adapt/mobile.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前端适配/移动端",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7035540378811891749",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7035540378811891749")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"常见尺寸"},"常见尺寸"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1024×768,1366×768,1280×800,1280×1024，1440×900,1600×900，1920×1080"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"选择1920*1080的尺寸，来适配不同的屏幕"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"参考文章"},"参考文章"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"属性"},"属性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'s = " 网页可见区域宽：" document.body.clientWidth;\ns = " 网页可见区域高：" document.body.clientHeight;\ns = " 网页可见区域宽：" document.body.offsetWidth " (包括边线和滚动条的宽)";\ns = " 网页可见区域高：" document.body.offsetHeight " (包括边线的宽)";\ns = " 网页正文全文宽：" document.body.scrollWidth;\ns = " 网页正文全文高：" document.body.scrollHeight;\ns = " 网页被卷去的高(ff)：" document.body.scrollTop;\ns = " 网页被卷去的高(ie)：" document.documentElement.scrollTop;\ns = " 网页被卷去的左：" document.body.scrollLeft;\ns = " 网页正文部分上：" window.screenTop;\ns = " 网页正文部分左：" window.screenLeft;\ns = " 屏幕分辨率的高：" window.screen.height;\ns = " 屏幕分辨率的宽：" window.screen.width;\ns = " 屏幕可用工作区高度：" window.screen.availHeight;\ns = " 屏幕可用工作区宽度：" window.screen.availWidth;'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7015257656193449992",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7015257656193449992")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7148733509744459790",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7148733509744459790")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7043679136031703077",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7043679136031703077")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/291013307",target:"_blank",rel:"nofollow noopener noreferrer"},"https://zhuanlan.zhihu.com/p/291013307")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前端适配/移动端",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Adapt/pc.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前端适配/PC端",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"1-概述"},"1 概述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"pc端设备尺寸多种多样，pad，大屏，一般设备，高度靠内容撑开，如何适配不同宽度的设备呢？常见的有rem方案，vw vh方案，transform：scale方案。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"2-尺寸与设计"},"2 尺寸与设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"21-常规尺寸"},"2.1 常规尺寸"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"市面上常规的尺寸有 1024×768,1366×768,1280×800,1280×1024，1440×900,1600×900，1920×1080"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"选择1920*1080的尺寸，来适配不同的屏幕"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"22-2k屏"},"2.2 2K屏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:"https://user-images.githubusercontent.com/41052302/226172946-9ca0e984-b718-4d52-ad4a-c2e35713db84.png"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"23-4k屏幕"},"2.3 4K屏幕"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4K显示器是指具备4K分辨率的显示器设备。4K的名称来源于其横向解析度约为4000像素，分辨率有3840x2160和4096×2160像素2种超高分辨率规格。相比主流的1080P全高清分辨率，4K显示器增加数百万个像素点，画面的精细程度及显示品质有质的飞越。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"25-大屏"},"2.5 大屏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"大瓶尺寸不固定，根据实际情况来"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/122570290",target:"_blank",rel:"nofollow noopener noreferrer"},"https://zhuanlan.zhihu.com/p/122570290")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"26-小结"},"2.6 小结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"对于一般尺寸以及2K，4K设计稿直接采用1902x1080即可，对于定制化的大屏设计稿最好是按照大屏的尺寸等比例缩放，切图也是，以免到时候出现图片虚的情况。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"3-方案"},"3 方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"31-transform"},"3.1 transform"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"常规尺寸设计稿采用1920x1080,大屏根据需要等比例出设计稿。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"最核心的就是高度靠内容撑开，不做限制，对于宽度，则是根据宽度等比例缩放，为了更好的用户体验，这里设置了缩放比的最小数值为0.6"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"因为默认宽度是1920px ,1920✖️0.6=1152px,这个宽度几乎是比较小的了，否则缩放过多会有留白问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"注意：地图会有偏移量不准确的问题，如果缩放比例过大，事件热区可能也会存在问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'  const handleScreenAuto = () => {\n    const designDraftWidth = 1920 //设计稿的宽度\n    //根据屏幕的变化适配的比例\n    let clientWidth = document.documentElement.clientWidth\n    let scale = clientWidth / designDraftWidth\n    const body = document.querySelector("body")\n    body.style.transform = `scale(${scale})`\n    if (scale < 0.6) {\n      scale = 0.6\n    }\n    console.log("scale", scale, clientWidth)\n  }\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"以react 为例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"监听滚动窗口改动事件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"  //React的生命周期 如果你是vue可以放到mountd或created中\n  useEffect(() => {\n    //初始化自适应  ----在刚显示的时候就开始适配一次\n    handleScreenAuto()\n    //绑定自适应函数   ---防止浏览器栏变化后不再适配\n    window.onresize = () => handleScreenAuto()\n    //退出自适应消失   ---这是react的组件销毁生命周期，如果你是vue则写在deleted中。最好在退出的时候接触自适应\n    return () => (window.onresize = null)\n  }, [])\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"html&css"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"设置缩放起点为左上角，宽度为设计稿的宽度1920"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="UTF-8" />\n    <meta\n      name="viewport"\n      content="width=device-width, initial-scale=1.0, user-scalable=no"\n    />\n    <style>\n      body {\n        transform: scale(1, 1);\n        -ms-transform: scale(1, 1); /* IE 9 */\n        -webkit-transform: scale(1, 1); /* Safari and Chrome */\n        transform-origin: left top; /*设置左上角为缩放原点*/\n        width: 1920px !important;\n        overflow: auto;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"32-弹性布局vwvh栅格布局以及百分比"},"3.2 弹性布局、vw，vh、栅格布局以及百分比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"321-flex"},"3.2.1 Flex"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Flex 是 Flexible Box 的缩写，意为“弹性布局”或者“弹性盒子”，是 CSS3 中的一种新的布局模式，可以简便、完整、响应式地实现各种页面布局，当页面需要适应不同的屏幕大小以及设备类型时非常适用。目前，几乎所有的浏览器都支持 Flex 布局。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:"http://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/828c74641130471b92ee086cb649f66e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp",alt:"图片.png",loading:"lazy",class:"medium-zoom-image"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"弹性布局参考：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"http://c.biancheng.net/css3/flex.html",target:"_blank",rel:"nofollow noopener noreferrer"},"http://c.biancheng.net/css3/flex.html")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"322-栅格布局"},"3.2.2 栅格布局"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Grid 布局与 Flex 布局有一定的相似性，都可以指定容器内部多个项目的位置。但是，它们也存在重大区别。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'Flex 布局是轴线布局，只能指定"项目"针对轴线的位置，可以看作是一维布局。Grid 布局则是将容器划分成"行"和"列"，产生单元格，然后指定"项目所在"的单元格，可以看作是二维布局。Grid 布局远比 Flex 布局强大。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"很多UI框架都有自己的栅格布局，比如Ant Design,Element UI,BootStrap等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"栅格布局参考： ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html",target:"_blank",rel:"nofollow noopener noreferrer"},"https://ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"333-响应式"},"3.3.3 响应式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"响应式一般是通过媒体查询不同设备的宽度，来写不同的样式，典型的代表是BootStrap，如果网站不复杂，但又兼顾应用门面，比如官网类，可以考虑响应式，也可以写两套样式，PC一套，移动端一套。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.bootcss.com/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.bootcss.com/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://react-bootstrap.github.io/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://react-bootstrap.github.io/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"BootStrap可视化布局系统：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"http://www.ibootstrap.cn/",target:"_blank",rel:"nofollow noopener noreferrer"},"http://www.ibootstrap.cn/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout/Responsive_Design",target:"_blank",rel:"nofollow noopener noreferrer"},"https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout/Responsive_Design")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"334-rem"},"3.3.4 rem"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"rem核心原理就是基于宽度等比缩放，并且是基于跟元素html的fontsize大小，为了方便一般设置1rem=100px。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"一般内容型的网站，都不太适合使用rem，因为大屏用户可以自己选择是要更大字体，还是要更多内容，一旦使用了rem，就剥夺了用户的自由，比如百度知道，百度经验都没有使用rem布局；一些偏向app类的，图标类的，图片类的，比如淘宝，活动页面，比较适合使用rem，因为调大字体时并不能调大图标的大小"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"rem可以做到100%的还原度，但同事rem的制作成本也更大，同时使用rem还有一些问题："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"首先是字体的问题，字体大小并不能使用rem，字体的大小和字体宽度，并不成线性关系，所以字体大小不能使用rem；由于设置了根元素字体的大小，会影响所有没有设置字体大小的元素，因为字体大小是会继承的，难道要每个元素都显示设置字体大小？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"我们可以在body上做字体修正，比如把body字体大小设置为16px，但如果用户自己设置了更大的字体，此时用户的设置将失效，比如合理的方式是，将其设置为用户的默认字体大小"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"js部分"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"//1rem = 100px\n const handleScreenAuto = () => {\n    const whdef = 100 / 1920;\n    const wH = window.innerHeight;// 当前窗口的高度\n    const wW = window.innerWidth;// 当前窗口的宽度\n    const rem = wW * whdef;// 以默认比例值乘以当前窗口宽度,得到该宽度下的相应FONT-SIZE值\n    document.querySelector('html').style['font-size'] = `${rem}px`\n  }\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"参考文章"},"参考文章"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"属性"},"属性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'s = " 网页可见区域宽：" document.body.clientWidth;\ns = " 网页可见区域高：" document.body.clientHeight;\ns = " 网页可见区域宽：" document.body.offsetWidth " (包括边线和滚动条的宽)";\ns = " 网页可见区域高：" document.body.offsetHeight " (包括边线的宽)";\ns = " 网页正文全文宽：" document.body.scrollWidth;\ns = " 网页正文全文高：" document.body.scrollHeight;\ns = " 网页被卷去的高(ff)：" document.body.scrollTop;\ns = " 网页被卷去的高(ie)：" document.documentElement.scrollTop;\ns = " 网页被卷去的左：" document.body.scrollLeft;\ns = " 网页正文部分上：" window.screenTop;\ns = " 网页正文部分左：" window.screenLeft;\ns = " 屏幕分辨率的高：" window.screen.height;\ns = " 屏幕分辨率的宽：" window.screen.width;\ns = " 屏幕可用工作区高度：" window.screen.availHeight;\ns = " 屏幕可用工作区宽度：" window.screen.availWidth;'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7015257656193449992",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7015257656193449992")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7148733509744459790",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7148733509744459790")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7043679136031703077",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7043679136031703077")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前端适配/PC端",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Ajax/axios.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前后端通信/Ajax/Axios",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"axios-介绍"},"Axios 介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Axios 是一个基于 promise 网络请求库，作用于 node.js 和浏览器中。 它是 isomorphic 的(即同一套代码可以运行在浏览器和 node.js 中)。在服务端它使用原生 node.js http 模块, 而在客户端 (浏览端) 则使用 XMLHttpRequests。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"浏览器端Axios对xhr进行了一次封装，使用更加方便，摆脱了xhr底层的繁琐；Node端，Axios对nodejs-http模块进行了二次封装",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.axios-http.cn/docs/intro",target:"_blank",rel:"nofollow noopener noreferrer"},"Axios 官网")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"二次封装浏览器"},"二次封装（浏览器）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1依赖"},"1、依赖"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"axios"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"qs"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"^1.0.0"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"^6.11.0")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2目录"},"2、目录"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-text"},"|-src\n    ｜-api\n        ｜-interceptpr.ts\n        ｜-request.ts\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3实现"},"3、实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'/**\n * interceptor.js\n * 生成基础axios对象，并对请求和响应做处理\n * 前后端约定接口返回解构规范\n * {\n *    code:200,\n *    data:"成功",\n *    message:""\n * }\n */\nimport axios from "axios";\nimport { message } from "antd";\n\n// 创建一个独立的axios实例\nconst service = axios.create({\n  // 设置baseUr地址,如果通过proxy跨域可直接填写base地址\n  baseURL: "/api",\n  // 定义统一的请求头部\n  // 配置请求超时时间60s\n  timeout: 60000,\n  // 跨域携带cookie\n  withCredentials: true,\n});\n// 请求拦截\n\nservice.interceptors.request.use((config) => {\n  // 自定义header，可添加项目token\n  console.log("config", config);\n  const token = localStorage.getItem("token");\n  if (token) {\n    config.headers.Authorization = token;\n  }\n  return config;\n});\n// 返回拦截\nservice.interceptors.response.use(\n  (response) => {\n    // 获取接口返回结果\n    const res = response.data;\n    // code为0，直接把结果返回回去，这样前端代码就不用在获取一次data.\n    if (res.code === 0) {\n      return res;\n    } else if (res.code === 401) {\n      // 401假设是未登录状态码\n      message.warning(res.message);\n      // 也可使用router进行跳转\n      window.location.href = "/login"; //登录页面代码\n      return res;\n    } else {\n      // 错误显示可在service中控制，因为某些场景我们不想要展示错误\n      // Message.error(res.message);\n      return res;\n    }\n  },\n  () => {\n    message.error("网络请求异常，请稍后重试!");\n  }\n);\nexport default service;\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'/**\n * request.js\n * 通过promise对axios做二次封装，针对用户端参数，做灵活配置\n */\nimport { message } from "antd";\nimport instance from "./interceptor";\nimport qs from "qs";\n\n/**\n * 核心函数，可通过它处理一切请求数据，并做横向扩展\n * @param {url} 请求地址\n * @param {params} 请求参数\n * @param {options} 请求配置，针对当前本次请求；\n * @param loading 是否显示loading\n * @param mock 本次是否请求mock而非线上\n * @param error 本次是否显示错误\n */\nfunction request(\n  url,\n  params,\n  options = { loading: true, mock: false, error: true, isUploadFile: false },\n  method\n) {\n  let loadingInstance;\n  const { isUploadFile } = options;\n  // 请求前loading\n  //  if(options.loading)loadingInstance=Loading.service();\n  return new Promise((resolve, reject) => {\n    let data = {};\n    let headers = {\n      "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",\n    };\n    // get请求使用params字段\n    if (method == "get") {\n      data = { params };\n    }\n    // post请求使用data字段\n    if (method == "post") {\n      data = { data: qs.stringify(params) };\n    }\n    if (isUploadFile) {\n      //上传使用formData\n      headers["Content-Type"] = "multipart/form-data";\n      const formData = new FormData();\n      formData.append("fData", params);\n      data = { data: formData };\n    }\n    // 通过mock平台可对局部接口进行mock设置\n    instance({\n      url,\n      method,\n      ...data,\n      headers,\n    })\n      .then((res) => {\n        // 此处作用很大，可以扩展很多功能。\n        // 比如对接多个后台，数据结构不一致，可做接口适配器\n        // 也可对返回日期/金额/数字等统一做集中处理\n        if (res && res.code === 200) {\n          resolve(res.data);\n        } else {\n          // 通过配置可关闭错误提示\n          if (res && options.error) {\n            message.error(res.message);\n          }\n          reject(res);\n        }\n      })\n      .catch((error) => {\n        message.error(error.message);\n      })\n      .finally(() => {\n        // loadingInstance.close();\n      });\n  });\n}\n// 封装GET请求\nfunction get(url, params, options) {\n  return request(url, params, options, "get");\n}\n// 封装POST请求\nfunction post(url, params, options) {\n  return request(url, params, options, "post");\n}\n//上传文件\nfunction uploadFile(url, params, options) {\n  const newOpt = { ...options, isUploadFile: true };\n  return request(url, params, newOpt, "post");\n}\nexport { get, post, uploadFile };\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-使用"},"4 使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'import React from "react";\nimport { Form, Checkbox, Input, Button, Card } from "antd";\nimport { LockOutlined, UserOutlined } from "@ant-design/icons";\nimport { useDispatch } from "react-redux";\nimport { updateUserInfo } from "@src/store/userInfoSlice";\nimport apiMap from "@src/api/apiMap";\nimport { post, get, uploadFile } from "@src/api/request";\nconst FormItem = Form.Item;\nconst InputStyle = { width: "240px" };\nconst Login = () => {\n  const dispatch = useDispatch();\n  const onFinish = (values) => {\n    const payload = {\n      token: `${values["username"]}_${values["password"]}`,\n      userName: values["username"],\n    };\n    post(apiMap.login, {\n      userName: values["username"],\n      password: values["password"],\n    });\n    dispatch(updateUserInfo(payload));\n    console.log("Success:", values);\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log("Failed:", errorInfo);\n  };\n  return (\n    <Card title="登录验证" style={{ width: "60%", margin: "20px auto" }}>\n      <input\n        type="file"\n        onChange={(e) => {\n          const form = document.getElementById("file-test");\n          console.log("e", form["files"][0]);\n          uploadFile("/upload-file", form["files"][0]);\n        }}\n        id="file-test"\n      ></input>\n      <Form\n        name="normal_login"\n        className="login-form"\n        initialValues={{\n          remember: true,\n          username: "admin",\n          password: "123456",\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        style={{ width: 260, margin: "20px auto" }}\n      >\n        <FormItem\n          name="username"\n          style={InputStyle}\n          rules={[{ required: true, message: "用户名必填" }]}\n        >\n          <Input\n            prefix={<UserOutlined className="site-form-item-icon" />}\n            placeholder="请输入用户名"\n          />\n        </FormItem>\n        <FormItem\n          name="password"\n          style={InputStyle}\n          rules={[{ required: true, message: "密码必填" }]}\n        >\n          <Input\n            prefix={<LockOutlined className="site-form-item-icon" />}\n            type="password"\n            placeholder="请输入密码"\n          />\n        </FormItem>\n        <FormItem>\n          <FormItem name="remember" valuePropName="checked" noStyle>\n            <Checkbox>记住密码</Checkbox>\n          </FormItem>\n        </FormItem>\n\n        <FormItem>\n          <Button\n            type="primary"\n            htmlType="submit"\n            className="login-form-button"\n          >\n            登录\n          </Button>\n        </FormItem>\n      </Form>\n    </Card>\n  );\n};\nexport default Login;\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前后端通信/Ajax/Axios",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Ajax/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前后端通信/Ajax/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"ajax介绍"},"Ajax介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"AJAX（Asynchronous JavaScript And XML ）是一种使用 XMLHttpRequest 技术构建更复杂，动态的网页的编程实践。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"AJAX 允许只更新一个 HTML 页面的部分 DOM，而无须重新加载整个页面。AJAX 还允许异步工作，这意味着当网页的一部分正试图重新加载时，您的代码可以继续运行（相比之下，同步会阻止代码继续运行，直到这部分的网页完成重新加载）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"通过交互式网站和现代 Web 标准，AJAX 正在逐渐被 JavaScript 框架中的函数和官方的 Fetch API 标准取代。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest (XHR) 是一种创建 AJAX 请求的 JavaScript API 。它的方法提供了在浏览器和服务器之间发送请求的能力。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前后端通信/Ajax/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Ajax/xhr.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前后端通信/Ajax/xhr",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xhr介绍"},"xhr介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest (XHR) 是一种创建 AJAX 请求的 JavaScript API 。它的方法提供了在浏览器和服务器之间发送请求的能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。XMLHttpRequest 在 AJAX 编程中被大量使用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"尽管名称如此，XMLHttpRequest 可以用于获取任何类型的数据，而不仅仅是 XML。它甚至支持 HTTP 以外的协议（包括 file:// 和 FTP），尽管可能受到更多出于安全等原因的限制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest",target:"_blank",rel:"nofollow noopener noreferrer"},"MDN链接")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xmlhttprequestreadystate"},"XMLHttpRequest.readyState"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"值"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"描述"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"0"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"UNSENT"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"代理被创建，但尚未调用 open() 方法。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"1"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"OPENED"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"open() 方法已经被调用。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"2"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"HEADERS_RECEIVED"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"send() 方法已经被调用，并且头部和状态已经可获得。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"3"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"LOADING"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"下载中；responseText 属性已经包含部分数据。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"4"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"DONE"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"下载操作已完成。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xmlhttprequestresponse"},"XMLHttpRequest.response"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest 的 response 属性返回响应的正文。返回的类型为 ArrayBuffer、Blob、Document、JavaScript Object 或字符串中的一个。这取决于请求的 responseType 属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xmlhttprequestresponsetext"},"XMLHttpRequest.responseText"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest.responseText 在一个请求被发送后，从服务器端返回文本。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'DOMString 是 XMLHttpRequest 返回的纯文本的值。当 DOMString 为 null 时，表示请求失败了。当DOMString 为 "" 时，表示这个请求还没有被 send()。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xmlhttprequeststatus"},"XMLHttpRequest.status"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"只读属性 XMLHttpRequest.status 返回了 XMLHttpRequest 响应中的数字状态码。status 的值是一个无符号短整型。在请求完成前，status 的值为 0。值得注意的是，如果 XMLHttpRequest 出错，浏览器返回的 status 也为 0。status 码是标准的 HTTP status codes。举个例子，status 200 代表一个成功的请求。如果服务器响应中没有明确指定 status 码，XMLHttpRequest.status 将会默认为 200。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xmlhttprequesttimeout"},"XMLHttpRequest.timeout"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest.timeout 是一个无符号长整型数，代表着一个请求在被自动终止前所消耗的毫秒数。默认值为 0，意味着没有超时。超时并不应该用在一个 document environment 中的同步 XMLHttpRequests 请求中，否则将会抛出一个 InvalidAccessError 类型的错误。当超时发生， timeout 事件将会被触发。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"xmlhttprequestwithcredentials"},"XMLHttpRequest.withCredentials"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"XMLHttpRequest.withCredentials 属性是一个 Boolean 类型，它指示了是否该使用类似 Cookies、Authorization Headers (头部授权) 或者 TLS 客户端证书这一类资格证书来创建一个跨站点访问控制（cross-site Access-Control）请求。在同一个站点下使用 withCredentials 属性是无效的。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"此外，这个指示也会被用做响应中 Cookies 被忽视的标示。默认值是 false。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如果在发送来自其他域的 XMLHttpRequest 请求之前，未设置withCredentials 为 true，那么就不能为它自己的域设置 Cookie 值。而通过设置 withCredentials 为 true 获得的第三方 Cookies，将会依旧享受同源策略，因此不能被通过 document.cookie 或者从头部相应请求的脚本等访问。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"demo"},"demo"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},"<button id=\"ajaxButton\" type=\"button\">Make a request</button>\n\n<script>\n(function() {\n  var httpRequest;\n  document.getElementById(\"ajaxButton\").addEventListener('click', makeRequest);\n\n  function makeRequest() {\n    httpRequest = new XMLHttpRequest();\n\n    if (!httpRequest) {\n      alert('Giving up :( Cannot create an XMLHTTP instance');\n      return false;\n    }\n    httpRequest.onreadystatechange = alertContents;\n    httpRequest.open('GET', 'test.html');\n    httpRequest.send();\n  }\n\n  function alertContents() {\n    if (httpRequest.readyState === XMLHttpRequest.DONE) {\n      if (httpRequest.status === 200) {\n        alert(httpRequest.responseText);\n      } else {\n        alert('There was a problem with the request.');\n      }\n    }\n  }\n})();\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"formdata-demo"},"FormData demo"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest",target:"_blank",rel:"nofollow noopener noreferrer"},"MDN链接")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<!doctype html>\n<html>\n<head>\n<meta http-equiv="Content-Type" charset="UTF-8" />\n<title>Sending forms with FormData &ndash; MDN</title>\n<script>\n"use strict";\n\nfunction ajaxSuccess () {\n  console.log(this.responseText);\n}\n\nfunction AJAXSubmit (oFormElement) {\n  if (!oFormElement.action) { return; }\n  var oReq = new XMLHttpRequest();\n  oReq.onload = ajaxSuccess();\n  if (oFormElement.method.toLowerCase() === "post") {\n    oReq.open("post", oFormElement.action);\n    oReq.send(new FormData(oFormElement));\n  } else {\n    var oField, sFieldType, nFile, sSearch = "";\n    for (var nItem = 0; nItem < oFormElement.elements.length; nItem++) {\n      oField = oFormElement.elements[nItem];\n      if (!oField.hasAttribute("name")) { continue; }\n      sFieldType = oField.nodeName.toUpperCase() === "INPUT" ?\n          oField.getAttribute("type").toUpperCase() : "TEXT";\n      if (sFieldType === "FILE") {\n        for (nFile = 0; nFile < oField.files.length;\n            sSearch += "&" + escape(oField.name) + "=" + escape(oField.files[nFile++].name));\n      } else if ((sFieldType !== "RADIO" && sFieldType !== "CHECKBOX") || oField.checked) {\n        sSearch += "&" + escape(oField.name) + "=" + escape(oField.value);\n      }\n    }\n    oReq.open("get", oFormElement.action.replace(/(?:\\?.*)?$/, sSearch.replace(/^&/, "?")), true);\n    oReq.send(null);\n  }\n}\n<\/script>\n</head>\n<body>\n\n<h1>Sending forms with FormData</h1>\n\n<h2>Using the GET method</h2>\n\n<form action="register.php" method="get" onsubmit="AJAXSubmit(this); return false;">\n  <fieldset>\n    <legend>Registration example</legend>\n    <p>\n      First name: <input type="text" name="firstname" /><br />\n      Last name: <input type="text" name="lastname" />\n    </p>\n    <p>\n      <input type="submit" value="Submit" />\n    </p>\n  </fieldset>\n</form>\n\n<h2>Using the POST method</h2>\n<h3>Enctype: application/x-www-form-urlencoded (default)</h3>\n\n<form action="register.php" method="post" onsubmit="AJAXSubmit(this); return false;">\n  <fieldset>\n    <legend>Registration example</legend>\n    <p>\n      First name: <input type="text" name="firstname" /><br />\n      Last name: <input type="text" name="lastname" />\n    </p>\n    <p>\n      <input type="submit" value="Submit" />\n    </p>\n  </fieldset>\n</form>\n\n<h3>Enctype: text/plain</h3>\n\n<p>The text/plain encoding is not supported by the FormData API.</p>\n\n<h3>Enctype: multipart/form-data</h3>\n\n<form action="register.php" method="post" enctype="multipart/form-data"\n    onsubmit="AJAXSubmit(this); return false;">\n  <fieldset>\n    <legend>Upload example</legend>\n    <p>\n      First name: <input type="text" name="firstname" /><br />\n      Last name: <input type="text" name="lastname" /><br />\n      Sex:\n      <input id="sex_male" type="radio" name="sex" value="male" />\n      <label for="sex_male">Male</label>\n      <input id="sex_female" type="radio" name="sex" value="female" />\n      <label for="sex_female">Female</label><br />\n      Password: <input type="password" name="secret" /><br />\n      What do you prefer:\n      <select name="image_type">\n        <option>Books</option>\n        <option>Cinema</option>\n        <option>TV</option>\n      </select>\n    </p>\n    <p>\n      Post your photos:\n      <input type="file" multiple name="photos[]">\n    </p>\n    <p>\n      <input id="vehicle_bike" type="checkbox" name="vehicle[]" value="Bike" />\n      <label for="vehicle_bike">I have a bike</label><br />\n      <input id="vehicle_car" type="checkbox" name="vehicle[]" value="Car" />\n      <label for="vehicle_car">I have a car</label>\n    </p>\n    <p>\n      Describe yourself:<br />\n      <textarea name="description" cols="50" rows="8"></textarea>\n    </p>\n    <p>\n      <input type="submit" value="Submit" />\n    </p>\n  </fieldset>\n</form>\n</body>\n</html>\n\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前后端通信/Ajax/xhr",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/BaGuWen/design.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/八股文/设计稿尺寸",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"常见尺寸"},"常见尺寸"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1024×768,1366×768,1280×800,1280×1024，1440×900,1600×900，1920×1080"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"选择1920*1080的尺寸，来适配不同的屏幕"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"参考文章"},"参考文章"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"属性"},"属性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'s = " 网页可见区域宽：" document.body.clientWidth;\ns = " 网页可见区域高：" document.body.clientHeight;\ns = " 网页可见区域宽：" document.body.offsetWidth " (包括边线和滚动条的宽)";\ns = " 网页可见区域高：" document.body.offsetHeight " (包括边线的宽)";\ns = " 网页正文全文宽：" document.body.scrollWidth;\ns = " 网页正文全文高：" document.body.scrollHeight;\ns = " 网页被卷去的高(ff)：" document.body.scrollTop;\ns = " 网页被卷去的高(ie)：" document.documentElement.scrollTop;\ns = " 网页被卷去的左：" document.body.scrollLeft;\ns = " 网页正文部分上：" window.screenTop;\ns = " 网页正文部分左：" window.screenLeft;\ns = " 屏幕分辨率的高：" window.screen.height;\ns = " 屏幕分辨率的宽：" window.screen.width;\ns = " 屏幕可用工作区高度：" window.screen.availHeight;\ns = " 屏幕可用工作区宽度：" window.screen.availWidth;'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7015257656193449992",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7015257656193449992")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7148733509744459790",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7148733509744459790")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7043679136031703077",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7043679136031703077")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/八股文/设计稿尺寸",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/BaGuWen/mianshiti.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/八股文/面试题",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/FE-Cheerleaders/front-end-interview-guide/tree/master/Network#%E5%BA%94%E7%94%A8%E5%B1%82",target:"_blank",rel:"nofollow noopener noreferrer"},"1、八股好文-基础")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://woai3c.gitee.io/introduction-to-front-end-engineering/#%E7%AE%80%E4%BB%8B",target:"_blank",rel:"nofollow noopener noreferrer"},"2、八股好文-工程化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://vue3js.cn/interview/vue/vue.html#%E4%B8%89%E3%80%81vue%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7",target:"_blank",rel:"nofollow noopener noreferrer"},"https://vue3js.cn/interview/vue/vue.html#%E4%B8%89%E3%80%81vue%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/sisterAn/JavaScript-Algorithms/issues?page=1&q=is%3Aissue+is%3Aopen",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/sisterAn/JavaScript-Algorithms/issues?page=1&q=is%3Aissue+is%3Aopen")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"5、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1385870",target:"_blank",rel:"nofollow noopener noreferrer"},"https://cloud.tencent.com/developer/article/1385870")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"6、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/1623311678/Daily-Interview-Question",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/1623311678/Daily-Interview-Question")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"7、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://v3.ice.work/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://v3.ice.work/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"8、阿里巴巴  ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/ALIBABA",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/ALIBABA")," "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"9、腾讯 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/tencent",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/tencent")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"10、字节 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/bytedance",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/bytedance")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"11、美团 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/meituan",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/meituan")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"12、滴滴 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/didi",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/didi")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"13、京东 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/jd-opensource",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/jd-opensource")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/八股文/面试题",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/CLI/cli.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_hundun_cli_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/hundun-cli.png"),_assets_hundun_cli_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_hundun_cli_png__WEBPACK_IMPORTED_MODULE_7__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/脚手架/快速开始",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"cli-快速开始"},"CLI 快速开始"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-安装"},"1 安装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"}," sudo npm install @hun-dun/cli -g \n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"2-创建项目"},"2 创建项目"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"}," hundun create my-app\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_hundun_cli_png__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"HuncunCLIImage"}))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/脚手架/快速开始",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/CLI/study.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/脚手架/学习资料",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"学习资料"},"学习资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"编辑器下载"},"编辑器下载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://code.visualstudio.com/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://code.visualstudio.com/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"环境安装"},"环境安装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"下载nodejs ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://nodejs.org/en",target:"_blank",rel:"nofollow noopener noreferrer"},"https://nodejs.org/en")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"开发框架"},"开发框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"React ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://react.nodejs.cn/learn",target:"_blank",rel:"nofollow noopener noreferrer"},"https://react.nodejs.cn/learn")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"基础知识"},"基础知识"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"菜鸟教程 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.runoob.com/html/html-tutorial.html",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.runoob.com/html/html-tutorial.html")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/脚手架/学习资料",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Deploy/nginx.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/部署/nginx",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"nginx-服务部署web前端"},"Nginx 服务部署web前端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-nginx-安装"},"1 nginx 安装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1333800",target:"_blank",rel:"nofollow noopener noreferrer"},"windows")," 、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/056fc71e67c8",target:"_blank",rel:"nofollow noopener noreferrer"},"centos")," 、\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://blog.csdn.net/qq_23832313/article/details/83578836",target:"_blank",rel:"nofollow noopener noreferrer"},"ubuntu")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-前端静态资源上传"},"2 前端静态资源上传"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"nginx文件安装完成之后的文件位置："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"/usr/sbin/nginx：主程序"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"/etc/nginx：存放配置文件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"/usr/share/nginx：存放静态文件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"/var/log/nginx：存放日志"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"因此需要把前端静态资源存储在usrsharenginx-目录"},"因此需要把前端静态资源存储在/usr/share/nginx 目录"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-nginxconfig"},"3 nginx.config"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"复制下面的配置将原有-etcnginxnginxconf-覆盖掉"},"复制下面的配置，将原有 /etc/nginx/nginx.conf 覆盖掉"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"该配置监听端口80（8080），静态资源存放在/usr/share/nginx/dist下，并且对静态资源开启了强缓存"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},'user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n    worker_connections 768;\n    # multi_accept on;\n}\n\nhttp {\n\n    ##\n    # Basic Settings\n    ##\n\n    sendfile on;\n    tcp_nopush on;\n    types_hash_max_size 2048;\n    # server_tokens off;\n\n    # server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    ##\n    # SSL Settings\n    ##\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n\n    ##\n    # Logging Settings\n    ##\n\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n\n    ##\n    # Gzip Settings\n    ##\n\n    gzip on;\n\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_buffers 16 8k;\n    gzip_http_version 1.1;\n    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n    ##\n    # Virtual Host Configs\n    ##\n\n    #include /etc/nginx/conf.d/*.conf;\n    #include /etc/nginx/sites-enabled/*;\n    #include /etc/nginx/hosts/server0.host;\n    server {\n    listen 80;\n        root /usr/share/nginx/dist;\n        index index.html index.htm;\n        location / {\n                try_files $uri $uri/ /index.html;\n        }\n        location ^~ /assets/ {\n                gzip_static on;\n                expires max;\n                add_header Cache-Control public;\n        }\n        error_page 500 502 503 504 /500.html;\n        client_max_body_size 20M;\n        keepalive_timeout 10;\n     location ~* .(html)$ {\n     access_log off;\n         add_header  Cache-Control  max-age=no-cache;\n  }\n\n    location ~* .(css|js|png|jpg|jpeg|gif|gz|svg|mp4|ogg|ogv|webm|htc|xml|woff)$ {\n        # 同上，通配所有以.css/.js/...结尾的请求\n        access_log off;\n        add_header    Cache-Control  max-age=360000;\n  }\n  # 当页面调动 /api/* 接口时，自动将请求转到 3030端口\n    location /api {\n        proxy_http_version 1.1;\n        proxy_pass http://127.0.0.1:3030;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "Upgrade";\n        proxy_redirect default;\n    }\n     # 当页面调动 /musicApi 接口时，自动将请求转到 http://123.56.221.77 端口，这是远程的IP地址\n    location /musicApi {\n        proxy_http_version 1.1;\n        proxy_pass http://123.56.221.77;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "Upgrade";\n        proxy_redirect default;\n    }\n}\n}\n\n#mail {\n#   # See sample authentication script at:\n#   # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript\n#\n#   # auth_http localhost/auth.php;\n#   # pop3_capabilities "TOP" "USER";\n#   # imap_capabilities "IMAP4rev1" "UIDPLUS";\n#\n#   server {\n#       listen     localhost:110;\n#       protocol   pop3;\n#       proxy      on;\n#   }\n#\n#   server {\n#       listen     localhost:143;\n#       protocol   imap;\n#       proxy      on;\n#   }\n#}\n\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/部署/nginx",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Deploy/node.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/部署/node",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"nodejs-服务部署web前端"},"Nodejs 服务部署web前端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\nconst Koa = require('koa');\nconst app = new Koa();\nconst serve = require('koa-static');\nconst compress = require('koa-compress');\nconst path = require('path')\nconst options = { threshold: 2048 };\n//gzip压缩\napp.use(compress(options));\n//静态资源暴露\napp.use(serve(path.resolve(__dirname,'./../storybook-static')));\n//监听80端口\napp.listen(80);\nconsole.log('the server is running')\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/部署/node",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/DevRules/DevRules.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/开发规范/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"开发规范"},"开发规范"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"一般来讲，业界的开发规范是以eslint为基础，typescript-eslint为补充的。支持js 、ts语法检查，代码修复。还包括prettier代码格式化，通过husky钩子，以及commitlint来规范提交代码的规范。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"常见规范"},"常见规范"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"腾讯前端imweb团队前端规范"},"腾讯前端IMWEB团队前端规范"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"eslint-config-alloy "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"官网：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://imweb.github.io/rule/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://imweb.github.io/rule/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.alloyteam.com/nav/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.alloyteam.com/nav/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/AlloyTeam/eslint-config-alloy",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/AlloyTeam/eslint-config-alloy")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"阿里巴巴前端开发规范"},"阿里巴巴前端开发规范"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/alibaba/f2e-spec?tab=readme-ov-file",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/alibaba/f2e-spec?tab=readme-ov-file")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.npmjs.com/package/f2elint",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.npmjs.com/package/f2elint")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/开发规范/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Fetch/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前后端通信/Fetch/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"1介绍"},"1、介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Fetch API 提供了一个 JavaScript 接口，用于访问和操纵 HTTP 管道的一些具体部分，例如请求和响应。它还提供了一个全局 fetch() 方法，该方法提供了一种简单，合理的方式来跨网络异步获取资源。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"当接收到一个代表错误的 HTTP 状态码时，从 fetch() 返回的 Promise 不会被标记为 reject，即使响应的 HTTP 状态码是 404 或 500。相反，它会将 Promise 状态标记为 resolve（如果响应的 HTTP 状态码不在 200 - 299 的范围内，则设置 resolve 返回值的 ok 属性为 false），仅当网络故障时或请求被阻止时，才会标记为 reject。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"fetch 不会发送跨域 cookie，除非你使用了 credentials 的初始化选项。（自 2018 年 8 月以后，默认的 credentials 政策变更为 same-origin。Firefox 也在 61.0b13 版本中进行了修改）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"2二次封装"},"2、二次封装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"//fetch/hFetch.js\n/** disable-eslint */\nclass HFetch {\n  constructor(originFetch) {\n    // 定义用来存储拦截请求和拦截响应结果的处理和错误结果处理的函数集合\n    this.OriginFetch = originFetch\n    this.interceptorsReq = []\n    this.interceptorsReqError = []\n    this.interceptorsRes = []\n    this.interceptorsResError = []\n    // interceptors拦截器提供request和response两种拦截器功能。\n    // 可以通过request和response的use方法来绑定两种拦截器的处理函数。\n    // use方法接收两个参数，参数为一个callback函数，callback函数用来作为拦截器的成功处理函数，errorCallback作为错误处理函数\n    // request.use方法会把callback放在interceptorsReq中，等待执行。\n    // response.use方法会把callback放在interceptorsRes中，等待执行。\n    // 拦截器的处理函数callback接收一个参数。\n    // request拦截器的callback接收的是请求发起前的config；\n    // response拦截器的callback接收的是网络请求的response结果。\n    this.interceptors = {\n      request: (callback, errorCallback) => {\n        this.interceptorsReq.push(callback)\n        errorCallback && this.interceptorsReqError.push(errorCallback)\n      },\n      response: (callback, errorCallback) => {\n        this.interceptorsRes.push(callback)\n        errorCallback && this.interceptorsResError.push(errorCallback)\n      }\n    }\n  }\n  fetch(input, init = {}) {\n    // interceptorsReq是拦截请求的拦截处理函数集合\n    this.interceptorsReq.forEach(item => {\n      init = item(init)\n    })\n\n    // 在原生fetch外面封装一个promise，为了在promise里面可以对fetch请求的结果做拦截处理。\n    // 同时，保证Hfetch函数返回的结果是个promise对象。\n    return new Promise((resolve, reject) => {\n      // 发起fetch请求，fetch请求的形参是接收上层函数的形参\n      const fetch = this.OriginFetch\n      fetch(input, init)\n        .then(res => {\n          // interceptorsRes是拦截响应结果的拦截处理函数集合\n          this.interceptorsRes.forEach(item => {\n            // 拦截器对响应结果做处理，把处理后的结果返回给响应结果。\n            res = item(res)\n          })\n          // 将拦截器处理后的响应结果resolve出去\n          resolve(res)\n        })\n        .catch(err => {\n          // interceptorsResError是拦截响应错误结果的拦截处理函数集合\n          this.interceptorsResError.forEach(item => {\n            // 拦截器对响应错误结果做处理，把处理后的结果返回给响应结果。\n            err = item(err)\n          })\n          reject(err)\n        })\n    })\n  }\n}\nexport default HFetch\n\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'//fetch/index.js\n\n//fetch/index.js\n\nimport HFetch from "./hFetch"\n\n/**\n * config 自定义配置项\n * @param withoutCheck 不使用默认的接口状态校验，直接返回 response\n * @param returnOrigin 是否返回整个 response 对象，为 false 只返回 response.data\n * @param showError 全局错误时，是否使用统一的报错方式\n * @param canEmpty 传输参数是否可以为空\n * @param mock 是否使用 mock 服务\n * @param timeout 接口请求超时时间，默认10秒\n */\nlet configDefault = {\n  showError: true,\n  canEmpty: false,\n  returnOrigin: false,\n  withoutCheck: false,\n  mock: false,\n  timeout: 10000\n}\nlet hFetchInstace\nif (!hFetchInstace) {\n  hFetchInstace = new HFetch(window.fetch)\n}\n\n// 添加响应拦截器\nhFetchInstace.interceptors.response(async response => {\n  // TODO: 这里是复制一份结果处理，在这里可以做一些操作\n\n  // HTTP 状态码 2xx 状态入口，data.code 为 200 表示数据正确，无任何错误\n  if (response.status >= 200 && response.status < 300) {\n    return response\n  } else {\n    // 非 2xx 状态入口\n    if (configDefault.withoutCheck) {\n      // 不进行状态状态检测\n      return Promise.reject(response)\n    }\n    return Promise.reject(response)\n  }\n})\n// 添加请求拦截器\nhFetchInstace.interceptors.request(config => {\n  configDefault = Object.assign(\n    {\n      responseType: "json",\n      headers: {\n        "Content-Type": "application/json;charset=utf-8",\n        credentials: "include"\n      }\n    },\n    configDefault,\n    config\n  )\n  console.log("添加请求拦截器 configDefalut ==>", configDefault)\n  return configDefault\n})\nfunction request(method, path, data, config) {\n  let initData = {\n    method,\n    ...configDefault,\n    ...config,\n    body: JSON.stringify(data)\n  }\n  if (method === "GET") {\n    let params = ""\n    if (data) {\n      // 对象转url参数\n      params = JSON.stringify(data)\n        .replace(/:/g, "=")\n        .replace(/"/g, "")\n        .replace(/,/g, "&")\n        .match(/\\{([^)]*)\\}/)[1]\n    }\n    return hFetchInstace.fetch(`${path}?${params}`, {\n      ...configDefault,\n      ...config\n    })\n  }\n\n  return hFetchInstace.fetch(path, initData)\n}\n\n// get请求方法使用封装\nfunction get(path, data, config) {\n  return request("GET", path, data, config)\n}\n\n// post请求方法使用封装\nfunction post(path, data, config) {\n  return request("POST", path, data, config)\n}\n\n// put请求方法使用封装\nfunction put(path, data, config) {\n  return request("PUT", path, data, config)\n}\n\n// delete请求方法使用封装\nfunction del(path, data, config) {\n  return request("DELETE", path, data, config)\n}\nfunction newFetch() {\n  return hFetchInstace.fetch\n}\n\nexport { newFetch, get, post, put, del }\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"3使用"},"3、使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'\nimport {newFetch,get} from "@src/fetch"\nwindow.fetch = newFetch\nget("/api/getList1", { id: "1" })\nget("/api/getList2", { id: "2" })\nget("/api/getList3", { id: "3" })\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"4fetch与xhr区别"},"4、fetch与xhr区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"注意点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、XHR 基于事件机制实现请求成功与失败的回调，不符合关注分离（Separation of Concerns）的原则，配置和调用方式非常混乱。\nFetch 通过 Promise 来实现回调，调用更加友好\nXHR 可以监控读取进度和中断请求，而 Fetch 请求不可以，因此fetch不能设置超时时间，但是xhr可以。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、etch默认返回 一个promise对象，fetch是有兼容问题的\nIE系列是完全不支持的，主流浏览器的早起版本也不支持，所以如果在项目中使用需要做兼容方案处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、fetch 不管请求处理成功还是失败，都会触发promise的resolve状态回掉。这个和传统的ajax 框架是有点区别的。fetch只有当网络故障导致请求发送失败或者跨域的时候才会触发reject的逻辑。我们可以通过response 对象的ok是否是true来判断是否是真正的成功。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"5参考"},"5、参考"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7021444877778944037",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7021444877778944037")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前后端通信/Fetch/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Flutter/flutter.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/flutter/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"flutter"},"flutter"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://flutter.dev/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://flutter.dev/")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/flutter/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/HM/hm-intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/鸿蒙/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"鸿蒙"},"鸿蒙"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.harmonyos.com/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.harmonyos.com/")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/鸿蒙/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Intro/Intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_plugin_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/plugin.png"),_assets_plugin_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_plugin_png__WEBPACK_IMPORTED_MODULE_7__),_assets_template_png__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./stories/assets/template.png"),_assets_template_png__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_assets_template_png__WEBPACK_IMPORTED_MODULE_8__),_assets_compile_png__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./stories/assets/compile.png"),_assets_compile_png__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_assets_compile_png__WEBPACK_IMPORTED_MODULE_9__),_assets_devRule_png__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./stories/assets/devRule.png"),_assets_devRule_png__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_assets_devRule_png__WEBPACK_IMPORTED_MODULE_10__),_assets_view_png__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./stories/assets/view.png"),_assets_view_png__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_assets_view_png__WEBPACK_IMPORTED_MODULE_11__),_assets_lowCode_png__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./stories/assets/lowCode.png"),_assets_lowCode_png__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_assets_lowCode_png__WEBPACK_IMPORTED_MODULE_12__),_assets_mircroClient_png__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./stories/assets/mircroClient.png"),_assets_mircroClient_png__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_assets_mircroClient_png__WEBPACK_IMPORTED_MODULE_13__),_assets_monitor_png__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./stories/assets/monitor.png"),_assets_monitor_png__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_assets_monitor_png__WEBPACK_IMPORTED_MODULE_14__),_assets_article_png__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./stories/assets/article.png"),_assets_article_png__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_assets_article_png__WEBPACK_IMPORTED_MODULE_15__),_assets_logo_png__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./stories/assets/logo.png"),_assets_logo_png__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_assets_logo_png__WEBPACK_IMPORTED_MODULE_16__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/混沌建站-前端工程化",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("style",null,"\n  .hundun-logo{\n    display:none;\n  }\n  @media screen and (max-width: 500px) {\n  .hundun-logo{\n   display:block;\n  }\n}\n    .subheading {\n      --mediumdark: '#999999';\n      font-weight: 900;\n      font-size: 13px;\n      color: #999;\n      letter-spacing: 6px;\n      line-height: 24px;\n      text-transform: uppercase;\n      margin-bottom: 12px;\n      margin-top: 40px;\n    }\n\n    .link-list {\n      display: grid;\n      grid-template-columns: 1fr;\n      grid-template-rows: 1fr 1fr;\n      row-gap: 10px;\n    }\n\n    @media (min-width: 620px) {\n      .link-list {\n        row-gap: 20px;\n        column-gap: 20px;\n        grid-template-columns: 1fr 1fr;\n      }\n    }\n\n    @media all and (-ms-high-contrast:none) {\n    .link-list {\n        display: -ms-grid;\n        -ms-grid-columns: 1fr 1fr;\n        -ms-grid-rows: 1fr 1fr;\n      }\n    }\n\n    .link-item {\n      display: block;\n      padding: 20px 30px 20px 15px;\n      border: 1px solid #00000010;\n      border-radius: 5px;\n      transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n      color: #333333;\n      display: flex;\n      align-items: flex-start;\n    }\n     .link-item1 {\n      display: block;\n      padding: 20px 30px 20px 15px;\n      border: 1px solid #00000010;\n      border-radius: 5px;\n      transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n      color: #333333;\n      display: flex;\n      align-items: flex-start;\n    }\n\n    .link-item:hover {\n      border-color: #1EA7FD50;\n      transform: translate3d(0, -3px, 0);\n      box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n    }\n\n    .link-item:active {\n      border-color: #1EA7FD;\n      transform: translate3d(0, 0, 0);\n    }\n\n    .link-item strong {\n      font-weight: 700;\n      display: block;\n      margin-bottom: 2px;\n    }\n\n    .link-item img {\n      height: 40px;\n      width: 40px;\n      margin-right: 15px;\n      flex: none;\n    }\n\n    .link-item span {\n      font-size: 14px;\n      line-height: 20px;\n    }\n\n    .tip {\n      display: inline-block;\n      border-radius: 1em;\n      font-size: 11px;\n      line-height: 12px;\n      font-weight: 700;\n      background: #E7FDD8;\n      color: #66BF3C;\n      padding: 4px 12px;\n      margin-right: 10px;\n      vertical-align: top;\n    }\n\n    .tip-wrapper {\n      font-size: 13px;\n      line-height: 20px;\n      margin-top: 40px;\n      margin-bottom: 40px;\n    }\n\n    .tip-wrapper code {\n      font-size: 12px;\n      display: inline-block;\n    }\n  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"welcome-to-hundun"},"Welcome to Hundun"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_logo_png__WEBPACK_IMPORTED_MODULE_16___default.a,alt:"Logo",className:"hundun-logo"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"混沌建站一站式前端工程化解决方案"},"混沌建站，一站式前端工程化解决方案。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"https://1623311678.github.io/hundun-book/",target:"_blank"},"hundun-book"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"subheading"},"工程化能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},"　",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://"+window.location.host+"/?path=/docs/hundun-标准化模版-介绍--page"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_template_png__WEBPACK_IMPORTED_MODULE_8___default.a,alt:"template"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"标准化模版"),"Vue,React，SSR，CSR,VScode插件,H5,一码多端 模版"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_compile_png__WEBPACK_IMPORTED_MODULE_9___default.a,alt:"Build"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"编译构建"),"webpack、vite、rollup")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://"+window.location.host+"/?path=/docs/hundun-开发规范-介绍--page"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_devRule_png__WEBPACK_IMPORTED_MODULE_10___default.a,alt:"devRule"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"开发规范"),"prettier、eslint、commitlint"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_plugin_png__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"Plugin"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"插件化"),"插件化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_view_png__WEBPACK_IMPORTED_MODULE_11___default.a,alt:"view"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"图形化"),"图形化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://"+window.location.host+"/?path=/docs/hundun-低代码-无代码-介绍--page"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_lowCode_png__WEBPACK_IMPORTED_MODULE_12___default.a,alt:"lowCode"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"低代码/无代码"),"低代码/无代码"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://"+window.location.host+"/?path=/docs/hundun-微前端-介绍--page"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_mircroClient_png__WEBPACK_IMPORTED_MODULE_13___default.a,alt:"mircroClient"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"微前端"),"微前端"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://"+window.location.host+"/?path=/docs/hundun-监控-白泽--page"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_monitor_png__WEBPACK_IMPORTED_MODULE_14___default.a,alt:"monitor"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"前端监控"),"前端监控，包含CAT、Sentry、白泽、实现方案等"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://"+window.location.host+"/?path=/docs/hundun-八股文-面试题--page"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_article_png__WEBPACK_IMPORTED_MODULE_15___default.a,alt:"article"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"八股文"),"八股文")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("footer",{style:{width:"100%",position:"fixed",bottom:0,left:0,zIndex:10,background:"white"}},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-item1",style:{color:"orange",display:"flex",flexWrap:"wrap",width:"100%"}},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",null,"混沌建站 | "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{style:{marginLeft:"0px"}},"前端工程化 | "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{style:{marginLeft:"0px"}},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"http://beian.miit.gov.cn/",target:"_blank",style:{color:"orange"}},"京ICP备 2023000564 号 | ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{style:{marginLeft:"0px"}},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{href:"https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11011402013589",target:"_blank",style:{color:"orange"}},"京公安网备 11011402013589 号")))))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/混沌建站-前端工程化",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/JavaScript/es2025.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/JavaScript/es2025",parameters:{docs:{description:{component:"ES2025最新特性详解，包括已确定的新功能和提案中的特性。"}}},mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"es2025-新特性详解"},"ES2025 新特性详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"es2025-概述"},"ES2025 概述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"ES2025（ECMAScript 2025）是JavaScript的最新标准版本，包含了许多令人兴奋的新特性。这些特性旨在提升开发体验、性能和代码可读性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"版本时间线"},"版本时间线"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const es2025Timeline = {\n  '2024年6月': 'ES2024 正式发布',\n  '2024年7月': 'ES2025 提案开始讨论',\n  '2024年12月': 'ES2025 特性冻结',\n  '2025年6月': 'ES2025 正式发布',\n  '2025年7月': '浏览器开始支持'\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-已确定的新特性"},"1. 已确定的新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"11-装饰器decorators正式标准化"},"1.1 装饰器（Decorators）正式标准化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 装饰器正式支持\nconst decoratorFeatures = {\n  '类装饰器': `\n    // 类装饰器\n    function sealed(constructor: Function) {\n      Object.seal(constructor);\n      Object.seal(constructor.prototype);\n    }\n    \n    @sealed\n    class Greeter {\n      greeting: string;\n      constructor(message: string) {\n        this.greeting = message;\n      }\n      greet() {\n        return \"Hello, \" + this.greeting;\n      }\n    }\n  `,\n  \n  '方法装饰器': `\n    // 方法装饰器\n    function log(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n      const originalMethod = descriptor.value;\n      \n      descriptor.value = function (...args: any[]) {\n        console.log(\\`Calling \\${propertyKey} with args:\\`, args);\n        const result = originalMethod.apply(this, args);\n        console.log(\\`Result:\\`, result);\n        return result;\n      };\n      \n      return descriptor;\n    }\n    \n    class Calculator {\n      @log\n      add(a: number, b: number): number {\n        return a + b;\n      }\n    }\n  `,\n  \n  '属性装饰器': `\n    // 属性装饰器\n    function readonly(target: any, propertyKey: string) {\n      Object.defineProperty(target, propertyKey, {\n        writable: false\n      });\n    }\n    \n    class Example {\n      @readonly\n      name: string = 'John';\n    }\n  `,\n  \n  '参数装饰器': `\n    // 参数装饰器\n    function validate(min: number, max: number) {\n      return function (target: any, propertyKey: string, parameterIndex: number) {\n        console.log(\\`Validating parameter \\${parameterIndex} of \\${propertyKey}\\`);\n      };\n    }\n    \n    class MathUtils {\n      add(@validate(0, 100) a: number, @validate(0, 100) b: number) {\n        return a + b;\n      }\n    }\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"12-管道操作符pipeline-operator"},"1.2 管道操作符（Pipeline Operator）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 管道操作符\nconst pipelineOperator = {\n  '基础用法': `\n    // 管道操作符基础用法\n    const result = 2\n      |> double\n      |> add(3)\n      |> square;\n    \n    function double(x) { return x * 2; }\n    function add(y) { return x => x + y; }\n    function square(x) { return x * x; }\n    \n    console.log(result); // 49 (2 -> 4 -> 7 -> 49)\n  `,\n  \n  '复杂管道': `\n    // 复杂管道操作\n    const processedData = rawData\n      |> filterValid\n      |> map(transform)\n      |> sort((a, b) => a - b)\n      |> take(10)\n      |> toJSON;\n    \n    function filterValid(data) {\n      return data.filter(item => item !== null && item !== undefined);\n    }\n    \n    function map(fn) {\n      return data => data.map(fn);\n    }\n    \n    function sort(comparator) {\n      return data => data.sort(comparator);\n    }\n    \n    function take(n) {\n      return data => data.slice(0, n);\n    }\n    \n    function toJSON(data) {\n      return JSON.stringify(data, null, 2);\n    }\n  `,\n  \n  '异步管道': `\n    // 异步管道操作\n    const result = await fetch('/api/data')\n      |> response => response.json()\n      |> data => data.filter(item => item.active)\n      |> data => data.map(item => ({ ...item, processed: true }));\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"13-部分应用partial-application"},"1.3 部分应用（Partial Application）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 部分应用语法\nconst partialApplication = {\n  '基础语法': `\n    // 部分应用基础语法\n    const add = (a, b) => a + b;\n    const addFive = add(?, 5);\n    \n    console.log(addFive(3)); // 8\n    console.log(addFive(10)); // 15\n  `,\n  \n  '多个占位符': `\n    // 多个占位符\n    const format = (template, name, age) => \n      template.replace('{name}', name).replace('{age}', age);\n    \n    const formatWithName = format('Hello {name}, you are {age} years old', ?, ?);\n    const formatWithAge = format('Hello {name}, you are {age} years old', ?, 25);\n    \n    console.log(formatWithName('John', 30)); // \"Hello John, you are 30 years old\"\n    console.log(formatWithAge('Alice')); // \"Hello Alice, you are 25 years old\"\n  `,\n  \n  '实际应用': `\n    // 实际应用场景\n    const fetchData = async (url, options) => {\n      const response = await fetch(url, options);\n      return response.json();\n    };\n    \n    const fetchUsers = fetchData('https://api.example.com/users', ?);\n    const fetchWithAuth = fetchData(?, { headers: { 'Authorization': 'Bearer token' } });\n    \n    // 使用\n    const users = await fetchUsers({ method: 'GET' });\n    const user = await fetchWithAuth('https://api.example.com/user/1');\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"14-记录和元组records-and-tuples"},"1.4 记录和元组（Records and Tuples）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 记录和元组\nconst recordsAndTuples = {\n  '记录（Records）': `\n    // 记录 - 不可变对象\n    const user = #{\n      name: 'John',\n      age: 30,\n      address: #{\n        city: 'New York',\n        country: 'USA'\n      }\n    };\n    \n    // 记录是不可变的\n    // user.name = 'Jane'; // 错误！\n    \n    // 创建新记录\n    const updatedUser = #{ ...user, age: 31 };\n    console.log(updatedUser); // #{ name: 'John', age: 31, address: #{ city: 'New York', country: 'USA' } }\n  `,\n  \n  '元组（Tuples）': `\n    // 元组 - 不可变数组\n    const coordinates = #[1, 2, 3];\n    const person = #['John', 30, 'New York'];\n    \n    // 元组是不可变的\n    // coordinates[0] = 10; // 错误！\n    \n    // 创建新元组\n    const newCoordinates = #[...coordinates, 4];\n    console.log(newCoordinates); // #[1, 2, 3, 4]\n  `,\n  \n  '比较和相等性': `\n    // 记录和元组的相等性\n    const record1 = #{ a: 1, b: 2 };\n    const record2 = #{ a: 1, b: 2 };\n    \n    console.log(record1 === record2); // true（结构相等）\n    \n    const tuple1 = #[1, 2, 3];\n    const tuple2 = #[1, 2, 3];\n    \n    console.log(tuple1 === tuple2); // true（结构相等）\n  `,\n  \n  '实际应用': `\n    // 实际应用场景\n    const config = #{\n      api: #{\n        baseUrl: 'https://api.example.com',\n        timeout: 5000\n      },\n      features: #['auth', 'caching', 'logging']\n    };\n    \n    // 在React组件中使用\n    const UserProfile = ({ user }) => {\n      const userData = #{\n        name: user.name,\n        email: user.email,\n        preferences: #{\n          theme: 'dark',\n          language: 'en'\n        }\n      };\n      \n      return <div>{userData.name}</div>;\n    };\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"15-模式匹配pattern-matching"},"1.5 模式匹配（Pattern Matching）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 模式匹配\nconst patternMatching = {\n  '基础语法': `\n    // 模式匹配基础语法\n    const result = match (value) {\n      when (x) if (x > 0) => 'positive';\n      when (x) if (x < 0) => 'negative';\n      when (0) => 'zero';\n      when (_) => 'unknown';\n    };\n  `,\n  \n  '对象模式匹配': `\n    // 对象模式匹配\n    const handleResponse = (response) => {\n      return match (response) {\n        when ({ status: 200, data }) => data;\n        when ({ status: 404 }) => throw new Error('Not found');\n        when ({ status: 500, error }) => throw new Error(error);\n        when (_) => throw new Error('Unknown error');\n      };\n    };\n  `,\n  \n  '数组模式匹配': `\n    // 数组模式匹配\n    const processArray = (arr) => {\n      return match (arr) {\n        when ([first, second, ...rest]) => {\n          console.log(\\`First: \\${first}, Second: \\${second}, Rest: \\${rest.length}\\`);\n        };\n        when ([single]) => {\n          console.log(\\`Single item: \\${single}\\`);\n        };\n        when ([]) => {\n          console.log('Empty array');\n        };\n        when (_) => {\n          console.log('Unknown array');\n        };\n      };\n    };\n  `,\n  \n  '复杂模式': `\n    // 复杂模式匹配\n    const processUser = (user) => {\n      return match (user) {\n        when ({ type: 'admin', permissions }) if (permissions.includes('delete')) => {\n          return 'Full admin access';\n        };\n        when ({ type: 'admin' }) => {\n          return 'Limited admin access';\n        };\n        when ({ type: 'user', verified: true }) => {\n          return 'Verified user';\n        };\n        when ({ type: 'user' }) => {\n          return 'Regular user';\n        };\n        when (_) => {\n          return 'Unknown user type';\n        };\n      };\n    };\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-提案中的特性"},"2. 提案中的特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-可选链操作符增强"},"2.1 可选链操作符增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 可选链操作符增强\nconst optionalChainingEnhancement = {\n  '方法调用增强': `\n    // 方法调用的可选链增强\n    const result = obj?.method?.();\n    const result2 = obj?.method?.(arg1, arg2);\n    \n    // 支持更多操作\n    const value = obj?.prop?.method?.()?.subProp;\n  `,\n  \n  '数组访问增强': `\n    // 数组访问的可选链增强\n    const item = arr?.[0]?.prop;\n    const method = arr?.[0]?.method?.();\n    \n    // 支持动态索引\n    const index = 1;\n    const value = arr?.[index]?.prop;\n  `,\n  \n  '模板字符串增强': `\n    // 模板字符串的可选链\n    const message = \\`Hello \\${user?.name ?? 'Guest'}!\\`;\n    const url = \\`/api/users/\\${user?.id ?? 'default'}/profile\\`;\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-空值合并操作符增强"},"2.2 空值合并操作符增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 空值合并操作符增强\nconst nullishCoalescingEnhancement = {\n  '链式操作': `\n    // 链式空值合并\n    const value = a ?? b ?? c ?? defaultValue;\n    \n    // 与可选链结合\n    const result = obj?.prop?.subProp ?? defaultValue;\n  `,\n  \n  '函数调用': `\n    // 函数调用的空值合并\n    const result = getValue() ?? computeDefault();\n    const config = loadConfig() ?? getDefaultConfig();\n  `,\n  \n  '条件表达式': `\n    // 条件表达式中的使用\n    const message = user.isActive \n      ? user.name ?? 'Unknown User'\n      : 'Inactive User';\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-私有字段和方法增强"},"2.3 私有字段和方法增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 私有字段和方法增强\nconst privateEnhancement = {\n  '私有静态字段': `\n    // 私有静态字段\n    class Counter {\n      static #instanceCount = 0;\n      #value = 0;\n      \n      constructor() {\n        Counter.#instanceCount++;\n      }\n      \n      static getInstanceCount() {\n        return Counter.#instanceCount;\n      }\n      \n      getValue() {\n        return this.#value;\n      }\n      \n      increment() {\n        this.#value++;\n      }\n    }\n  `,\n  \n  '私有方法': `\n    // 私有方法\n    class BankAccount {\n      #balance = 0;\n      \n      constructor(initialBalance) {\n        this.#balance = initialBalance;\n      }\n      \n      deposit(amount) {\n        this.#validateAmount(amount);\n        this.#balance += amount;\n      }\n      \n      withdraw(amount) {\n        this.#validateAmount(amount);\n        if (this.#balance >= amount) {\n          this.#balance -= amount;\n          return true;\n        }\n        return false;\n      }\n      \n      #validateAmount(amount) {\n        if (amount <= 0) {\n          throw new Error('Amount must be positive');\n        }\n      }\n      \n      getBalance() {\n        return this.#balance;\n      }\n    }\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"24-顶层-await"},"2.4 顶层 await"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 顶层 await 增强\nconst topLevelAwaitEnhancement = {\n  '模块级 await': `\n    // 在模块顶层使用 await\n    const response = await fetch('https://api.example.com/data');\n    const data = await response.json();\n    \n    export { data };\n  `,\n  \n  '条件 await': `\n    // 条件性的顶层 await\n    const config = await loadConfig();\n    \n    if (config.featureEnabled) {\n      const featureData = await loadFeatureData();\n      export { featureData };\n    }\n  `,\n  \n  '错误处理': `\n    // 顶层 await 的错误处理\n    try {\n      const data = await fetchData();\n      export { data };\n    } catch (error) {\n      console.error('Failed to load data:', error);\n      export const data = null;\n    }\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"25-promisetry"},"2.5 Promise.try"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 Promise.try 新特性\nconst promiseTryFeature = {\n  '基础语法': `\n    // Promise.try 基础语法\n    const result = await Promise.try(() => {\n      // 同步或异步代码\n      return someFunction();\n    });\n    \n    // 等价于\n    const result = await (async () => {\n      return someFunction();\n    })();\n  `,\n  \n  '错误处理': `\n    // Promise.try 统一错误处理\n    const result = await Promise.try(() => {\n      // 可能抛出同步或异步错误\n      if (Math.random() > 0.5) {\n        throw new Error('同步错误');\n      }\n      return fetch('/api/data').then(res => res.json());\n    }).catch(error => {\n      console.error('统一错误处理:', error);\n      return { error: true, message: error.message };\n    });\n  `,\n  \n  '同步异步统一': `\n    // 统一处理同步和异步函数\n    const processData = async (data) => {\n      return await Promise.try(() => {\n        // 可能是同步函数\n        if (typeof data === 'string') {\n          return JSON.parse(data);\n        }\n        \n        // 可能是异步函数\n        if (data instanceof Promise) {\n          return data;\n        }\n        \n        // 普通对象\n        return data;\n      });\n    };\n  `,\n  \n  '实际应用场景': `\n    // 实际应用场景\n    const apiCall = async (endpoint) => {\n      return await Promise.try(() => {\n        // 参数验证（同步）\n        if (!endpoint) {\n          throw new Error('Endpoint is required');\n        }\n        \n        // API调用（异步）\n        return fetch(endpoint)\n          .then(response => {\n            if (!response.ok) {\n              throw new Error(\\`HTTP \\${response.status}\\`);\n            }\n            return response.json();\n          });\n      });\n    };\n    \n    // 使用\n    try {\n      const data = await apiCall('/api/users');\n      console.log(data);\n    } catch (error) {\n      console.error('API调用失败:', error);\n    }\n  `,\n  \n  '与现有Promise方法对比': `\n    // Promise.try vs 传统方式\n    const traditionalWay = async () => {\n      try {\n        // 同步代码\n        const config = JSON.parse(localStorage.getItem('config'));\n        \n        // 异步代码\n        const data = await fetch('/api/data');\n        return await data.json();\n      } catch (error) {\n        console.error('Error:', error);\n        throw error;\n      }\n    };\n    \n    const promiseTryWay = async () => {\n      return await Promise.try(() => {\n        // 同步代码\n        const config = JSON.parse(localStorage.getItem('config'));\n        \n        // 异步代码\n        return fetch('/api/data').then(res => res.json());\n      }).catch(error => {\n        console.error('Error:', error);\n        throw error;\n      });\n    };\n  `,\n  \n  '链式调用': `\n    // Promise.try 链式调用\n    const processUser = async (userId) => {\n      return await Promise.try(() => {\n        // 验证用户ID\n        if (!userId || typeof userId !== 'string') {\n          throw new Error('Invalid user ID');\n        }\n        \n        // 获取用户数据\n        return fetch(\\`/api/users/\\${userId}\\`);\n      })\n      .then(response => response.json())\n      .then(user => {\n        // 处理用户数据\n        if (!user.active) {\n          throw new Error('User is inactive');\n        }\n        return user;\n      })\n      .catch(error => {\n        console.error('User processing failed:', error);\n        return { error: true, message: error.message };\n      });\n    };\n  `,\n  \n  '性能优化': `\n    // Promise.try 性能优化\n    const optimizedFunction = async () => {\n      return await Promise.try(() => {\n        // 避免不必要的Promise包装\n        const result = expensiveSyncOperation();\n        \n        // 只在需要时创建Promise\n        if (result.needsAsyncProcessing) {\n          return processAsync(result);\n        }\n        \n        return result;\n      });\n    };\n  `,\n  \n  '调试和监控': `\n    // Promise.try 调试和监控\n    const monitoredFunction = async () => {\n      const startTime = performance.now();\n      \n      return await Promise.try(() => {\n        // 业务逻辑\n        return complexOperation();\n      })\n      .then(result => {\n        const duration = performance.now() - startTime;\n        console.log(\\`Operation completed in \\${duration}ms\\`);\n        return result;\n      })\n      .catch(error => {\n        const duration = performance.now() - startTime;\n        console.error(\\`Operation failed after \\${duration}ms:\\`, error);\n        throw error;\n      });\n    };\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-性能优化特性"},"3. 性能优化特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"31-内存管理优化"},"3.1 内存管理优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 内存管理优化\nconst memoryOptimization = {\n  '弱引用增强': `\n    // 弱引用的增强支持\n    const cache = new WeakMap();\n    \n    class ExpensiveObject {\n      constructor(data) {\n        this.data = data;\n      }\n    }\n    \n    function getCachedObject(key, data) {\n      if (!cache.has(key)) {\n        cache.set(key, new ExpensiveObject(data));\n      }\n      return cache.get(key);\n    }\n  `,\n  \n  '垃圾回收优化': `\n    // 垃圾回收的优化\n    // 自动内存管理改进\n    // 减少内存泄漏风险\n  `,\n  \n  '对象池模式': `\n    // 对象池模式支持\n    class ObjectPool {\n      #pool = [];\n      #createFn;\n      \n      constructor(createFn, initialSize = 10) {\n        this.#createFn = createFn;\n        for (let i = 0; i < initialSize; i++) {\n          this.#pool.push(createFn());\n        }\n      }\n      \n      acquire() {\n        return this.#pool.pop() || this.#createFn();\n      }\n      \n      release(obj) {\n        this.#pool.push(obj);\n      }\n    }\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"32-执行性能优化"},"3.2 执行性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 执行性能优化\nconst executionOptimization = {\n  'JIT编译优化': `\n    // JIT编译器的优化\n    // 更快的代码执行\n    // 更好的内联优化\n  `,\n  \n  '异步执行优化': `\n    // 异步执行的优化\n    // 更高效的Promise处理\n    // 更好的事件循环管理\n  `,\n  \n  '模块加载优化': `\n    // 模块加载的优化\n    // 更快的模块解析\n    // 更好的缓存策略\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-开发体验改进"},"4. 开发体验改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"41-错误处理增强"},"4.1 错误处理增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 错误处理增强\nconst errorHandlingEnhancement = {\n  '错误堆栈改进': `\n    // 更详细的错误堆栈信息\n    try {\n      throw new Error('Something went wrong');\n    } catch (error) {\n      console.log(error.stack); // 更详细的堆栈信息\n    }\n  `,\n  \n  '错误聚合': `\n    // 错误聚合功能\n    const errors = [];\n    \n    try {\n      // 多个操作\n    } catch (error) {\n      errors.push(error);\n    }\n    \n    if (errors.length > 0) {\n      throw new AggregateError(errors, 'Multiple errors occurred');\n    }\n  `,\n  \n  '自定义错误类型': `\n    // 更好的自定义错误支持\n    class ValidationError extends Error {\n      constructor(message, field, value) {\n        super(message);\n        this.name = 'ValidationError';\n        this.field = field;\n        this.value = value;\n      }\n    }\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"42-调试支持增强"},"4.2 调试支持增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// ES2025 调试支持增强\nconst debuggingEnhancement = {\n  'Source Maps改进': `\n    // 更精确的Source Maps\n    // 更好的调试体验\n    // 支持更多调试工具\n  `,\n  \n  '性能分析': `\n    // 内置性能分析工具\n    // 更详细的性能指标\n    // 更好的性能监控\n  `,\n  \n  '内存分析': `\n    // 内存使用分析\n    // 内存泄漏检测\n    // 内存优化建议\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-浏览器支持情况"},"5. 浏览器支持情况"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"51-支持状态"},"5.1 支持状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const browserSupport = {\n  'Chrome': {\n    '装饰器': '✅ 支持',\n    '管道操作符': '🔄 实验性支持',\n    '部分应用': '🔄 实验性支持',\n    '记录和元组': '🔄 实验性支持',\n    '模式匹配': '❌ 不支持',\n    'Promise.try': '🔄 实验性支持'\n  },\n  \n  'Firefox': {\n    '装饰器': '🔄 实验性支持',\n    '管道操作符': '🔄 实验性支持',\n    '部分应用': '❌ 不支持',\n    '记录和元组': '🔄 实验性支持',\n    '模式匹配': '❌ 不支持',\n    'Promise.try': '🔄 实验性支持'\n  },\n  \n  'Safari': {\n    '装饰器': '✅ 支持',\n    '管道操作符': '❌ 不支持',\n    '部分应用': '❌ 不支持',\n    '记录和元组': '❌ 不支持',\n    '模式匹配': '❌ 不支持',\n    'Promise.try': '❌ 不支持'\n  },\n  \n  'Edge': {\n    '装饰器': '✅ 支持',\n    '管道操作符': '🔄 实验性支持',\n    '部分应用': '🔄 实验性支持',\n    '记录和元组': '🔄 实验性支持',\n    '模式匹配': '❌ 不支持',\n    'Promise.try': '🔄 实验性支持'\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"52-兼容性策略"},"5.2 兼容性策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const compatibilityStrategy = {\n  'Babel转译': `\n    // 使用Babel转译新特性\n    // babel.config.js\n    module.exports = {\n      presets: [\n        ['@babel/preset-env', {\n          targets: {\n            browsers: ['> 1%', 'last 2 versions']\n          }\n        }]\n      ],\n      plugins: [\n        '@babel/plugin-proposal-decorators',\n        '@babel/plugin-proposal-pipeline-operator'\n      ]\n    };\n  `,\n  \n  'Polyfill': `\n    // 使用Polyfill填充缺失功能\n    import 'core-js/stable';\n    import 'regenerator-runtime/runtime';\n  `,\n  \n  '特性检测': `\n    // 特性检测和降级\n    if (typeof PipelineOperator !== 'undefined') {\n      // 使用管道操作符\n    } else {\n      // 降级处理\n    }\n  `\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-最佳实践"},"6. 最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"61-渐进式采用"},"6.1 渐进式采用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const progressiveAdoption = {\n  '阶段一': {\n    '特性': ['装饰器', '顶层await', 'Promise.try'],\n    '原因': '浏览器支持较好，风险较低',\n    '建议': '立即采用'\n  },\n  \n  '阶段二': {\n    '特性': ['管道操作符', '部分应用'],\n    '原因': '实验性支持，需要转译',\n    '建议': '在合适场景下采用'\n  },\n  \n  '阶段三': {\n    '特性': ['记录和元组', '模式匹配'],\n    '原因': '提案阶段，支持有限',\n    '建议': '等待更广泛支持'\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"62-性能考虑"},"6.2 性能考虑"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const performanceConsiderations = {\n  '装饰器': {\n    '性能影响': '轻微',\n    '建议': '可以广泛使用',\n    '注意事项': '避免过度使用'\n  },\n  \n  '管道操作符': {\n    '性能影响': '无',\n    '建议': '推荐使用',\n    '注意事项': '提高代码可读性'\n  },\n  \n  '记录和元组': {\n    '性能影响': '可能影响性能',\n    '建议': '在需要不可变性时使用',\n    '注意事项': '避免频繁创建'\n  },\n  \n  'Promise.try': {\n    '性能影响': '轻微',\n    '建议': '推荐使用',\n    '注意事项': '统一错误处理，避免不必要的Promise包装'\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"es2025-核心特性"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"ES2025 核心特性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"装饰器"),": 正式标准化，支持类、方法、属性、参数装饰器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"管道操作符"),": 函数式编程风格，提高代码可读性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"部分应用"),": 函数式编程工具，支持占位符语法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"记录和元组"),": 不可变数据结构，提高数据安全性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"模式匹配"),": 强大的条件分支处理能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Promise.try"),": 统一同步和异步错误处理，简化Promise使用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"开发建议"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"开发建议")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"立即采用"),": 装饰器、顶层await、Promise.try等成熟特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渐进采用"),": 管道操作符、部分应用等实验性特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"等待支持"),": 记录和元组、模式匹配等提案特性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"性能优化"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"性能优化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存管理"),": 弱引用增强、垃圾回收优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"执行性能"),": JIT编译优化、异步执行优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开发体验"),": 错误处理增强、调试支持改进")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"promisetry-优势"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"Promise.try 优势")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"统一错误处理"),": 同步和异步错误统一捕获"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简化代码"),": 避免不必要的Promise包装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更好的调试"),": 统一的错误堆栈信息"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能优化"),": 减少Promise创建开销")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"ES2025为JavaScript带来了许多激动人心的新特性，将显著提升开发体验和代码质量。建议根据项目需求和浏览器支持情况，选择合适的特性进行采用。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/JavaScript/es2025",parameters:{docs:{description:{component:"ES2025最新特性详解，包括已确定的新功能和提案中的特性。"}}},includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/JavaScript/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/JavaScript/介绍",mdxType:"Meta"}))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/JavaScript/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/LowCode/Intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/低代码-无代码/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"低代码-无代码"},"低代码-无代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"低代码（Low-Code）和无代码（No-Code）平台是近年来在软件开发领域迅速发展的技术，旨在通过减少手工编码的需求，加速应用程序的开发和部署。这两种平台各有特点和适用场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"低代码平台low-code-platform"},"低代码平台（Low-Code Platform）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"低代码平台提供了一个开发环境，允许开发人员通过图形化界面和少量的手工编码来构建应用程序。这些平台通常面向专业开发人员，但也可以被技术背景较少的用户使用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"特点"},"特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"图形化界面"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供拖放式的开发界面，简化了应用程序的设计和开发过程。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"可扩展性"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持自定义代码，允许开发人员在需要时编写特定的逻辑和功能。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"快速开发"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过预构建的组件和模块，加速应用程序的开发和部署。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"集成能力"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供与各种外部系统和服务的集成能力，如数据库、API 等。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"常见低代码平台"},"常见低代码平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"OutSystems"),"：一个企业级低代码开发平台，支持复杂应用的快速开发和部署。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Mendix"),"：提供全面的应用开发和管理功能，适用于各种业务应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Microsoft Power Apps"),"：微软的低代码平台，集成了 Azure 和 Office 365 等服务。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"无代码平台no-code-platform"},"无代码平台（No-Code Platform）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"无代码平台旨在让非技术用户也能构建应用程序，完全不需要编写代码。这些平台通常面向业务用户和初学者，帮助他们快速实现想法和需求。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"特点-1"},"特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"完全图形化"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供完全图形化的开发界面，用户通过拖放组件和配置参数即可构建应用。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"无需编程知识"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户无需编写代码，适合没有技术背景的业务用户。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"快速原型和迭代"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合快速创建原型和迭代开发，满足快速变化的业务需求。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"预构建模板和组件"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供大量预构建的模板和组件，用户可以直接使用或稍作修改。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"常见无代码平台"},"常见无代码平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Bubble"),"：一个功能强大的无代码平台，支持复杂的应用开发和部署。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Airtable"),"：结合了数据库和应用构建功能，适合数据驱动的应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Webflow"),"：专注于网页设计和开发的无代码平台，适合创建响应式网站。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"低代码-vs-无代码"},"低代码 vs 无代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"低代码平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"无代码平台"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"目标用户"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"专业开发人员和技术背景较少的用户"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"非技术用户和业务用户")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"编码需求"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"少量编码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"完全无需编码")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"灵活性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高，可扩展和自定义"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"较低，依赖平台提供的功能")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"开发速度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"快，预构建组件和模块"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更快，完全图形化开发")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"适用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂应用和企业级应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单应用和快速原型")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"集成能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"强，与外部系统和服务的集成能力强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"一般，主要依赖平台提供的集成选项")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"适用场景"},"适用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"低代码平台"),"：适用于需要快速开发和部署复杂应用的场景，特别是企业级应用和需要与外部系统集成的应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"无代码平台"),"：适用于简单应用和快速原型开发，特别是业务用户希望快速实现想法和需求的场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"低代码和无代码平台通过减少手工编码的需求，加速了应用程序的开发和部署。低代码平台适合需要一定灵活性和可扩展性的场景，而无代码平台则适合非技术用户和快速原型开发。选择合适的平台取决于具体的项目需求和用户背景。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/低代码-无代码/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/LowCode/openSource.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/低代码-无代码/开源产品",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"开源产品"},"开源产品"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、阿里低代码引擎"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://lowcode-engine.cn/index",target:"_blank",rel:"nofollow noopener noreferrer"},"https://lowcode-engine.cn/index")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、华为低代码引擎"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://opentiny.design/tiny-engine#/home",target:"_blank",rel:"nofollow noopener noreferrer"},"https://opentiny.design/tiny-engine#/home")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、腾讯页面可视化搭建平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://tencent.github.io/tmagic-editor/docs/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://tencent.github.io/tmagic-editor/docs/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、百度配置化平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://baidu.github.io/amis/zh-CN/docs/index",target:"_blank",rel:"nofollow noopener noreferrer"},"https://baidu.github.io/amis/zh-CN/docs/index")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"5、网易云音乐低代码平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://netease.github.io/tango-site/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://netease.github.io/tango-site/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"6、阿里表单配置化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/alibaba/x-render",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/alibaba/x-render")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://v1.formilyjs.org/#/bdCRC5/dzUZU8il",target:"_blank",rel:"nofollow noopener noreferrer"},"https://v1.formilyjs.org/#/bdCRC5/dzUZU8il")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/低代码-无代码/开源产品",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/MicroClient/Intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/微前端/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"微前端概念"},"微前端概念"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"微前端（Micro Frontends）是一种架构风格，将前端应用程序划分为多个独立的、可部署的小型应用程序或模块。这种方法类似于微服务架构在后端的应用，旨在解决大型单页应用程序（SPA）开发和维护中的复杂性问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"微前端的核心概念"},"微前端的核心概念"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"模块化"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"将前端应用分解为多个小型、独立的模块或应用程序，每个模块负责特定的功能或业务领域。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"各个模块可以由不同的团队独立开发、测试和部署。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术栈独立"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"各个微前端模块可以使用不同的技术栈（如 React、Vue、Angular 等），这使得团队可以根据需求选择最合适的工具和框架。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"独立部署"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每个微前端模块可以独立部署，不需要重新部署整个应用。这提高了部署的灵活性和效率。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"团队自治"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"不同的团队可以负责不同的微前端模块，团队之间的耦合度降低，提高了团队的自主性和开发效率。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"渐进式迁移"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微前端架构允许在不重写整个应用的情况下逐步迁移到新的技术栈或架构。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"微前端的优点"},"微前端的优点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"灵活性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"允许使用多种技术栈和工具，开发团队可以选择最适合的技术。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"可维护性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过模块化设计，代码库更易于管理和维护。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"独立部署"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"各模块可以独立部署，减少了部署风险和时间。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"团队协作"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提高了团队的自主性，减少了团队之间的依赖。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"微前端的挑战"},"微前端的挑战"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"复杂性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要处理模块之间的通信和共享状态，这可能增加系统的复杂性。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能问题"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在加载多个微前端模块时，可能会影响应用的性能，需要进行优化。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"一致性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"确保各模块之间的 UI 和用户体验的一致性可能具有挑战性。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"实现微前端的技术和工具"},"实现微前端的技术和工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Single-SPA"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一个用于构建微前端应用的 JavaScript 框架，支持多个框架共存。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Module Federation"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Webpack 5 引入的模块联邦（Module Federation）功能，允许在不同应用之间共享模块。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Qiankun"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"基于 Single-SPA 的微前端框架，由蚂蚁金服开源，提供了一套完整的微前端解决方案。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"微前端是一种将前端应用程序模块化的架构风格，旨在提高开发灵活性、可维护性和团队协作效率。虽然微前端带来了许多优点，但也需要在架构设计和实现上克服一些挑战。选择合适的工具和框架可以帮助开发团队更好地实现微前端架构。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"常见方案"},"常见方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"在实现微前端架构时，有多种方案和工具可以选择。以下是一些常见的微前端实现方案和工具："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-single-spa"},"1. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"Single-SPA")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Single-SPA 是一个流行的微前端框架，允许在同一个页面中运行多个框架（如 React、Vue、Angular 等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多框架共存。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供应用生命周期管理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"允许懒加载模块，提升性能。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要在同一个应用中混合使用多个前端框架。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"官网"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://single-spa.js.org/",target:"_blank",rel:"nofollow noopener noreferrer"},"Single-SPA")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-qiankun"},"2. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"Qiankun")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Qiankun 是基于 Single-SPA 的微前端框架，由蚂蚁金服开源，提供了一套完整的微前端解决方案。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"简化了微前端的实现，提供了更高层次的 API。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持应用沙箱隔离，确保子应用的独立性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供应用间通信机制。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要快速构建微前端应用，且希望有较好的社区支持。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"官网"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://qiankun.umijs.org/",target:"_blank",rel:"nofollow noopener noreferrer"},"Qiankun")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-module-federation"},"3. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"Module Federation")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Module Federation 是 Webpack 5 引入的新特性，允许多个应用之间共享代码和模块。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持动态加载模块。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"允许应用之间共享依赖，减少重复加载。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供模块懒加载功能。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在使用 Webpack 构建工具时，希望实现模块共享和懒加载。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"官网"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://webpack.js.org/concepts/module-federation/",target:"_blank",rel:"nofollow noopener noreferrer"},"Webpack Module Federation")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-iframe"},"4. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"iframe")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"使用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"iframe")," 是一种传统的实现微前端的方法，通过将子应用嵌入到主应用中实现模块化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供天然的隔离性，避免全局样式和脚本冲突。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"简单易用，不需要特殊的工具或框架。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"对性能要求不高，且需要强隔离性的场景。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"缺点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可能会带来性能问题，特别是在需要频繁通信的场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"复杂的通信机制。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-custom-elementsweb-components"},"5. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"Custom Elements（Web Components）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Custom Elements 是 Web Components 的一部分，允许开发者定义自己的 HTML 元素，并使用它们构建应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供浏览器原生支持的组件化开发方式。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可以与任意框架结合使用。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"希望使用标准化的组件化开发方式，且需要与多种框架集成。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-基于路由的微前端"},"6. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"基于路由的微前端")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"通过路由管理不同子应用的加载和显示，每个子应用可以是独立的单页应用（SPA）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特点"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"简单易实现，适合已有 SPA 的改造。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过路由懒加载子应用，提高性能。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要逐步迁移到微前端架构，且已有多个独立的 SPA 应用。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结-1"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"选择合适的微前端实现方案取决于具体的项目需求、技术栈和团队能力。Single-SPA 和 Qiankun 是当前较为流行的微前端框架，适合需要多框架共存的场景。而 Module Federation 提供了现代化的模块共享机制，适合使用 Webpack 的项目。对于简单的场景，iframe 和基于路由的微前端也是可行的选择。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"开源方案代表："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、腾讯无界"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/Tencent/wujie",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/Tencent/wujie")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、阿里乾坤"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://qiankun.umijs.org/zh/guide",target:"_blank",rel:"nofollow noopener noreferrer"},"https://qiankun.umijs.org/zh/guide")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、京东microApp"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://jd-opensource.github.io/micro-app/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://jd-opensource.github.io/micro-app/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"三者对比："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://blog.csdn.net/xgangzai/article/details/135944214",target:"_blank",rel:"nofollow noopener noreferrer"},"https://blog.csdn.net/xgangzai/article/details/135944214")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/微前端/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Monitor/CAT.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/监控/CAT",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/dianping/cat",target:"_blank",rel:"nofollow noopener noreferrer"},"CAT")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/监控/CAT",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Monitor/Logan.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/监控/Logan",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/Meituan-Dianping/Logan",target:"_blank",rel:"nofollow noopener noreferrer"},"Logan")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"1-client"},"1 client"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// test.js client\nvar Logan = require('logan-web');\nLogan.initConfig({\n    /* Demo Key */\n    publicKey:\n        '-----BEGIN PUBLIC KEY-----\\n' +\n        'MIGeMA0GCSqGSIb3DQEBAQUAA4GMADCBiAKBgG2m5VVtZ4mHml3FB9foDRpDW7Pw\\n' +\n        'Foa+1eYN777rNmIdnmezQqHWIRVcnTRVjrgGt2ndP2cYT7MgmWpvr8IjgN0PZ6ng\\n' +\n        'MmKYGpapMqkxsnS/6Q8UZO4PQNlnsK2hSPoIDeJcHxDvo6Nelg+mRHEpD6K+1FIq\\n' +\n        'zvdwVPCcgK7UbZElAgMBAAE=\\n' +\n        '-----END PUBLIC KEY-----'\n});\nfunction timeFormat2Day(date) {\n    var Y = date.getFullYear();\n    var M = date.getMonth() + 1;\n    var D = date.getDate();\n    return Y + '-' + (M < 10 ? '0' + M : M) + '-' + (D < 10 ? '0' + D : D);\n}\ndocument.getElementById('log').onclick = log;\ndocument.getElementById('logWithEncryption').onclick = logWithEncryption;\ndocument.getElementById('report').onclick = report;\n\nfunction log() {\n   console.log('1','1')\n    Logan.log('Hello World!', 1);\n}\n\nfunction logWithEncryption() {\n    Logan.logWithEncryption('Hello World!', 2);\n}\n\nasync function report() {\n    var now = new Date();\n    var sevenDaysAgo = new Date(+now - 6 * 24 * 3600 * 1000);\n    var res = await Logan.report({\n        reportUrl: 'http://localhost:9004',\n        deviceId: 'test-logan-web',\n        fromDayString: timeFormat2Day(sevenDaysAgo),\n        toDayString: timeFormat2Day(now),\n        webSource: 'browser',\n        environment: navigator.userAgent,\n        customInfo: JSON.stringify({ userId: 123456, biz: 'Live Better' })\n    });\n    console.log('reportResult',res);\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"2-server"},"2 server"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// server\n\nimport express from \"express\";\nimport logger from \"morgan\";\nimport { AES, enc, mode, pad } from \"crypto-js\";\nconst cors = require('cors');\nconst { JSEncrypt } = require(\"js-encrypt\");\n/* tslint-disable */\ninterface IReportLog {\n    client: string;\n    webSource?: string;\n    deviceId: string;\n    environment?: string;\n    customInfo: string;\n    logPageNo: number;\n    fileDate: string;\n    logArray: string;\n}\n\ninterface ILogItem {\n    l: string;\n    iv?: string;\n    k?: string;\n    v?: number;\n}\n\ninterface ILogContent {\n    /**log type */\n    t: number;\n\n    /**log content */\n    c: string;\n\n    /**js timestamp */\n    d: string;\n}\n\nconst port = '9004';\n\nconst privateKey = '-----BEGIN PRIVATE KEY-----\\n' +\n    'MIICXAIBAAKBgG2m5VVtZ4mHml3FB9foDRpDW7PwFoa+1eYN777rNmIdnmezQqHW\\n' +\n    'IRVcnTRVjrgGt2ndP2cYT7MgmWpvr8IjgN0PZ6ngMmKYGpapMqkxsnS/6Q8UZO4P\\n' +\n    'QNlnsK2hSPoIDeJcHxDvo6Nelg+mRHEpD6K+1FIqzvdwVPCcgK7UbZElAgMBAAEC\\n' +\n    'gYAXQM9dgGf2iGU6AXCaXsF4klQ+ImoEhS/DK61t5V+RCwrunttAirJVX2CPGp27\\n' +\n    'dOEseBjb+hHcwMsIAUtadkD7VqDoLg0C63pP6Yr91zoLSq7ru7FL4j8ZDGgHV2tE\\n' +\n    '6TbtIRGbxuuF+EmztKqrMCvN4qcxqDvTtU6Xq9Us7xC+uQJBANoFtsuTqDaFFOJ0\\n' +\n    'p0S3+w4lzUcfp+XboVb4+q7wcFumfDCLIuvOTEiCFj5Tj0o2eHtEo3ARHWIcNZqB\\n' +\n    'OgYPPdMCQQCAwJzubpjr7oXxINLERcQ1PXvjD5HD9Q4A20p6pFkcEYTlDYW/nm60\\n' +\n    'PMr7JWG54TH0e6w8IfJZVR2xonVasoInAkEAjdIfuUdgqa5iCnkFgb8IEYjngneG\\n' +\n    'GRCIX/Hv57JB9GxU5qLrYWa92oC8hWiHkifisZTRmAmaCoL9H3cmTmDFvwJAJjwM\\n' +\n    '3mmNlBLDR/YdYRfuyni1v5oyCWVOgUad+YmwxLsXIgY//8WGzpN3G9ngCZksgpPv\\n' +\n    'c/QIyiqSpNu/ye1U5QJBAIgSfWXvx+varXagGojcCH8mVtT/E4/w3R+QTLAp6s0L\\n' +\n    'QTQUDPnDGrxvT4sDoU6ib+nn0FAr/kTyJptdlvaXfeo=' +\n    '-----END PRIVATE KEY-----';\n\nconst app = express();\napp.use(cors());\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use('/', (req:any, res:any, next:any) => {\n    const reportLog: IReportLog = req.body;\n   const log = decodeURIComponent(reportLog.logArray)\n   console.log('log',log)\n    const logArray: Array<ILogItem> = reportLog.logArray.split(',').map(it => JSON.parse(decodeURIComponent(it))) as Array<ILogItem>;\n\n    let logContent: Array<ILogContent> = logArray.map(it => {\n        let logContent: ILogContent, content: string;\n\n        if (it.iv && it.k && it.v) {\n\n            /**\n             * 如果加密过\n             * 则先使用RSA解密出AES加密的key\n             * 再使用得到的key使用AES解密得到内容\n             */\n\n            /**\n             * if log with encryption\n             * first, use RSA decrypt to get the AES encryption key\n             * then, use the key do AES decrypt can get our log content\n             */\n\n            const en = new JSEncrypt();\n            en.setPrivateKey(privateKey);\n            const key = en.decrypt(it.k).toString(enc.Utf8);\n\n            content = AES.decrypt(it.l, enc.Utf8.parse(key), { iv: enc.Utf8.parse(it.iv), mode: mode.CTR, padding: pad.NoPadding }).toString(enc.Utf8);\n        } else {\n            content = enc.Base64.parse(it.l).toString(enc.Utf8);\n        }\n\n        logContent = JSON.parse(content);\n        logContent.c = decodeURIComponent(logContent.c);\n        return logContent;\n    });\n\n    res.status(200).json(logContent);\n});\n\napp.listen(port, () => { console.log(`server run at ${port}`); });\n\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/监控/Logan",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Monitor/Monitor.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/监控/前端监控实践",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/6966587325606264869",target:"_blank",rel:"nofollow noopener noreferrer"},"手动实现前端监控")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1983779",target:"_blank",rel:"nofollow noopener noreferrer"},"前端监控体系搭建篇")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/监控/前端监控实践",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Monitor/Sentry.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/监控/Sentry",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/6844904143090352135",target:"_blank",rel:"nofollow noopener noreferrer"},"Sentry")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/监控/Sentry",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Monitor/open-monitor.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/监控/开源监控汇总",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、 滴滴夜莺 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/ccfos/nightingale",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/ccfos/nightingale")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、美团Cat ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/dianping/cat",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/dianping/cat")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、滴滴DoKit ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/didi/DoKit",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/didi/DoKit")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、网易 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000044790110",target:"_blank",rel:"nofollow noopener noreferrer"},"https://segmentfault.com/a/1190000044790110")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"5、字节 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/603752974",target:"_blank",rel:"nofollow noopener noreferrer"},"https://zhuanlan.zhihu.com/p/603752974")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/监控/开源监控汇总",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Monitor/白泽.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/监控/白泽",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"白泽 前端一体化监控平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/1623311678/baize",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/1623311678/baize")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"白泽"},"白泽"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"一体化前端监控平台，包括前端展示、服务端，sdk，仓库包括前端client，监控sdk代码，后端server代码，各取所需即可。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"把前端代码拿过来，只为了做示例，后端代码，sdk代码参考对应目录"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"如何使用"},"如何使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-安装-sdk"},"1. 安装 sdk"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"npm install @hun-dun/monitor-sdk\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-引入初始化"},"2. 引入&初始化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'// vue 或者react项目，入口文件内\n// 如main.ts\n\nimport MonitoringSDK from "@hun-dun/monitor-sdk";\n\nconst Monitor = new MonitoringSDK({ domain: "http://localhost:3001" });\n\nwindow.Monitor = Monitor;\n// domain 是服务端部署的地址，\n\n// 如何手动上报？\n/*\n* type :类型：javascript｜resource\n* level: 级别：error｜warn｜info\n* message: 信息,字符串\n*/\nconst monitor: any = window.Monitor;\nmonitor.report({\n  message: "自定义上报异常",\n  type: "javascript",\n  level: "warn",\n});\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-启动前端"},"3. 启动前端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"进入 client 目录 npm install 安装依赖，npm start 启动前端,需要 node14 环境"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-启动docker与准备工作"},"4. 启动docker与准备工作"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"安装docker，docker 客户端下载 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.docker.com/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.docker.com/")," 之后安装mysql，redis 的镜像"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如果想项目跑起来，需要先启动 docker 内的 mysql 和 redis ，默认端口即可 之后在 mysql 内创建 monitor 表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、 docker ps"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、docker exec -it my-mysql mysql -uroot -proot"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、创建表 monitor"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"CREATE DATABASE IF NOT EXISTS monitor;"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-启动服务端"},"5. 启动服务端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"进入 server 目录 npm install 安装依赖，npm start 启动服务端，需要 node16 以上环境"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"目录介绍"},"目录介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"client")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"前端示例代码，需要 node14 环境,包括登陆验证，用户注册，列表查询等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"包括异常上报，PV，UV，手动上报"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{start:2},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"server")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"服务端代码，包括登陆验证，用户注册，列表查询等，redis 缓存，mysql 数据库，JWT Token 等 需要 node16 以上的环境"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{start:3},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"sdk")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"前端监控 sdk，自动上报pv uv，异常信息，支持手动上报"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/监控/白泽",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Node/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/Node/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"nodejs-2025v22-lts最新特性与趋势"},"Node.js 2025（v22 LTS）最新特性与趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-222024年4月-lts最新特性"},"Node.js 22（2024年4月 LTS）最新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"V8 引擎升级至 12.x"),"：支持更多 ES2024/ES2025 语法和性能提升。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ESM 默认体验更完善"),"：无需 .js/.mjs 区分，import/export 更加无缝。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"WebSocket 原生支持"),"：无需第三方库即可使用 WebSocket。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"权限模型（Permission Model）正式版"),"：可限制文件、网络、子进程等访问权限。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Test Runner 增强"),"：支持并发、快照测试、内置覆盖率统计。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"诊断报告与监控增强"),"：更易集成云监控、自动生成诊断报告。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能提升"),"：启动更快、内存占用更低、HTTP/2/3 优化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全增强"),"：TLS/加密算法升级，依赖漏洞修复更及时。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全局 API 扩展"),"：如 fetch、Web Streams、Blob、FormData 等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"与 Node 18/20 主要区别"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"权限模型从实验转为正式，默认关闭但可生产用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WebSocket、Blob、FormData 等 Web API 原生支持。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ESM 体验更好，兼容性提升。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"V8/性能/安全持续升级。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"代码示例nodejs-22-原生-websocket"},"代码示例：Node.js 22 原生 WebSocket"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { WebSocketServer } from 'ws';\nconst wss = new WebSocketServer({ port: 8080 });\nwss.on('connection', ws => {\n  ws.send('Hello Node22!');\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-nodejs-2025v22-lts核心新特性"},"1. Node.js 2025（v22 LTS）核心新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"V8 12.x 引擎升级"),"：支持 ES2024/2025 语法，性能和内存管理大幅提升。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ESM（ECMAScript Modules）默认体验极佳"),"：无需 .mjs 区分，import/export 完全无缝，支持顶层 await。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Web API 原生支持"),"：fetch、WebSocket、Blob、FormData 等 Web API 无需 polyfill。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"权限模型（Permission Model）正式版"),"：可精细限制文件、网络、子进程等访问权限，提升安全性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Test Runner 增强"),"：内置并发、快照测试、覆盖率统计，测试体验媲美 Jest。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"诊断与监控增强"),"：自动生成诊断报告，易于集成云监控。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能提升"),"：启动更快、内存占用更低、HTTP/2/3 优化、zstd 压缩支持。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全增强"),"：TLS/加密算法升级，系统证书集成，依赖漏洞修复更及时。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新 API"),"：如 process.execve、tls.getCACertificates、v8.getCppHeapStatistics 等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"模块钩子（module.registerHooks）"),"：支持自定义模块加载行为。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-2025-年-nodejs-生态趋势与最佳实践"},"2. 2025 年 Node.js 生态趋势与最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ESM First"),"：全面拥抱 import/export，顶层 await 简化异步启动。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Serverless 架构普及"),"：云函数、FaaS 场景下 Node.js 占主流，开发/部署更敏捷。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"微服务架构"),"：Node.js 轻量、易拆分，配合 Docker/K8s 实现弹性伸缩。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"AI/ML 集成"),"：Node.js 结合 TensorFlow.js、ONNX、Python 微服务，支持实时推理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"GraphQL 优先"),"：GraphQL + Node.js 成为复杂数据接口首选。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云原生与容器化"),"：Node 应用天然适配容器，支持自动扩缩、灰度发布。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化测试与 CI/CD"),"：test runner + 覆盖率 + GitHub Actions 实现全流程自动化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全与权限隔离"),"：生产环境强制开启权限模型，最小化攻击面。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-与-node-2018-的主要区别"},"3. 与 Node 20/18 的主要区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"权限模型从实验转为正式，生产可用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Web API（WebSocket、Blob、FormData 等）原生支持，无需第三方库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ESM 体验极大提升，兼容性更好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"V8/性能/安全持续升级，内存和启动速度更优。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 zstd 压缩、TLSA DNS 解析、sqlite ArrayBufferView 支持等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-代码示例nodejs-2025-原生-web-api"},"4. 代码示例：Node.js 2025 原生 Web API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 顶层 await + fetch + WebSocket\nimport { WebSocket } from 'ws';\nconst res = await fetch('https://api.example.com/data');\nconst data = await res.json();\nconst ws = new WebSocket('wss://echo.websocket.org');\nws.on('open', () => ws.send('Hello Node22!'));\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-现代-nodejs-开发最佳实践"},"5. 现代 Node.js 开发最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只用 import/export，弃用 require。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生产环境开启权限模型（--experimental-permission）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"充分利用 test runner 做单测/集成测试。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合 Docker/K8s 做弹性部署。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控内存、CPU、事件循环延迟，自动诊断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合 AI/ML 微服务做智能化后端。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采用 serverless/FaaS 降低运维成本。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一新特性源码分析、升级迁移方案、云原生/AI/Serverless 实战案例，欢迎继续提问！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-nodejs-2024-新特性"},"1. Node.js 2024 新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ESM（ECMAScript Modules）默认支持"),"：无需 --experimental-modules，原生 import/export。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"V8 引擎升级"),"：支持更多 ES2023/2024 语法（如顶层 await、私有字段、装饰器等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全局 fetch API"),"：Node 18+ 原生支持 fetch，无需引入 node-fetch。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Test Runner 内置"),"：Node 18+ 内置 test runner，无需第三方测试框架。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Web Streams API"),"：原生支持 ReadableStream、WritableStream。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"诊断报告（diagnostic report）增强"),"：可自动生成崩溃/异常报告。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Permission Model（实验特性）"),"：可限制文件、网络等访问权限。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能与安全增强"),"：TLS/HTTP2/QUIC、加密算法升级。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-nodejs-开发常见注意事项"},"2. Node.js 开发常见注意事项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步编程"),"：优先使用 async/await，避免回调地狱。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"错误处理"),"：所有异步操作需 try/catch 或 .catch，防止未捕获异常导致进程崩溃。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"进程管理"),"：生产环境建议用 pm2、forever、systemd 等守护进程。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"环境变量管理"),"：用 dotenv、cross-env 管理多环境配置。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志与监控"),"：集成 winston、pino、log4js 等日志库，结合 ELK/Prometheus。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全加固"),"：避免 eval、及时依赖升级、使用 helmet、rate-limit、CSRF/XSS 防护。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"依赖管理"),"：锁定依赖版本，定期 npm audit。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高并发优化"),"：利用 cluster、worker_threads、多进程分流。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存泄漏排查"),"：定期监控内存，避免全局变量、闭包引用。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-nodejs-主流框架介绍"},"3. Node.js 主流框架介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Express"),"：最流行的 Web 框架，轻量、生态丰富。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Koa"),"：中间件机制更现代，async/await 优先。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"NestJS"),"：基于 TypeScript，OOP/DI/模块化，适合大型项目。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Fastify"),"：极致性能，JSON 处理快，插件体系完善。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Egg.js"),"：阿里开源，企业级 Node 框架，适合中后台。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Hapi"),"：配置灵活，适合 API 服务。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-如何监控内存泄漏"},"4. 如何监控内存泄漏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"process.memoryUsage()"),"：定期采集内存快照。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Chrome DevTools"),"：node --inspect，远程调试内存快照、堆分析。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"heapdump"),"：生成 .heapsnapshot 文件，配合 DevTools 分析。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"clinic.js"),"：一键分析性能瓶颈和内存泄漏。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"常见泄漏点"),"：全局变量、未清理的定时器/事件、闭包、缓存未释放。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 监控内存\nsetInterval(() => {\n  const mem = process.memoryUsage();\n  console.log('Heap Used:', mem.heapUsed / 1024 / 1024, 'MB');\n}, 10000);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-nodejs-稳定性与高可用实践"},"5. Node.js 稳定性与高可用实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异常捕获"),"：process.on('uncaughtException')、process.on('unhandledRejection')，但应及时退出重启。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"守护进程"),"：pm2、forever、systemd，自动重启、日志管理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"健康检查"),"：/healthz 路由，配合负载均衡。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"限流与降级"),"：如 express-rate-limit、熔断器（opossum）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化监控"),"：Prometheus、Grafana、ELK、Sentry。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"灰度发布/回滚"),"：配合 CI/CD 工具。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最佳实践"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务异常用 try/catch，系统异常用守护进程兜底。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键依赖用超时/重试机制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源释放（如数据库连接）要及时。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一框架源码分析、内存泄漏实战案例、稳定性架构方案，欢迎继续提问！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"企业级-nodejs-内存泄漏监控方案"},"企业级 Node.js 内存泄漏监控方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多工具组合监控"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"线上用 prom-client + Grafana 实时采集内存、GC、事件循环延迟等指标。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定期用 heapdump 生成堆快照，配合 Chrome DevTools 分析。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"clinic.js/doctor 做定期全链路分析，发现内存泄漏趋势。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Sentry/New Relic/Datadog 云端 APM，自动报警和诊断。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动报警与诊断"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Prometheus 设置内存阈值报警，自动触发 heapdump。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Sentry/Datadog 检测到内存异常自动推送告警。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最佳实践"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生产环境禁用全局变量、及时清理定时器/事件监听。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码层面用 memwatch-next 监控泄漏事件，开发阶段发现问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合 pm2 cluster 模式，单实例异常自动重启，保障服务可用性。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"监控与报警代码片段"},"监控与报警代码片段"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const client = require('prom-client');\nconst heapGauge = new client.Gauge({ name: 'node_heap_used', help: 'Heap used in bytes' });\nsetInterval(() => {\n  heapGauge.set(process.memoryUsage().heapUsed);\n}, 10000);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Prometheus 侧设置报警规则："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},'ALERT NodeHeapHigh\n  IF node_heap_used > 1.5e+9\n  FOR 5m\n  LABELS { severity = "critical" }\n  ANNOTATIONS {\n    summary = "Node.js heap used超阈值，需排查内存泄漏"\n  }\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"pm2-高级用法"},"pm2 高级用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"进程守护与自动重启"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 start app.js --watch"),"，代码变动自动重启。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 restart app --update-env"),"，热更新环境变量。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志管理"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 logs")," 实时查看日志，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 flush")," 清空日志。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志可自动分割、归档，支持外部日志系统（如 ELK）。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"健康检查与自愈"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 health")," 查看进程健康，支持自定义健康检查脚本。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"进程异常自动重启，支持 max_restarts、restart_delay 配置。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"环境变量与多环境部署"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 start app.js --env production"),"，支持多套 env 配置。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ecosystem.config.js")," 支持多应用/多环境批量管理。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"集群与负载均衡"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 start app.js -i max"),"，自动根据 CPU 核心数启动多进程。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内置负载均衡，支持零停机重启（gracefulReload）。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"部署流程自动化"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 deploy")," 支持一键部署、回滚、灰度发布。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"pm2-ecosystem-配置示例"},"pm2 ecosystem 配置示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  apps: [\n    {\n      name: 'api',\n      script: 'app.js',\n      instances: 'max',\n      exec_mode: 'cluster',\n      watch: true,\n      env: { NODE_ENV: 'development' },\n      env_production: { NODE_ENV: 'production' }\n    }\n  ],\n  deploy: {\n    production: {\n      user: 'node',\n      host: 'xxx.xxx.xxx.xxx',\n      ref: 'origin/main',\n      repo: 'git@github.com:repo.git',\n      path: '/var/www/app',\n      'post-deploy': 'npm install && pm2 reload ecosystem.config.js --env production'\n    }\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-集群实战案例"},"Node.js 集群实战案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多核负载均衡"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"pm2 cluster 模式自动分配请求到各 CPU 核心，提升吞吐。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"零停机重启"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pm2 reload app")," 实现无缝重启，不中断服务。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"灰度发布"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合 pm2 deploy，逐步切流，平滑升级。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"监控与自动恢复"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合 prom-client/pm2 API 实时监控，进程异常自动拉起。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"集群模式启动命令"},"集群模式启动命令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"pm2 start app.js -i max --name myapp\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"零停机重启命令"},"零停机重启命令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"pm2 reload myapp\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需更深入的企业级监控、pm2 自动化运维、集群架构设计，欢迎继续提问！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-18-内置-fetch-与单元测试"},"Node.js 18+ 内置 fetch 与单元测试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-fetch-api-原生支持"},"1. fetch API 原生支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Node.js 18 起无需引入 node-fetch，直接用全局 fetch：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// Node.js 18+ 原生 fetch\nconst res = await fetch('https://api.github.com');\nconst data = await res.json();\nconsole.log(data);\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 Request/Response/Headers 等 Web 标准 API。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合服务端 HTTP 请求、API 聚合、SSR 场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-test-runner-内置单元测试"},"2. test runner 内置单元测试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Node.js 18+ 内置 test runner，无需 Jest、Mocha 等三方库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 describe/it、断言、并发、快照、覆盖率等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"入口：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"node --test")," 或 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"node test/my.test.js"),"。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"基本单元测试示例"},"基本单元测试示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// math.test.js\nimport { test, describe, expect } from 'node:test';\n\ndescribe('math', () => {\n  test('add', () => {\n    expect(1 + 2).toBe(3);\n  });\n  test('sub', () => {\n    expect(5 - 2).toBe(3);\n  });\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"运行：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"node --test math.test.js")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 ESM/CJS、并发、覆盖率、快照等高级特性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"断言用法"},"断言用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Node.js 18+ 内置 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"assert"),"，也可用 expect 风格：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import assert from 'node:assert/strict';\ntest('mul', () => {\n  assert.strictEqual(2 * 3, 6);\n});\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需 test runner 高级用法、与 Jest/Mocha 迁移方案、CI 集成等，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/Node/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Node/package.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/Node/包管理工具",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"nodejs-包管理与版本源管理工具对比"},"Node.js 包管理与版本/源管理工具对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-npm"},"1. npm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全称"),"：Node Package Manager"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简介"),"：Node.js 官方自带的包管理工具，最早、最广泛使用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主要功能"),"：依赖管理、脚本运行、包发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特点"),"：生态最大，兼容性最好，速度一般，node_modules 体积大"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"适用场景"),"：所有 Node.js 项目，兼容性优先")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-yarn"},"2. yarn"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全称"),"：Yet Another Resource Negotiator"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简介"),"：Facebook 推出的包管理器，主打速度和一致性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主要功能"),"：依赖管理、脚本运行、workspaces"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特点"),"：并行下载，速度快，离线缓存好，锁文件稳定，兼容 npm registry"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"适用场景"),"：中大型项目、monorepo、追求更快安装速度")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-pnpm"},"3. pnpm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全称"),"：Performant npm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简介"),"：新一代包管理器，主打极致性能和磁盘空间节省。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主要功能"),"：依赖管理、脚本运行、workspaces"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特点"),"：硬链接技术，node_modules 体积极小，安装速度极快，依赖隔离性好，兼容 npm/yarn 生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"适用场景"),"：大型 monorepo、多项目仓库、对磁盘空间和速度有极致要求")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-nrm"},"4. nrm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全称"),"：NPM Registry Manager"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简介"),"：npm 源（registry）管理工具，方便切换淘宝、官方、公司私有源等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主要功能"),"：一键切换 npm/yarn/pnpm 的 registry，管理自定义源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特点"),"：适合国内开发者快速切换淘宝源，也可用于公司私有源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"适用场景"),"：需要频繁切换 npm 源")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-nvm"},"5. nvm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全称"),"：Node Version Manager"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简介"),"：Node.js 版本管理工具（基于 shell 脚本实现，跨平台）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主要功能"),"：安装/卸载/切换不同 Node.js 版本，支持 .nvmrc 文件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特点"),"：多 Node 版本共存，适合多项目/多版本开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"适用场景"),"：需要在不同项目间切换 Node 版本")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-n"},"6. n"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"简介"),"：另一款 Node.js 版本管理工具（基于 Node 实现，安装简单）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主要功能"),"：安装/切换 Node.js 版本，命令行交互友好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特点"),"：安装简单，命令直观，适合不想折腾 shell 脚本的用户"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"适用场景"),"：需要简单 Node 版本切换")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"总结对比表"},"总结对比表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"主要用途"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"典型命令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"适用场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"npm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"npm install"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"兼容性优先，通用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"yarn"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"yarn install"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"速度、锁定一致性、monorepo")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"pnpm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"pnpm install"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"极致性能、磁盘优化、monorepo")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"nrm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"源切换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"nrm use taobao"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"切换 npm 源")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"nvm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Node 版本管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"nvm use 18"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"多 Node 版本开发")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"n"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Node 版本管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"n 18.0.0"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单 Node 版本切换")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"典型用法举例"},"典型用法举例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# npm 安装依赖\nnpm install\n\n# yarn 安装依赖\nyarn install\n\n# pnpm 安装依赖\npnpm install\n\n# nrm 切换淘宝源\nnrm use taobao\n\n# nvm 安装并切换 Node 版本\nnvm install 18\nnvm use 18\n\n# n 安装并切换 Node 版本\nn 18.0.0\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"总结建议"},"总结建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"包管理"),"：推荐 pnpm > yarn > npm（新项目优先 pnpm，老项目兼容 npm/yarn）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node 版本管理"),"：推荐 nvm（跨平台）、n（简单）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"源管理"),"：推荐 nrm（国内开发必备）")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/Node/包管理工具",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Pipeline/github.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/流水线/github",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"github-部署到云服务"},"github 部署到云服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-脚本"},"1 脚本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"项目根目录下新建/.github/workflow/webpack.yml,并写入下列内容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},'\nname: NodeJS with Webpack\n\non:\n  push:\n    branches: [ "master" ]\n  pull_request:\n    branches: [ "master" ]\n\njobs:\n  #build\n  build:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        node-version: [14.15.2]\n    steps:\n      # pull code\n      - uses: actions/checkout@v3\n      # install\n      - name: Install\n        uses: actions/setup-node@v3\n        with:\n          node-version: 14\n          cache: \'npm\'\n      - run : npm config set registry http://registry.npm.taobao.org/\n      - run : npm install\n      # build\n      - name: Build\n        uses: actions/setup-node@v3\n      - run : npm run build-storybook\n      # deploy\n      - name: Deploy\n        uses: easingthemes/ssh-deploy@v2.0.7\n        env:\n          SSH_PRIVATE_KEY: ${{ secrets.ACCESS_TOKEN }}\n          ARGS: "-avz --delete"\n          SOURCE: "storybook-static/"\n          REMOTE_HOST: ${{ secrets.REMOTE_HOST }}\n          REMOTE_USER: ${{ secrets.REMOTE_USER }}\n          TARGET: ${{ secrets.TARGET }}\n\n\n\n\n    \n    \n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-功能概述"},"2 功能概述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"此脚本实现了对于mater的push或者pull request的响应，最后上传到云服务上。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"具体操作，可以参考（3）中的两篇文章"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-参考"},"3 参考"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://docs.github.com/cn/actions/learn-github-actions",target:"_blank",rel:"nofollow noopener noreferrer"},"github action 指南")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1720500",target:"_blank",rel:"nofollow noopener noreferrer"},"github 自动部署到云服务(github action)")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/流水线/github",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Pipeline/gitlab.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/流水线/gitlab",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"gitlab-部署到云服务"},"gitlab 部署到云服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考文章："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/V4ZJ467eBFHYxlIa1yyJtw",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/V4ZJ467eBFHYxlIa1yyJtw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://docs.gitlab.com/runner/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://docs.gitlab.com/runner/")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/流水线/gitlab",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Pipeline/jenkins.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/流水线/jenkins",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"jekins-pipeline"},"jekins pipeline"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-安装jenkins"},"1 安装jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1666282",target:"_blank",rel:"nofollow noopener noreferrer"},"ubuntu18.04安装jenkins")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"修改默认8080端口："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"sudo vim /etc/default/jenkins\n\n#修改如下内容\nHTTP_PORT=8085\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"常见命令："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"命令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"描述"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"systemctl start jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"启动")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"systemctl stop jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"停止")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"ssystemctl reload jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"重新加载，修改配置后使用此命令生效")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"systemctl restart jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"重启")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"systemctl status jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"查看当前状态")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"systemctl enable jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"设置开机启动")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"systemctl disable jenkins"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"取消开机启动")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考文章："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/1uIZWVxuTW9mTjSgEEmNjA",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/1uIZWVxuTW9mTjSgEEmNjA")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://blog.csdn.net/u010053703/article/details/119935086",target:"_blank",rel:"nofollow noopener noreferrer"},"https://blog.csdn.net/u010053703/article/details/119935086")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/流水线/jenkins",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/React-SSR.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React-SSR",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-服务端渲染ssr全解"},"React 服务端渲染（SSR）全解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-ssr-概念简介"},"1. SSR 概念简介"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SSR（Server-Side Rendering）"),"：指在服务端将 React 组件渲染为 HTML 字符串，直接返回给浏览器，提升首屏速度和 SEO。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"与 CSR（客户端渲染）区别"),"：CSR 首屏只返回空 HTML+JS，需等 JS 加载/执行后才渲染内容；SSR 首屏直接有完整 HTML，用户和爬虫都能立即看到内容。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优势"),"：更快首屏、SEO 友好、利于社交分享。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"劣势"),"：服务端压力大、实现复杂、部分交互需水合。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-主流-ssr-框架"},"2. 主流 SSR 框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Next.js"),"：最流行的 React SSR 框架，支持 SSR、SSG、ISR、API 路由、Server Components 等，生态完善。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Remix"),"：强调数据获取与路由一体化，支持 SSR、边缘渲染、渐进式增强。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Razzle"),"：通用 SSR 脚手架，支持多种前端框架。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Vite SSR/VitePress"),"：基于 Vite 的现代 SSR 方案，适合中小型项目。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自定义 SSR"),"：直接用 react-dom/server（如 renderToString、renderToPipeableStream）实现，适合特殊场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-ssr-核心原理"},"3. SSR 核心原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"请求到达服务端"),"：Node.js/边缘函数接收 HTTP 请求。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据预取"),"：服务端根据路由/参数预取数据（如 getServerSideProps、loader）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"组件渲染"),"：用 react-dom/server 将 React 组件树渲染为 HTML 字符串或流。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"注水（dehydrate）"),"：将预取的数据序列化注入到 HTML（window.",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"DATA"),"）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"返回 HTML"),"：服务端返回完整 HTML，浏览器可立即展示。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"水合（hydrate）"),"：客户端 React 重新挂载到已有 HTML 上，绑定事件、恢复交互。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"脱水（dehydrate）"),"：指服务端将数据状态序列化注入页面，供客户端恢复。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-ssr-相关术语详解"},"4. SSR 相关术语详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"注水dehydrate"},"注水（dehydrate）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"指服务端渲染时，将预取到的状态/数据序列化为 JSON，嵌入到 HTML 页面中（如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("script",null,"window.",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"DATA"),"=..."),"）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"目的是让客户端 JS 能直接用这些数据，无需重复请求。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"水合hydrate"},"水合（hydrate）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'指客户端 React 代码启动后，将事件、状态等"激活"到服务端渲染的静态 HTML 上。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 会复用已有 DOM，只绑定事件和状态，避免重复渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'使页面从"静态"变为"可交互"。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"脱水dehydrate详解"},"脱水（dehydrate）详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'脱水本质是服务端将"数据状态"序列化为字符串（通常是 JSON）注入到 HTML 页面中，供客户端 JS 启动时直接还原，无需重复请求。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'常见于 React Query、SWR、Apollo Client 等数据层库，服务端渲染时把缓存/请求结果"脱水"成 JSON，嵌入 ',Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<script>")," 标签（如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<script>window.__DATA__=...<\/script>"),'），客户端启动时"注水"还原。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例子（Next.js + React Query）：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 服务端\nconst dehydratedState = dehydrate(queryClient);\n// 注入页面\n<script>window.__REACT_QUERY_STATE__ = { ... }<\/script>\n// 客户端\n<Hydrate state={window.__REACT_QUERY_STATE__}><App /></Hydrate>\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'脱水让服务端和客户端的数据状态"一致"，提升首屏速度，避免闪烁和重复请求。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"注水水合过程会失败吗"},"注水/水合过程会失败吗？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"可能失败的原因：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"HTML 与客户端 React 结构不一致：如数据、结构、顺序、key、属性等不一致，React/Next.js 会报错或页面闪烁。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"数据不一致：服务端注水的数据和客户端初始数据不一致，导致水合时快照不匹配。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"非确定性渲染：如副作用、Math.random、Date.now、依赖浏览器 API，导致服务端和客户端渲染结果不同。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"版本/依赖不一致：服务端和客户端依赖的 React/库版本不一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Next.js 机制说明：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'Next.js SSR 默认自动"脱水+注水+水合"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'检测到水合失败，开发环境下会报错，生产环境下可能自动"重新挂载"组件（但会丢失 SSR 性能和 SEO 优势）。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐 SSR 组件渲染结果必须确定性，避免副作用和异步不一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"脱水：服务端把数据状态序列化注入页面，供客户端还原。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"注水/水合可能失败，主要因服务端和客户端渲染结果不一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Next.js 有完善的 SSR/水合机制，开发时要确保渲染一致，避免副作用和异步不一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"脱水注水水合三者的本质区别与总结"},"脱水、注水、水合三者的本质区别与总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-脱水dehydrate"},"1. 脱水（dehydrate）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"发生在服务端"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),'：把服务端预取到的"数据状态"序列化为字符串（通常是 JSON），嵌入到 HTML 页面中。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"关键词"),"：写出、序列化、注入页面。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"比喻"),"：像把水变成冰块，方便运输。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"例子"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<script>window.__DATA__ = {"todos":[{"id":1,"text":"foo"}]}<\/script>\n')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-注水hydrate-data"},"2. 注水（hydrate data）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"发生在客户端 JS 启动时"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),'：把 HTML 里嵌入的"脱水数据"还原（反序列化）到内存/状态库，供 React/数据层直接使用。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"关键词"),"：还原、反序列化、同步到内存。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"比喻"),"：像把冰块拿出来，重新化成水，直接喝。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"例子"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"<Hydrate state={window.__DATA__}><App /></Hydrate>\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-水合hydrate"},"3. 水合（hydrate）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"发生在客户端 JS 启动时"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),'：React 代码接管服务端渲染的 HTML，绑定事件、恢复状态，让页面从"静态"变为"可交互"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"关键词"),"：激活、事件绑定、页面变活。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"比喻"),"：像给冰块加热，让它恢复流动性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"例子"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { hydrateRoot } from 'react-dom/client';\nhydrateRoot(document.getElementById('root'), <App />);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-关系与流程"},"4. 关系与流程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"脱水：服务端写出数据（序列化）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"注水：客户端还原数据（反序列化）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"水合：客户端激活页面（事件/状态绑定）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"流程图解：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"[服务端渲染] --脱水--\x3e [HTML + 数据] --发送到浏览器--\x3e [客户端JS加载] --注水--\x3e [内存/状态库]\n                                                        └--水合--\x3e [可交互页面]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-记忆口诀"},"5. 记忆口诀"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"脱水 = 服务端写出数据（序列化）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"注水 = 客户端还原数据（反序列化）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"水合 = 客户端激活页面（事件/状态绑定）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-ssr-典型流程图"},"5. SSR 典型流程图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"浏览器请求页面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"服务端预取数据，渲染 React 组件为 HTML"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"注水：数据序列化注入 HTML"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"返回 HTML，浏览器展示首屏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"客户端加载 JS，水合，恢复交互"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"页面可响应用户操作")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"路由同构与-nextjs-ssr-数据流机制详解"},"路由同构与 Next.js SSR 数据流机制详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-什么是路由同构"},"1. 什么是路由同构？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同构（Isomorphic/Universal）"),"：同一套 React 代码既能在服务端（Node.js）运行，也能在客户端（浏览器）运行，保证两端渲染结果一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"路由同构"),"：路由解析、跳转、数据预取等逻辑，既能在服务端 SSR 阶段执行，也能在客户端 SPA 阶段执行，保证用户体验和 SEO 一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"意义"),"：用户首次访问页面时，服务端 SSR 渲染并返回完整 HTML；后续页面跳转时，客户端用同样的路由逻辑渲染，实现无缝切换和 SEO 友好。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-nextjs-如何实现路由同构"},"2. Next.js 如何实现路由同构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"文件系统路由"),"：pages/ 或 app/ 目录下的文件自动成为路由。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务端路由解析"),"：首次请求由 Node.js 服务器解析 URL，匹配到对应页面组件，执行 SSR。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"客户端路由解析"),"：页面加载后，next/router 接管，后续跳转用 push/replace 实现 SPA。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同构数据获取"),"：如 getServerSideProps、getInitialProps、loader 等 API，既能在服务端执行（SSR），也能在客户端执行（CSR/切换时）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-nextjs-脱水注水水合机制"},"3. Next.js 脱水、注水、水合机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"脱水（dehydrate）"),"：服务端渲染时执行数据获取逻辑，将数据序列化注入 HTML（如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("script",null,"window.",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"DATA"),"=..."),"）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"注水（hydrate data）"),"：客户端 JS 启动时，把 HTML 里嵌入的脱水数据反序列化，还原到内存/状态库（如 React Query 的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<Hydrate />")," 组件）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"水合（hydrate）"),"：客户端 React 代码启动时，用 hydrateRoot 让 React 代码接管 SSR HTML，绑定事件、恢复状态。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-nextjs-路由同构--脱水注水水合完整流程"},"4. Next.js 路由同构 + 脱水/注水/水合完整流程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"用户访问 /about"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"服务端：解析路由，预取数据，渲染组件，脱水，返回 HTML"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"客户端：展示 SSR HTML，加载 JS，水合（事件/状态绑定），注水（数据还原），页面变为可交互 SPA"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"后续跳转：客户端路由解析新 URL，加载新页面组件，预取数据，渲染，无需刷新")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-源码机制要点"},"5. 源码/机制要点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Next.js 的同构路由和数据获取 API 会自动判断当前运行环境，保证逻辑一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"脱水/注水机制通常结合数据层库（如 React Query、SWR），Next.js 提供数据注入和还原钩子。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"水合由 React hydrateRoot 实现，Next.js 自动处理。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"记忆口诀"},"记忆口诀"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由同构：服务端和客户端都能解析/跳转路由，数据获取逻辑一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"脱水：服务端写出数据到 HTML。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"注水：客户端还原数据到内存。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"水合：客户端激活页面，绑定事件/状态。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需 Next.js/Remix/Vite SSR 等框架的源码级原理或最佳实践，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React-SSR",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/React17.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React17",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-17-新特性与升级亮点"},"React 17 新特性与升级亮点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-新特性与行为变更"},"1. 新特性与行为变更"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"11-无破坏性升级no-new-features"},"1.1 无破坏性升级（No New Features）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'React 17 主要是"无新特性"的升级，核心目标是为未来大版本升级（如 18 并发特性）打基础。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"重点在于行为变更、兼容性提升和架构优化。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"12-新的事件委托机制"},"1.2 新的事件委托机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件监听从 document 绑定下移到根容器（root container），提升微前端、多个 React 应用共存场景的兼容性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多个 React 应用同时挂载在同一页面，事件不会冲突。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"13-事件冒泡行为变更"},"1.3 事件冒泡行为变更"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 17 事件冒泡顺序更接近原生 DOM。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"捕获/冒泡阶段的行为与原生一致，便于与第三方库集成。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"14-支持逐步升级"},"1.4 支持逐步升级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可以在同一页面同时运行 React 17 和更早版本（如 16），便于大型项目渐进式升级。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"15-新的-jsx-转换可选"},"1.5 新的 JSX 转换（可选）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持新版 JSX 转换（无需显式引入 React），但不是 React 17 必须项。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需配合新版 Babel/TypeScript。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"16-更好的错误边界"},"1.6 更好的错误边界"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"改进了 error boundary 行为，部分生命周期钩子（如 getDerivedStateFromError）在更广泛场景下生效。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-兼容性与最佳实践"},"2. 兼容性与最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐先升级到 React 17，再平滑迁移到 React 18。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"升级时关注事件委托、第三方库兼容性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"利用逐步升级能力，分模块、分页面迁移。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-参考资料"},"3. 参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/blog/2020/10/20/react-v17.html",target:"_blank",rel:"nofollow noopener noreferrer"},"React 17 官方发布说明")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/blog/2020/08/10/react-v17-rc.html",target:"_blank",rel:"nofollow noopener noreferrer"},"React 17 升级指南"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-react-17-新特性与行为变更的细节对比"},"4. React 17 新特性与行为变更的细节对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"41-事件委托机制的变化"},"4.1 事件委托机制的变化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16 及以前"),"：所有 React 事件统一绑定在 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"document")," 上（事件委托），导致多个 React 应用共存时事件冲突，微前端场景下不友好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：事件监听绑定在各自的根容器（root container）上。这样多个 React 应用可以安全共存，互不干扰。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"影响"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微前端、嵌套多 React 应用时，事件不会串扰。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件解绑更彻底，卸载 React 应用时不会影响全局。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"42-事件冒泡与捕获行为"},"4.2 事件冒泡与捕获行为"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16 及以前"),"：React 的事件冒泡和捕获顺序与原生 DOM 有差异，部分第三方库集成时会有兼容性问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：事件冒泡、捕获顺序与原生 DOM 完全一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"影响"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可以更好地与原生事件、第三方库（如 jQuery、D3）混用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件处理的可预测性更高。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"43-支持逐步升级渐进式升级"},"4.3 支持逐步升级（渐进式升级）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16 及以前"),"：同一页面只能挂载一个 React 版本，升级大项目困难。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：同一页面可同时运行 React 17 和更早版本（如 16），通过 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactDOM.createRoot"),"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactDOM.render")," 分别挂载。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"影响"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"大型项目可分模块、分页面逐步迁移到新版本。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"降低升级风险。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"44-新的-jsx-转换可选"},"4.4 新的 JSX 转换（可选）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16 及以前"),"：JSX 语法必须显式 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"import React from 'react'"),"，否则编译报错。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：支持新版 JSX 转换（需 Babel 7.9+/TypeScript 4.1+），无需显式引入 React。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"影响"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码更简洁，减少无用 import。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"但不是 React 17 必须项，需配合新工具链。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"45-错误边界行为改进"},"4.5 错误边界行为改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16"),"：错误边界（Error Boundary）只能捕获子组件渲染、生命周期、构造函数中的错误。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：改进了 error boundary 行为，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"getDerivedStateFromError")," 等生命周期在更多场景下生效。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"影响"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"错误捕获更健壮，边界更清晰。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"46-其他细节"},"4.6 其他细节"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"移除事件池（Event Pooling）"),"：React 17 移除了 SyntheticEvent 的事件池，事件对象可异步访问，无需调用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"event.persist()"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"兼容性提升"),"：如对 IE11、Safari 的兼容性修复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更好的开发警告和错误提示"),"。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-react-事件委托机制的详细原理与流程对比"},"5. React 事件委托机制的详细原理与流程对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"51-原生-dom-事件"},"5.1 原生 DOM 事件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在原生 DOM 中，事件监听器可以直接绑定在任意元素上，事件会从目标元素冒泡到 document。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"52-react-的事件委托机制"},"5.2 React 的事件委托机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-16-及以前"},"React 16 及以前"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 并不是把 onClick 直接绑定在元素上，而是把所有事件统一绑定在 document 上。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"当你点击元素时，事件冒泡到 document，React 在 document 上捕获事件，通过 event.target 找到对应的 React 组件，执行 onClick。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：只需在 document 上注册一次事件监听，性能好，兼容性强。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-17"},"React 17"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 17 把事件监听从 document 下移到了每个 React 应用的根容器（如 #root）上。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件冒泡到根容器时，React 才处理事件，之后的流程和以前一样。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：每个 React 应用的事件只在自己的根容器上监听，多个 React 应用不会互相影响，方便卸载和隔离。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"53-具体流程对比"},"5.3 具体流程对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"步骤"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"React 16 及以前"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"React 17"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"1"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"点击元素"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"点击元素")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"2"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"事件冒泡到 document"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"事件冒泡到根容器（如 #root）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"3"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React 在 document 上捕获事件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React 在根容器上捕获事件")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"4"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"找到 event.target，执行 onClick"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"找到 event.target，执行 onClick")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"54-为什么要这样做"},"5.4 为什么要这样做？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件委托是为了性能和一致性，避免每个元素都单独绑定事件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 17 的变化让每个 React 应用的事件只在自己的根容器上监听，多个 React 应用不会互相影响，方便卸载和隔离。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"55-直观例子"},"5.5 直观例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<div id="root1"></div>\n<div id="root2"></div>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"ReactDOM.render(<App1 />, document.getElementById('root1'));\nReactDOM.render(<App2 />, document.getElementById('root2'));\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 16-：两个应用的事件都绑定在 document 上，事件处理逻辑混在一起。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 17+：App1 的事件只绑定在 #root1，App2 的事件只绑定在 #root2，互不干扰。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"56-总结"},"5.6 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'你写的 onClick 依然是"点谁谁触发"，但 React 内部是通过"事件委托"机制，在根容器（React 17）或 document（React 16-）上统一监听和分发事件。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这种机制对业务代码无感知，但对多应用隔离、微前端、事件解绑有重大意义。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-react-17-事件冒泡行为变更的详细解释"},"6. React 17 事件冒泡行为变更的详细解释"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"61-变更背景"},"6.1 变更背景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 16 及以前，React 的合成事件系统导致 React 事件和原生 DOM 事件的触发顺序不一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 17 调整后，React 事件的捕获/冒泡顺序与原生 DOM 完全一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"62-具体例子"},"6.2 具体例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"<div\n  onClick={() => console.log('React onClick')}\n  ref={el => {\n    if (el) {\n      el.addEventListener('click', () => console.log('Native click'));\n    }\n  }}\n>\n  Click me\n</div>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16-"),"：点击时，先输出 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"React onClick"),"，再输出 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Native click"),"（React 事件总是先于原生事件）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17+"),"：点击时，先输出 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Native click"),"，再输出 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"React onClick"),"（与原生 DOM 一致，原生事件先于 React 事件）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"63-捕获冒泡阶段说明"},"6.3 捕获/冒泡阶段说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"捕获阶段"),"：事件从 document 向目标元素传递，先触发捕获监听器（如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"addEventListener('click', fn, true)"),"）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"冒泡阶段"),"：事件从目标元素向上冒泡到 document，依次触发冒泡监听器。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：React 的事件监听器会在正确的阶段（捕获/冒泡）被触发，顺序与原生 DOM 完全一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"64-为什么这样做"},"6.4 为什么这样做？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与第三方库（如 jQuery、D3、原生 JS）集成时，事件顺序不会错乱。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"行为更可预测，开发者可以准确预期事件触发顺序。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"65-总结"},"6.5 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17 之前"),"：React 事件总是先于原生事件触发，顺序不一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17 之后"),"：React 事件与原生事件的捕获/冒泡顺序完全一致，兼容性和可预测性大幅提升。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-原生-dom-事件流顺序与-react-17-的一致性"},"7. 原生 DOM 事件流顺序与 React 17 的一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"71-原生-dom-事件流顺序"},"7.1 原生 DOM 事件流顺序"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"原生 DOM 事件流分为三个阶段："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"捕获阶段（Capture Phase）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件从 window → document → 外层父节点 ... 一直传递到目标元素（target）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"addEventListener('click', fn, true)")," 注册的捕获监听器会在这个阶段被触发。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"目标阶段（Target Phase）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件到达目标元素本身。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"目标元素上既会触发捕获监听器，也会触发冒泡监听器。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"冒泡阶段（Bubble Phase）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件从目标元素向上，依次冒泡回父节点 → document → window。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"addEventListener('click', fn, false)"),"（或省略第三个参数）注册的监听器会在这个阶段被触发。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"顺序举例"},"顺序举例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<div id="outer">\n  <button id="btn">Click me</button>\n</div>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"document.getElementById('outer').addEventListener('click', () => console.log('outer capture'), true); // 捕获\ndocument.getElementById('outer').addEventListener('click', () => console.log('outer bubble')); // 冒泡\ndocument.getElementById('btn').addEventListener('click', () => console.log('btn capture'), true); // 捕获\ndocument.getElementById('btn').addEventListener('click', () => console.log('btn bubble')); // 冒泡\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"点击 button，输出顺序："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"outer capture   // 捕获阶段\nbtn capture     // 捕获阶段\nbtn bubble      // 冒泡阶段\nouter bubble    // 冒泡阶段\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"72-react-17-的行为"},"7.2 React 17 的行为"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17 之前"),"：React 的合成事件系统有时会让 React 事件先于原生事件触发，顺序不完全一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：React 的事件监听器会在捕获/冒泡阶段被正确触发，顺序与原生 DOM 完全一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"例子"},"例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"<div\n  onClickCapture={() => console.log('React capture')}\n  onClick={() => console.log('React bubble')}\n  ref={el => {\n    if (el) {\n      el.addEventListener('click', () => console.log('Native bubble'));\n      el.addEventListener('click', () => console.log('Native capture'), true);\n    }\n  }}\n>\n  Click me\n</div>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"点击时输出顺序（React 17+）："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"Native capture   // 捕获阶段\nReact capture    // 捕获阶段\nReact bubble     // 冒泡阶段\nNative bubble    // 冒泡阶段\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 事件和原生事件都严格遵循 DOM 事件流顺序。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"73-总结"},"7.3 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原生 DOM 顺序"),"：捕获 → 目标 → 冒泡。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17"),"：React 事件监听器会在捕获/冒泡阶段被正确触发，顺序与原生 DOM 完全一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这样可以无缝与原生事件、第三方库事件混用，事件顺序可预测、无冲突。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-事件流顺序先捕获后冒泡"},"8. 事件流顺序：先捕获，后冒泡"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"81-事件流的三个阶段"},"8.1 事件流的三个阶段"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"捕获阶段（Capture Phase）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件从 window → document → 外层父节点 ... 一直传递到目标元素（target）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"addEventListener('click', fn, true)")," 注册的捕获监听器会在这个阶段被触发。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"目标阶段（Target Phase）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件到达目标元素本身。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"目标元素上既会触发捕获监听器，也会触发冒泡监听器。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"冒泡阶段（Bubble Phase）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件从目标元素向上，依次冒泡回父节点 → document → window。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"addEventListener('click', fn, false)"),"（或省略第三个参数）注册的监听器会在这个阶段被触发。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"82-顺序举例"},"8.2 顺序举例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<div id="outer">\n  <button id="btn">Click me</button>\n</div>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"document.getElementById('outer').addEventListener('click', () => console.log('outer capture'), true); // 捕获\ndocument.getElementById('outer').addEventListener('click', () => console.log('outer bubble')); // 冒泡\ndocument.getElementById('btn').addEventListener('click', () => console.log('btn capture'), true); // 捕获\ndocument.getElementById('btn').addEventListener('click', () => console.log('btn bubble')); // 冒泡\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"点击 button，输出顺序："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"outer capture   // 捕获阶段\nbtn capture     // 捕获阶段\nbtn bubble      // 冒泡阶段\nouter bubble    // 冒泡阶段\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"83-总结"},"8.3 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"事件总是先捕获，后冒泡。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"捕获阶段先于冒泡阶段，目标元素上两种监听器都能触发。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-事件监听器第三个参数-truefalse-的顺序详解"},"9. 事件监听器第三个参数 true/false 的顺序详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"91-监听器参数说明"},"9.1 监听器参数说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"true"),"：监听器在",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"捕获阶段"),"触发。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"false"),"（或省略）：监听器在",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"冒泡阶段"),"触发。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"92-顺序详细说明"},"9.2 顺序详细说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"div.addEventListener('click', () => console.log('capture'), true);   // 捕获\ndiv.addEventListener('click', () => console.log('bubble'), false);   // 冒泡\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"点击 div，输出顺序："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"capture   // 捕获阶段\nbubble    // 冒泡阶段\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"93-嵌套结构例子"},"9.3 嵌套结构例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<div id="outer">\n  <div id="inner"></div>\n</div>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"outer.addEventListener('click', () => console.log('outer capture'), true);\nouter.addEventListener('click', () => console.log('outer bubble'));\ninner.addEventListener('click', () => console.log('inner capture'), true);\ninner.addEventListener('click', () => console.log('inner bubble'));\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"点击 inner，输出顺序："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"outer capture   // 捕获阶段\ninner capture   // 捕获阶段\ninner bubble    // 冒泡阶段\nouter bubble    // 冒泡阶段\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"94-目标元素上的监听器"},"9.4 目标元素上的监听器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"目标元素（如 inner）上，如果同时有捕获和冒泡监听器，先触发捕获监听器，再触发冒泡监听器。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这就是第三个参数 true/false 决定的顺序差异。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"95-总结口诀"},"9.5 总结口诀"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"true 捕获，false 冒泡，先捕获后冒泡。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"目标元素上也是先捕获监听器，后冒泡监听器。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React17",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/React18.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React18",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-18-新特性与升级亮点"},"React 18 新特性与升级亮点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-自动批处理automatic-batching"},"1. 自动批处理（Automatic Batching）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：自动批量处理更多场景下的 state 更新，包括 setTimeout、Promise、原生事件等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：减少不必要的渲染次数，提升性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  setA(1);\n  setB(2);\n  // React 18: 只触发一次渲染\n});\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-并发特性concurrent-features"},"2. 并发特性（Concurrent Features）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：引入并发渲染能力（Concurrent Rendering），支持更细粒度的任务调度和中断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：提升大列表、动画、交互等场景的流畅度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { createRoot } from 'react-dom/client';\nconst root = createRoot(document.getElementById('root'));\nroot.render(<App />); // 启用并发特性\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-starttransition-api"},"3. startTransition API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"startTransition")," 用于标记低优先级的 UI 更新（如大列表、搜索等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：高优先级任务（如输入）不会被低优先级任务阻塞，提升响应性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { startTransition } from 'react';\nstartTransition(() => {\n  setList(newList); // 低优先级批量更新\n});\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-suspense-改进与-ssr-支持"},"4. Suspense 改进与 SSR 支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：Suspense 现已支持服务端渲染（SSR）、数据流（如 React 18 的 streaming SSR）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：更好地处理异步加载、骨架屏、流式渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"<Suspense fallback={<Loading />}>\n  <SomeAsyncComponent />\n</Suspense>\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-useid-hook"},"5. useId Hook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useId")," 用于生成稳定、唯一的 ID，适合无障碍、表单 label 等场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：避免 SSR/CSR 不一致问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const id = useId();\n<input id={id} />\n<label htmlFor={id}>Label</label>\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-usesyncexternalstore"},"6. useSyncExternalStore"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：为外部状态管理（如 Redux、MobX）提供官方订阅方案，保证并发安全。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：更好地支持并发渲染下的外部状态同步。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const state = useSyncExternalStore(subscribe, getSnapshot);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-useinsertioneffect"},"7. useInsertionEffect"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"新特性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useInsertionEffect")," 用于在 DOM 插入前同步注入样式，适合 CSS-in-JS 场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：避免样式闪烁，提升体验。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"useInsertionEffect(() => {\n  // 注入样式\n}, []);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-其他改进"},"8. 其他改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更好的 SSR 支持（流式渲染、渐进式水合）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 18 默认启用严格模式下的双重渲染（开发环境）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"useDeferredValue、useTransition 等新 Hook。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-与-react-17-及以前的优点对比"},"9. 与 React 17 及以前的优点对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能提升"),"：自动批处理、并发渲染减少不必要的渲染，提升大规模应用性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"用户体验更好"),"：startTransition、Suspense 等让交互更流畅，异步加载体验更佳。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更强的 SSR 能力"),"：支持流式渲染、Suspense on SSR。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更好的外部状态管理支持"),"：useSyncExternalStore 保证并发安全。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更丰富的 Hook API"),"：如 useId、useInsertionEffect、useDeferredValue、useTransition。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-参考资料"},"10. 参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/blog/2022/03/29/react-v18.html",target:"_blank",rel:"nofollow noopener noreferrer"},"React 18 官方发布说明")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/learn/upgrading-to-react-18",target:"_blank",rel:"nofollow noopener noreferrer"},"React 18 新特性详解"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"11-自动批处理automatic-batching详解"},"11. 自动批处理（Automatic Batching）详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"111-什么是自动批处理"},"11.1 什么是自动批处理？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动批处理指：在同一个事件循环（event loop）内，React 会自动把多次 state 更新（setState/useState）合并成一次渲染和 DOM 更新，减少渲染次数、提升性能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"112-react-17-及以前的行为"},"11.2 React 17 及以前的行为"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有在 React 合成事件、生命周期函数、钩子（如 useEffect）中，setState 才会被批量合并。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在 setTimeout、Promise.then、原生事件等异步场景下，每次 setState 都会单独触发一次渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"例子：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  setA(1);\n  setB(2);\n  // React 17: 会触发两次渲染\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"113-react-18-的行为"},"11.3 React 18 的行为"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动批处理扩展到几乎所有场景，包括 setTimeout、Promise.then、原生事件等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只要多次 setState 发生在同一个事件循环内，React 18 都会自动合并，只触发一次渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"例子：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  setA(1);\n  setB(2);\n  // React 18: 只触发一次渲染\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"114-自动批处理的好处"},"11.4 自动批处理的好处"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"减少不必要的渲染次数，提升性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码更简洁，无需手动调用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"unstable_batchedUpdates"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"行为更一致，开发者不用关心 setState 发生在哪个上下文。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"115-代码对比"},"11.5 代码对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"React 17 及以前")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  setA(1); // 触发一次渲染\n  setB(2); // 再触发一次渲染\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"React 18")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  setA(1);\n  setB(2);\n  // 只触发一次渲染\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"116-手动批处理兼容旧场景"},"11.6 手动批处理（兼容旧场景）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如果你需要在特殊场景下手动批处理（如第三方回调），可以用："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { unstable_batchedUpdates } from 'react-dom';\nunstable_batchedUpdates(() => {\n  setA(1);\n  setB(2);\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"117-总结"},"11.7 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动批处理让 React 18 在更多场景下自动合并 state 更新，减少渲染次数，提升性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"让开发者不用再关心 setState 的上下文，代码更健壮、性能更优。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"12-并发特性concurrent-features原理实现与优势"},"12. 并发特性（Concurrent Features）原理、实现与优势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"121-并发特性是什么"},"12.1 并发特性是什么？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 能同时准备多个 UI 状态，根据优先级、用户交互等动态决定何时、以什么顺序渲染和提交这些状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'支持"可中断、可恢复、可插队"地渲染 UI，而不是"一口气渲染到底"。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"122-实现原理"},"12.2 实现原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"fiber-架构"},"Fiber 架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fiber 允许将渲染任务拆分为小单元（Fiber 节点），每次只处理一部分。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"渲染过程中可以让出主线程，响应更高优先级任务。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"scheduler-调度器"},"Scheduler 调度器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内部 Scheduler 负责分配任务优先级、时间切片、任务中断与恢复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"根据 Lane 优先级动态调度，高优先级任务优先执行。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"并发渲染入口"},"并发渲染入口"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"createRoot")," API 启用并发特性：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { createRoot } from 'react-dom/client';\nconst root = createRoot(document.getElementById('root'));\nroot.render(<App />);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"可中断可恢复"},"可中断、可恢复"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"渲染过程中如有高优先级任务到来（如用户输入），React 可中断当前渲染，先处理高优先级任务，之后再恢复低优先级任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'这就是"时间切片（Time Slicing）"的核心。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"123-优势"},"12.3 优势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"不卡顿"),"：大列表、复杂页面渲染时，用户输入、动画等高优先级任务不会被阻塞，页面更流畅。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"响应更快"),"：React 可以优先响应用户操作，延后不重要的渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更灵活的 UI 更新"),"：支持 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"startTransition"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useTransition"),' 等 API，将低优先级任务标记为"可延后"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更强的可扩展性"),"：为未来的 React 新特性（如 Server Components、Streaming SSR）打下基础。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"124-代码示例"},"12.4 代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { startTransition } from 'react';\n\nfunction handleInputChange(e) {\n  const value = e.target.value;\n  // 高优先级：立即响应输入\n  setInputValue(value);\n  // 低优先级：大列表过滤\n  startTransition(() => {\n    setFilteredList(filterList(value));\n  });\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"125-为什么-react-17-没有并发渲染"},"12.5 为什么 React 17 没有并发渲染？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 16"),' 虽然引入了 Fiber 架构，但默认仍是"同步渲染模式"，即使有 Fiber 也没有开放并发调度入口。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17")," 依然没有对外暴露并发渲染能力，所有渲染流程仍是同步、不可中断的。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 18")," 才通过 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"createRoot"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"startTransition"),' 等 API 正式开放并发渲染入口，配合底层 Fiber + Scheduler 实现真正的"可中断、可恢复、可插队"的并发渲染。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这是 React 18 的重大升级点，也是与 17 及以前版本的本质区别。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"13-starttransition-与-usetransition-详解"},"13. startTransition 与 useTransition 详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"131-starttransition"},"13.1 startTransition"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),'：用于将一组 state 更新标记为"可延后、低优先级"的并发任务。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：如大列表过滤、搜索、异步数据加载等，避免阻塞高优先级任务（如输入响应）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),'：startTransition 内的更新会被 React 视为"可中断、可延后"，高优先级任务（如输入、点击）可随时插队。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"用法示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { startTransition } from 'react';\n\nfunction handleInputChange(e) {\n  const value = e.target.value;\n  setInputValue(value); // 高优先级，立即响应输入\n  startTransition(() => {\n    setFilteredList(filterList(value)); // 低优先级，异步批量更新\n  });\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这样用户输入不会被大列表渲染卡住，体验更流畅。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"132-usetransition"},"13.2 useTransition"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),'：提供一个"并发状态"标记和 startTransition 的简化用法。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"返回值"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"const [isPending, startTransition] = useTransition();"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"isPending"),"：表示当前是否有 transition 任务在进行（可用于 loading 状态）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"startTransition"),"：与上面 API 一致。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：表单输入、搜索、分页、切换大视图等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"用法示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useState, useTransition } from 'react';\n\nfunction SearchComponent() {\n  const [input, setInput] = useState('');\n  const [results, setResults] = useState([]);\n  const [isPending, startTransition] = useTransition();\n\n  function handleChange(e) {\n    const value = e.target.value;\n    setInput(value); // 高优先级\n    startTransition(() => {\n      setResults(expensiveFilter(value)); // 低优先级\n    });\n  }\n\n  return (\n    <div>\n      <input value={input} onChange={handleChange} />\n      {isPending && <span>Loading...</span>}\n      <ul>\n        {results.map(r => <li key={r}>{r}</li>)}\n      </ul>\n    </div>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"133-注意事项"},"13.3 注意事项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"startTransition/useTransition 只影响其内部的 state 更新优先级，不影响外部更新。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'适合"可以延迟但不能丢失"的 UI 更新，不适合关键交互（如输入值本身、按钮点击等）。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"isPending 只在 transition 任务未提交时为 true，可用于 loading 提示。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"134-总结"},"13.4 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"startTransition"),"：用于标记一组低优先级、可延后的 UI 更新。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useTransition"),"：提供 isPending 状态和 startTransition 方法，便于管理并发任务和 loading 状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"让 React 应用在大数据量、复杂交互场景下依然保持流畅体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"14-nextjs-及传统-ssr-如何保证-id-一致性为什么很多时候也没问题"},'14. Next.js 及传统 SSR 如何保证 id 一致性？为什么很多时候"也没问题"？'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"141-传统做法手动保证一致性"},"14.1 传统做法：手动保证一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SSR 框架（如 Next.js）在 React 18 之前，不会自动为你生成稳定 id，开发者通常：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用业务 id（如 item.id）作为 DOM id。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用 map 的索引（index）生成 id（小范围、无动态增删时）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在组件外部（模块作用域）生成 id，保证 SSR/CSR 渲染顺序一致。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"<input id={`input-${item.id}`} />\n<input id={`input-${index}`} />\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"142-为什么很多时候也没问题"},'14.2 为什么很多时候"也没问题"？'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只要 SSR 和 CSR 渲染顺序、数据完全一致，生成 id 的逻辑也一致，就不会有 hydration 警告。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"但如果有异步加载、懒加载、条件渲染、动态插入等，SSR/CSR 渲染树顺序不一致，就可能出现 id 不一致、hydration 警告或 UI 闪烁。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"143-典型问题场景"},"14.3 典型问题场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"动态列表、懒加载组件、条件渲染：SSR/CSR 渲染数量或顺序不一致，id 就会错位。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多实例组件：组件树结构变化，SSR/CSR 的 id 生成顺序就会不一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"144-useid-的优势"},"14.4 useId 的优势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动保证一致性：无论组件树怎么变、怎么嵌套，React 18 的 useId 都能保证 SSR/CSR 渲染出来的 id 一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"无需手动管理：开发者不用再手动维护 id 生成逻辑，避免出错。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"145-总结"},"14.5 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'Next.js 之前"没问题"是因为数据和渲染顺序刚好一致，或者用业务 id。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"但在复杂场景下，传统做法容易出错，React 18 的 useId 彻底解决了 SSR/CSR id 不一致的问题，提升了健壮性和开发体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"15-usesyncexternalstore-的底层实现原理与-useeffect-区别及更多实际案例"},"15. useSyncExternalStore 的底层实现原理、与 useEffect 区别及更多实际案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"151-底层实现原理"},"15.1 底层实现原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'React 18 并发渲染下，组件可能会被"暂停/恢复/回滚"，如果用 useEffect 订阅外部 store，可能导致 UI 和 store 状态不一致（撕裂）。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"useSyncExternalStore 的核心：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渲染时同步读取快照"),"（getSnapshot），保证渲染用到的外部数据和 UI 一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"订阅变更"),"（subscribe），当外部 store 变化时，自动触发组件重新渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"在 commit 阶段再次校验快照"),"，如果快照和渲染时不一致，会重新渲染，保证一致性。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'这样即使在并发模式下，UI 和外部 store 始终保持同步，不会出现"撕裂"。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"152-与-useeffect-的区别"},"15.2 与 useEffect 的区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"useEffect 订阅外部 store 时，渲染和订阅是异步的，可能出现：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"渲染时读到旧值，提交时 store 已变，导致 UI 和数据不一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"并发模式下，组件可能被多次渲染/回滚，useEffect 订阅时机不准确。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"useSyncExternalStore 在渲染时同步读取快照，订阅和快照校验都在 React 内部调度，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"保证并发安全"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"结论"),"：并发模式下，订阅外部 store 必须用 useSyncExternalStore，不能用 useEffect+useState。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"153-更多实际案例"},"15.3 更多实际案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-订阅-redux-store"},"1. 订阅 Redux store"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useSyncExternalStore } from 'react';\nimport { store } from './store';\n\nfunction subscribe(callback) {\n  return store.subscribe(callback);\n}\nfunction getSnapshot() {\n  return store.getState();\n}\nfunction MyReduxComponent() {\n  const state = useSyncExternalStore(subscribe, getSnapshot);\n  return <div>{state.value}</div>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-订阅浏览器窗口尺寸"},"2. 订阅浏览器窗口尺寸"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"function subscribe(callback) {\n  window.addEventListener('resize', callback);\n  return () => window.removeEventListener('resize', callback);\n}\nfunction getSnapshot() {\n  return window.innerWidth;\n}\nfunction WindowWidth() {\n  const width = useSyncExternalStore(subscribe, getSnapshot);\n  return <div>窗口宽度：{width}</div>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-订阅-localstorage-变化"},"3. 订阅 localStorage 变化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"function subscribe(callback) {\n  window.addEventListener('storage', callback);\n  return () => window.removeEventListener('storage', callback);\n}\nfunction getSnapshot() {\n  return localStorage.getItem('myKey');\n}\nfunction LocalStorageValue() {\n  const value = useSyncExternalStore(subscribe, getSnapshot);\n  return <div>localStorage: {value}</div>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"154-总结"},"15.4 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"useSyncExternalStore 通过同步快照和订阅机制，保证并发渲染下 UI 和外部数据一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"是 React 18 并发模式下外部状态管理的最佳实践，优于 useEffect+useState。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"16-uselayouteffect-的理解与新老常用-hooks-总览"},"16. useLayoutEffect 的理解与新老常用 Hooks 总览"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"161-uselayouteffect-怎么理解"},"16.1 useLayoutEffect 怎么理解？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useLayoutEffect")," 是 React 的一个副作用 Hook，和 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useEffect")," 类似，但",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"它的回调会在 DOM 更新后、浏览器绘制前同步执行"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合需要",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同步读取布局、测量 DOM、强制同步修改 DOM"),"的场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果副作用只涉及数据、异步请求、订阅等，优先用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useEffect"),"，只有涉及 DOM 读写、布局测量时才用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useLayoutEffect"),"。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"执行时机对比：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useEffect"),"：DOM 更新后，浏览器绘制后（异步）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useLayoutEffect"),"：DOM 更新后，浏览器绘制前（同步）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"典型场景：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要测量 DOM 尺寸、位置（如获取 offsetWidth、getBoundingClientRect）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要同步修改 DOM 样式，防止闪烁。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要和第三方 DOM 库（如 D3、jQuery）集成。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useLayoutEffect, useRef } from 'react';\nfunction MyComponent() {\n  const ref = useRef();\n  useLayoutEffect(() => {\n    const width = ref.current.offsetWidth;\n    // 立即同步操作 DOM\n  }, []);\n  return <div ref={ref}>内容</div>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"162-react-18-及以前所有新老常用-hooks-总览"},"16.2 React 18 及以前所有新老常用 Hooks 总览"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Hook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"说明"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useState"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"组件状态管理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useEffect"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"副作用处理（异步，DOM 更新后执行）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useLayoutEffect"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"同步副作用（DOM 更新后、绘制前执行）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useRef"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"获取/存储 DOM 或任意可变值")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useContext"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"读取 React 上下文")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useReducer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂状态管理（类似 Redux reducer）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useCallback"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"缓存函数引用，避免不必要的子组件渲染")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useMemo"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"缓存计算结果，避免重复计算")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useImperativeHandle"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"暴露自定义 ref 给父组件")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useDebugValue"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"自定义 Hook 调试信息")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useId (React 18)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生成稳定唯一 id，适合 SSR/CSR 场景")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useTransition (18)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"并发特性，标记低优先级 UI 更新，返回 isPending 状态")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useDeferredValue (18)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"并发特性，延迟渲染低优先级值")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useSyncExternalStore(18)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"并发安全订阅外部 store，适合 Redux/MobX 等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useInsertionEffect (18)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"在 DOM 插入前同步注入样式，适合 CSS-in-JS")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"17-usetransition-与-usedeferredvalue-的实现原理与区别"},"17. useTransition 与 useDeferredValue 的实现原理与区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"171-usetransition-实现原理"},"17.1 useTransition 实现原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'本质是利用 React 并发调度（Fiber + Scheduler），将 startTransition 包裹的 state 更新标记为"Transition Lane"（低优先级）。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"当调用 startTransition 时，内部会：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"将回调内的 setState/update 操作分配到 transition 车道（Lane），优先级低于用户输入、点击等高优先级任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果有高优先级任务到来，transition 任务会被中断，等主线程空闲时再恢复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"isPending 状态由调度器根据 transition 任务是否完成自动维护。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这样可以保证主交互（如输入）流畅，低优先级任务不会阻塞高优先级任务。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"172-usedeferredvalue-实现原理"},"17.2 useDeferredValue 实现原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"本质是将传入的值（如 input、props）在内部用 transition 车道（Lane）延迟更新。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"当主 UI 更新后，deferredValue 会在主线程空闲时再同步到最新值。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 内部会比较当前值和 deferredValue，如果不同，则在低优先级任务中更新 deferredValue。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合 prop 传递、单值场景的延迟渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"173-区别与适用场景"},"17.3 区别与适用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"对比项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"useTransition"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"useDeferredValue"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"标记一组 state 更新为低优先级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},'延迟某个"值"的渲染')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"返回 isPending 和 startTransition"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"返回延迟后的值")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"适用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"需要批量延后一组更新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"只需延后某个 prop/值的渲染")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"控制粒度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"代码块级别（startTransition 包裹）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"值级别（deferredValue）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"loading 状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"有 isPending 可用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"没有 isPending，需自行判断")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"174-总结"},"17.4 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useTransition"),"：通过 startTransition 包裹一组低优先级更新，适合复杂交互、批量延后。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useDeferredValue"),"：延迟某个值的渲染，适合 prop 传递、单值场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"两者底层都依赖 React 18 的并发调度和 Lane 优先级机制。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"18-更好的-ssr-支持流式渲染渐进式水合详解"},"18. 更好的 SSR 支持（流式渲染、渐进式水合）详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"181-传统-ssr-的问题"},"18.1 传统 SSR 的问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'传统 SSR：服务端一次性渲染完整 HTML，客户端再整体"水合"（hydrate）成可交互的 React 应用。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"问题：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户必须等所有数据和 HTML 渲染完，页面才能显示，首屏时间长。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"页面大、数据多时，白屏时间明显。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'水合过程是"全量同步"，大页面会卡顿。')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"182-react-18-的流式渲染streaming-ssr"},"18.2 React 18 的流式渲染（Streaming SSR）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'原理：服务端将 HTML 以"流"的方式一块块发送到浏览器，边生成边发送，浏览器边收到边渲染。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户能更快看到页面内容（首屏更快）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"后端可以优先渲染关键内容，次要内容后续补充。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 Suspense，异步数据加载时可优雅降级。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键 API：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"renderToPipeableStream"),"（Node.js）、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"renderToReadableStream"),"（Web Streams API）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Node.js 流式 SSR 示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { renderToPipeableStream } from 'react-dom/server';\nimport express from 'express';\nimport App from './App';\n\nconst app = express();\n\napp.get('*', (req, res) => {\n  const { pipe } = renderToPipeableStream(<App />, {\n    onShellReady() {\n      res.setHeader('content-type', 'text/html');\n      pipe(res); // 直接把 HTML 流写入响应\n    },\n    onError(err) {\n      res.status(500).send('Server Error');\n    }\n  });\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"183-渐进式水合progressiveselective-hydration"},"18.3 渐进式水合（Progressive/Selective Hydration）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原理：不是一次性让整个页面变为可交互，而是按需、分块地水合。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"浏览器优先水合用户可见、关键区域，其他区域等用户滚动到、交互时再水合。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 Suspense，异步组件/数据加载完再水合对应区域。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"首屏可交互更快，减少主线程阻塞。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"大页面、复杂页面水合更平滑，用户体验更好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'支持"Skeleton + 真正内容"渐进替换。')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Suspense + 流式 SSR + 渐进水合示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { Suspense } from 'react';\n\nfunction Page() {\n  return (\n    <div>\n      <Header />\n      <Suspense fallback={<SkeletonList />}>\n        <AsyncList />\n      </Suspense>\n      <Footer />\n    </div>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Header/Footer 会先渲染和水合，AsyncList 等数据准备好后再渲染和水合。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"184-关键原理与机制"},"18.4 关键原理与机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"流式渲染：服务端边生成边发送 HTML，浏览器边收到边渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Suspense on SSR：支持异步数据/组件的占位和流式补全。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"渐进式水合：客户端按需、分块地让页面变为可交互，优先关键区域。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"185-总结"},"18.5 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 18 的流式渲染和渐进式水合极大提升了 SSR 首屏速度和大页面体验。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 Suspense、异步数据、Skeleton 等现代 Web 体验。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'让 SSR 页面"秒开可见、逐步可交互"，是企业级 Web 性能优化的利器。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React18",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/React19.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React19",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-192025新特性与升级详解"},"React 19（2025）新特性与升级详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-性能与架构革新"},"1. 性能与架构革新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"11-并发渲染默认开启"},"1.1 并发渲染默认开启"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"并发渲染"),"（Concurrent Rendering）成为默认模式，React 能自动调度高优先级任务，提升大规模应用的响应速度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const [isPending, startTransition] = useTransition();\nconst handleClick = () => {\n  startTransition(() => {\n    setLargeData(items);\n  });\n};\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"12-server-components--server-actions"},"1.2 Server Components & Server Actions"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Server Components")," 支持直接在服务端渲染部分组件，减少客户端 JS 体积，提升首屏速度和 SEO。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Server Actions")," 允许客户端直接调用服务端函数，无需自建 API 路由。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},'// actions.js\n\'use server\';\nexport async function createTodo(data) { /* ... */ }\n\n// TodoList.jsx\n"use client";\nimport { createTodo } from \'./actions\';\nexport default function TodoList() {\n  return (\n    <form action={createTodo}>\n      <input name="item" />\n      <button type="submit">Add</button>\n    </form>\n  );\n}\n')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"13-react-compiler"},"1.3 React Compiler"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React Compiler")," 自动优化组件、消除冗余渲染，减少对 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useMemo"),"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useCallback")," 的依赖，提升构建和运行效率。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-新增与升级的-hooks"},"2. 新增与升级的 Hooks"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-useactionstate"},"2.1 useActionState"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用于管理异步操作的状态（如表单提交），自动追踪 pending、error 等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},'const [error, submitAction, isPending] = useActionState(\n  async (_, newName) => await updateName(newName), null\n);\nreturn (\n  <form onSubmit={submitAction}>\n    <input />\n    <button disabled={isPending}>{isPending ? "Saving..." : "Save"}</button>\n    {error && <p>{error}</p>}\n  </form>\n);\n')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-useoptimistic"},"2.2 useOptimistic"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'实现乐观 UI 更新，异步操作未完成前先"假装"数据已变。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const [optimisticValue, setOptimisticValue] = useOptimistic(value);\n// setOptimisticValue(newValue) 立即让 UI 反映新值\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-useformstatus"},"2.3 useFormStatus"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"子组件可直接获取父表单的提交状态，无需层层传递。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { useFormStatus } from 'react-dom';\nfunction SubmitButton() {\n  const { pending } = useFormStatus();\n  return <button disabled={pending}>提交</button>;\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"24-useevent"},"2.4 useEvent"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件回调引用始终稳定，彻底解决闭包陷阱，无需 useCallback。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { useEvent } from 'react';\nconst handleClick = useEvent(() => { ... });\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"25-usedeferred"},"2.5 useDeferred"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"延迟非关键状态更新，提升交互流畅度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const [value, setValue] = useDeferred('');\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-suspense-与数据流优化"},"3. Suspense 与数据流优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"31-suspense-全面升级"},"3.1 Suspense 全面升级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持更强的异步数据流、流式 SSR、自动 fallback 输出。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"<Suspense fallback={<Loading />}>\n  <DataComponent />\n</Suspense>\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"32-新的-use-api"},"3.2 新的 use API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"直接在渲染函数中读取 Promise 或 context，简化异步数据获取。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"function User() {\n  const user = use(fetchUser());\n  return <div>{user.name}</div>;\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-表单与状态管理革新"},"4. 表单与状态管理革新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"41-actions-简化表单处理"},"4.1 Actions 简化表单处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<form action={fn}>")," 直接绑定服务端/客户端异步操作，自动管理 pending、error、乐观 UI。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},'<form action={submitAction}>\n  <input name="name" />\n  <button type="submit">提交</button>\n</form>\n')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"42-useformstatus-实时反馈"},"4.2 useFormStatus 实时反馈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'子组件可感知表单状态，便于实现"提交中"禁用、错误提示等。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-refcontext元数据等基础能力升级"},"5. Ref、Context、元数据等基础能力升级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"51-ref-作为-prop-传递"},"5.1 Ref 作为 Prop 传递"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"函数组件可直接接收 ref，无需 forwardRef，简化代码。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"function MyInput({ ref, ...props }) {\n  return <input ref={ref} {...props} />;\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"52-ref-支持清理函数"},"5.2 Ref 支持清理函数"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ref 回调可返回清理函数，组件卸载时自动调用，防止内存泄漏。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"53-context-直接作为-provider"},"5.3 Context 直接作为 Provider"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},'<Context value="xxx">')," 直接作为 Provider，无需 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<Context.Provider>"),"。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"54-内置文档元数据样式异步脚本资源预加载支持"},"5.4 内置文档元数据、样式、异步脚本、资源预加载支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<DocumentHead>")," 组件，声明式管理 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<title>"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<meta>")," 等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持样式表、异步脚本、资源预加载，提升 SEO 和性能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-错误边界与-devtools"},"6. 错误边界与 DevTools"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"错误边界（ErrorBoundary）增强，支持更细粒度的错误捕获与恢复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"DevTools 支持更强的性能分析、组件高亮、Owner Stack 调试等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-兼容性与迁移"},"7. 兼容性与迁移"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"绝大多数 API 向下兼容，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"forwardRef"),"、旧生命周期方法等依然可用，但建议逐步迁移到新模式。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TypeScript 支持更完善，类型推断更智能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-典型升级场景与最佳实践"},"8. 典型升级场景与最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"大表单、复杂交互"),"：用 useActionState、useFormStatus、Actions 简化状态管理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高性能数据展示"),"：用并发渲染、Suspense、Server Components 优化首屏和交互。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SEO/SSR 场景"),"：用 Server Components、DocumentHead、流式 SSR 提升爬虫友好度和首屏速度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"事件与副作用"),"：用 useEvent、useOptimistic、useDeferred 提升代码健壮性和用户体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"react-19-vs-react-18-场景对比与原理解析"},"React 19 vs React 18 场景对比与原理解析"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-大表单复杂交互"},"1. 大表单、复杂交互"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-18"},"React 18"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"状态管理"),"：主要依赖 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useState"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useReducer"),"，异步操作需手动管理 loading/error 状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"表单提交"),"：需自定义事件处理、状态追踪，代码冗长。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"表单嵌套组件"),"：状态需通过 props 层层传递，难以复用。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-19"},"React 19"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useActionState"),"：封装异步操作，自动追踪 pending/error，简化表单/交互逻辑。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useFormStatus"),"：子组件可直接感知父表单状态，无需 props drilling。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Actions"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<form action={fn}>")," 直接绑定异步/服务端操作，自动管理 optimistic UI、pending/error。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：React 19 在底层为表单和异步操作引入了统一的状态通道（context-like），并结合并发调度，自动处理表单状态流转和副作用。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-高性能数据展示"},"2. 高性能数据展示"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-18-1"},"React 18"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"并发渲染"),"：需显式用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"createRoot")," 和 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useTransition"),'，并发特性为"可选"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Suspense"),"：仅支持懒加载组件，数据 Suspense 需配合实验性 API。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Server Components"),"：仅 Next.js 等框架实验性支持。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-19-1"},"React 19"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"并发渲染"),"：默认开启，无需显式配置，所有更新自动并发调度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Suspense"),"：全面支持异步数据流、流式 SSR，fallback 自动流式输出。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Server Components"),"：官方稳定支持，服务端渲染与客户端无缝协作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：React 19 的调度器（Scheduler）升级，所有渲染任务自动分级、可中断。Server Components 通过分层渲染和流式传输，极大提升首屏和交互性能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-seossr-场景"},"3. SEO/SSR 场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-18-2"},"React 18"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SSR"),"：支持流式 SSR（",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"renderToPipeableStream"),"），但 Suspense/Server Components 体验有限。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"元数据管理"),"：需第三方库（如 react-helmet）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SEO 友好度"),"：Server Components/DocumentHead 不完善。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-19-2"},"React 19"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Server Components"),"：官方支持，服务端渲染更彻底，减少 JS 体积。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"DocumentHead"),"：内置元数据声明式管理，提升 SEO。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"流式 SSR"),"：与 Suspense/Server Components 深度集成，首屏更快，爬虫更友好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：React 19 SSR 支持异步分片、流式传输，DocumentHead 通过上下文自动聚合元数据，Server Components 只传递 HTML，无 JS 负担。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-事件与副作用"},"4. 事件与副作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-18-3"},"React 18"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"事件回调"),"：需用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useCallback")," 保证引用稳定，闭包陷阱多。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"乐观 UI"),"：需手动实现，状态回滚复杂。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"副作用调度"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useEffect"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useLayoutEffect"),"，无优先级/延迟机制。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react-19-3"},"React 19"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useEvent"),"：事件回调引用始终稳定，无需 useCallback，彻底解决闭包问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useOptimistic"),"：一行代码实现乐观 UI，自动回滚/同步。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useDeferred"),"：延迟非关键状态更新，提升交互流畅度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),'：useEvent 通过底层"事件上下文"绑定最新闭包，useOptimistic/useDeferred 利用并发调度和状态快照，自动管理 UI 状态与回滚。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"副作用调度升级与示例"},"副作用调度升级与示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"React 18 及以前：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"主要依赖 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useEffect"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useLayoutEffect"),"，所有副作用在渲染后统一批量执行，无优先级区分。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"没有内置延迟/分阶段调度机制，副作用一旦触发就会尽快执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'在并发渲染下，副作用可能会被多次触发或"撕裂"，需手动规避。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"React 19：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内部为副作用分配不同优先级（如输入、动画、网络请求等），高优先级副作用优先调度，低优先级可延迟或批量处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持副作用延迟与可中断，结合并发渲染，副作用可在主线程空闲或更合适时机再执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useDeferred"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useTransition"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useOptimistic")," 等 Hook，底层基于优先级和延迟调度机制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'自动避免"撕裂"现象，副作用与最新 UI 状态同步。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"典型代码对比：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("em",{parentName:"p"},"React 18：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"useEffect(() => {\n  // 立即执行副作用\n}, [deps]);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("em",{parentName:"p"},"React 19：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const [value, setValue] = useDeferred('');\nuseEffect(() => {\n  // 该副作用会被自动延迟，等到主线程空闲时再执行\n}, [value]);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"或结合 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"useTransition"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const [isPending, startTransition] = useTransition();\nfunction handleChange(next) {\n  startTransition(() => {\n    setValue(next); // 相关副作用会被延迟\n  });\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 19 的副作用调度更智能，能自动分级、延迟、批量处理副作用，提升复杂交互和高性能场景下的体验和健壮性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"开发者无需手动管理副作用优先级，大部分场景下只需用新 Hook 即可享受自动优化。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 19")," 在这些场景下，核心升级在于",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化、声明式、并发化"),"，极大减少手工状态管理、事件处理和副作用调度的复杂度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理"),"：底层依赖全新的调度器、上下文通道、Server Components 协议和流式渲染机制，带来更高性能和更好开发体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一场景的源码级分析或迁移建议，可进一步说明！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-参考资料"},"9. 参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/",target:"_blank",rel:"nofollow noopener noreferrer"},"React 19 官方文档")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://www.geeksforgeeks.org/react-19-new-features-and-updates/",target:"_blank",rel:"nofollow noopener noreferrer"},"React 19 新特性解读（GFG）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://medium.com/@onix_react/whats-new-in-react-19-1-0-d87dda0905a9",target:"_blank",rel:"nofollow noopener noreferrer"},"React 19.1.0 更新说明")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://amireds.medium.com/not-using-react-19-yet-heres-what-youre-missing-478fa2008190",target:"_blank",rel:"nofollow noopener noreferrer"},"React 19 深度解析"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需更细致的某一特性源码分析、最佳实践或迁移建议，可随时补充说明！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-19-新特性与升级亮点"},"React 19 新特性与升级亮点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"截至 2024 年 6 月，React 19 仍处于 RC（Release Candidate）阶段，以下内容基于官方发布说明与社区总结。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-新的-useoptimistic-hook"},"1. 新的 useOptimistic Hook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),'：用于实现乐观 UI 更新（Optimistic UI），即在异步操作完成前，先"假装"数据已更新，提升用户体验。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"用法示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const [optimisticValue, setOptimisticValue] = useOptimistic(value);\n// setOptimisticValue(newValue) 可立即让 UI 反映新值，异步完成后自动同步\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),'：表单提交、点赞、评论等需要"秒回显"的场景。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-useformstatususeformstate表单新特性"},"2. useFormStatus/useFormState（表单新特性）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),"：配合 React Server Actions，简化表单状态管理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优势"),"：可直接获取表单提交状态、错误、pending 等，无需手写繁琐逻辑。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"用法示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useFormStatus } from 'react-dom';\nfunction SubmitButton() {\n  const { pending } = useFormStatus();\n  return <button disabled={pending}>提交</button>;\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-actionsserver-actions"},"3. Actions（Server Actions）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),"：支持直接在服务端定义和调用异步操作（如数据库写入、鉴权等），前端可直接调用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优势"),"：极大简化前后端通信，提升安全性和开发效率。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"用法示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"'use server';\nexport async function createPost(data) {\n  // 直接在服务端操作数据库\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-新的-use事件useevent"},"4. 新的 use事件（useEvent）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),"：提供稳定的事件回调引用，避免因闭包导致的性能问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优势"),"：无需 useCallback，事件处理函数始终稳定。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"用法示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useEvent } from 'react';\nconst handleClick = useEvent(() => { ... });\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-新的-suspense-ssr-行为"},"5. 新的 Suspense SSR 行为"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"改进"),"：Suspense fallback 现在在 SSR 时会被自动流式输出，提升首屏体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-新的文档与警告提示"},"6. 新的文档与警告提示"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更好的开发体验"),"：错误提示、警告、文档全面升级。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-其他改进"},"7. 其他改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更好的 TypeScript 支持。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React Server Components 继续完善。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能优化、包体积减小。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-与-react-18-及以前的优点对比"},"8. 与 React 18 及以前的优点对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开发体验更好"),"：表单、事件、乐观 UI 等场景更简单。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能更优"),"：SSR、Suspense、Server Actions 等提升大规模应用性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"更强的服务端能力"),"：Server Actions、RSC 让前后端一体化开发更高效。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-参考资料-1"},"9. 参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/blog/2024/04/25/react-v19-rc",target:"_blank",rel:"nofollow noopener noreferrer"},"React 19 官方发布说明")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/learn/upgrading-to-react-19",target:"_blank",rel:"nofollow noopener noreferrer"},"React 19 新特性解读"))))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React19",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/domDiff.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React 的 DOM Diff 算法",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-的-dom-diff-算法"},"React 的 DOM Diff 算法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-什么是-dom-diff"},"1. 什么是 DOM Diff？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"DOM Diff 是 React 中用于比较两个虚拟 DOM 树的算法。它通过比较新旧两个虚拟 DOM 树，找出需要更新的节点，并最小化 DOM 操作，从而提高性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-如何实现-dom-diff"},"2. 如何实现 DOM Diff？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-dom-diff-的核心思想"},"3. DOM Diff 的核心思想"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"虚拟 DOM"),"：React 维护一棵虚拟 DOM 树，每次状态变更时生成新的虚拟 DOM。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高效对比"),"：通过高效的 diff 算法，找出新旧虚拟 DOM 树的差异，最小化真实 DOM 的操作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分层比较"),"：React 假设同一层级的节点才有可能相互比较，不跨层级 diff。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-react-dom-diff-的三大策略"},"4. React DOM Diff 的三大策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同层比较"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只比较同一层级的节点，不跨层级对比。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"通过 key 优化列表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"列表 diff 时，优先用 key 标识唯一性，提升重用和移动节点的效率。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"类型不同直接替换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果节点类型不同（如 div 变成 span），直接销毁旧节点，创建新节点，不做深度递归。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-算法流程简化版"},"5. 算法流程（简化版）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"从根节点开始递归"),"，逐层比较新旧虚拟 DOM 树：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"类型相同：递归比较子节点和属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"类型不同：直接替换整个节点。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"对子节点列表进行 diff"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"先按索引顺序遍历，能复用的直接复用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果遇到 key，构建 key->节点的映射表，优化节点的插入、移动和删除。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最小化 DOM 操作"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只对有差异的部分进行插入、删除、移动和属性更新。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-列表-diff-的关键优化"},"6. 列表 diff 的关键优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"key 的作用"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"唯一标识每个子节点，帮助 React 精确判断节点的复用、移动和删除。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"没有 key 或 key 不唯一时，React 只能按索引顺序比较，可能导致不必要的 DOM 操作。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"移动节点的最小操作"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 会尝试最小化节点的移动次数，提升性能。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-算法复杂度"},"7. 算法复杂度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"理论上，最优的树 diff 复杂度是 O(n^3)，但 React 通过分层和 key 优化，将复杂度降为 O(n)。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这也是 React diff 算法高效的核心原因。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-局限性与注意事项"},"8. 局限性与注意事项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"跨层级移动"),"：React 不支持跨层级节点的 diff，遇到类型或层级变化会直接销毁重建。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"key 的选择"),"：建议用业务唯一 id 作为 key，避免用索引。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能陷阱"),"：key 不唯一或频繁变动会导致性能下降。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-最佳实践"},"9. 最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"为列表组件的每个子元素指定稳定且唯一的 key。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"避免频繁改变 key 或用索引作为 key。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件结构设计时，尽量减少跨层级的结构变动。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-参考资料"},"10. 参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/reference/react/Children#reconciliation",target:"_blank",rel:"nofollow noopener noreferrer"},"React 官方文档：Reconciliation")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.iamkasong.com/process/reconciler.html",target:"_blank",rel:"nofollow noopener noreferrer"},"React 源码解析：DOM Diff 算法")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://juejin.cn/post/6844904067784628232",target:"_blank",rel:"nofollow noopener noreferrer"},"深入理解 React 的 Diff 算法"))))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React 的 DOM Diff 算法",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/event.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React合成事件",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-合成事件详解与版本演进对比"},"React 合成事件详解与版本演进对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-react-合成事件是什么"},"1. React 合成事件是什么？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"定义"),"：React 合成事件（SyntheticEvent）是对原生 DOM 事件的封装，提供跨浏览器一致的事件对象和事件系统。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"机制"),"：React 在组件挂载时，会在根节点（如 document、container）注册统一的事件监听器，所有子组件事件都通过事件委托（event delegation）机制冒泡到根节点，由 React 统一分发。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优势"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"跨浏览器兼容性好，API 一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能优，减少事件监听器数量。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件池（event pooling）、阻止默认、冒泡、捕获等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可统一管理事件优先级、批量更新等。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-合成事件的底层原理"},"2. 合成事件的底层原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 维护一个事件注册表，所有 onClick/onChange 等事件都注册到根节点。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件触发时，React 构造 SyntheticEvent 对象，模拟原生事件 API。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件冒泡/捕获、stopPropagation、preventDefault 等都由 React 控制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件处理函数在 React 的批量更新机制下执行，保证 setState 等操作的高效。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-版本演进对比"},"3. 版本演进对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-15-及以前"},"React 15 及以前"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件委托到 document，所有事件监听器都挂载在 document 上。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SyntheticEvent 对象有事件池（event pooling），事件回调后属性会被清空，需异步访问时调用 event.persist()。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件冒泡顺序与原生 DOM 不完全一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-16"},"React 16"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件委托仍在 document。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持异步渲染（Fiber 架构），但事件系统基本未变。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件池机制依然存在。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-17"},"React 17"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"重大变更：事件委托从 document 移到 React 根容器（container）"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多个 React 应用共存，事件不会全局污染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件冒泡顺序与原生 DOM 完全一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"移除事件池（event pooling），SyntheticEvent 属性可安全异步访问。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持捕获/冒泡阶段监听，onClickCapture/onClick。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持原生事件监听与合成事件共存。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-18"},"React 18"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件委托机制与 17 保持一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持并发特性（Concurrent Mode），事件处理可被中断、优先级调度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"批量更新机制更智能，自动合并 setState。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"useEvent 等新 Hook 支持事件回调引用稳定。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-19"},"React 19"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件系统进一步与并发调度、优先级系统深度集成。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 useEvent 等新 API，彻底解决闭包陷阱，事件回调始终稳定。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件系统更易扩展，支持自定义事件优先级、批量处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件捕获/冒泡、原生/合成事件协作更完善。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-典型代码示例"},"4. 典型代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"function Demo() {\n  function handleClick(e) {\n    console.log(e.type); // SyntheticEvent\n    setTimeout(() => {\n      // React 17+ 可安全访问 e\n      console.log(e.target);\n    });\n  }\n  return <button onClick={handleClick}>Click</button>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-总结"},"5. 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 合成事件为跨浏览器、批量更新、性能优化和一致性提供了基础。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"17 之后事件委托更安全，事件池被移除，事件系统与并发调度深度融合。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"19 进一步提升事件回调稳定性和优先级控制。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需源码级分析或事件系统最佳实践，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React合成事件",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/fiber.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React-Fiber",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-fiber-详解"},"React Fiber 详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-fiber-的设计动机"},"1. Fiber 的设计动机"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决 React 15 及以前 Stack Reconciler 的同步递归、无法中断、卡顿等问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持异步渲染、优先级调度、任务分片、动画流畅、响应用户交互。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"为未来特性（如 Suspense、Concurrent Mode、时间分片）打基础。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-fiber-的核心概念"},"2. Fiber 的核心概念"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Fiber"),"：React 16 引入的核心数据结构，本质是一个 JS 对象，表示虚拟 DOM 树中的一个节点。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Fiber Tree"),"：由 Fiber 节点组成的树，映射组件树结构。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Work Loop"),"：调度和执行 Fiber 节点的主循环。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"任务分片"),"：将渲染任务拆分为小单元，允许中断和恢复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优先级（Lane）"),"：不同任务可分配不同优先级，保证高优先级任务先执行。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-fiber-数据结构"},"3. Fiber 数据结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"每个 Fiber 节点包含："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"type"),"：组件类型（函数/类/原生标签）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"key"),"：唯一标识"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"child"),"：第一个子 Fiber"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"sibling"),"：下一个兄弟 Fiber"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"return"),"：父 Fiber"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"stateNode"),"：对应的真实 DOM 或组件实例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pendingProps"),"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"memoizedProps"),"：新旧 props"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"memoizedState"),"：state"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"effectTag"),"：副作用类型（插入、更新、删除等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"alternate"),"：指向上一次的 Fiber（双缓存）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-fiber-的调度流程"},"4. Fiber 的调度流程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"调度入口"),"：如 setState、props 变化、事件触发。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"任务入队"),"：根据优先级插入任务队列。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Work Loop"),"：遍历 Fiber Tree，执行 beginWork、completeWork。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"可中断"),"：每处理一定量的 Fiber 节点，判断是否需要让出主线程（如有高优先级任务或空闲时间用尽）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"提交阶段"),"：所有变更收集完毕后，统一提交到真实 DOM。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-fiber-的优先级与调度"},"5. Fiber 的优先级与调度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Lane（车道）模型"),"：每个任务分配不同 Lane，优先级高的 Lane 先执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"调度器（Scheduler）"),"：负责任务优先级排序、时间切片、任务中断与恢复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步渲染"),"：低优先级任务可被高优先级任务中断，保证交互流畅。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-fiber-的异步可中断渲染"},"6. Fiber 的异步可中断渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过 requestIdleCallback 或 Scheduler，React 可以在浏览器空闲时分批处理 Fiber 节点。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"渲染过程可被打断、恢复，避免长时间阻塞主线程。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持时间分片（Time Slicing）、并发特性（Concurrent Mode）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-fiber-与-stack-reconciler-的区别"},"7. Fiber 与 Stack Reconciler 的区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"对比项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Stack Reconciler（React 15及以前）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Fiber Reconciler（React 16+）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"数据结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"递归调用栈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"单链表 Fiber Tree")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"渲染方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"同步递归，无法中断"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"可中断、可恢复")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"优先级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"多优先级 Lane")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"任务分片"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"并发/异步"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"新特性支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"受限"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持 Suspense、Concurrent 等")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-fiber-源码结构简要"},"8. Fiber 源码结构（简要）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiber"),"：定义 Fiber 节点结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiberWorkLoop"),"：调度主循环"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiberReconciler"),"：协调与 diff"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiberLane"),"：优先级模型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiberCommitWork"),"：提交变更"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Scheduler"),"：任务调度与时间切片")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-fiber-的最佳实践"},"9. Fiber 的最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"合理使用 key，减少不必要的 diff。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"利用 Suspense、Concurrent Mode 提升大列表、动画等场景的流畅度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"避免在渲染中执行重计算，利用 memo、useMemo、useCallback 优化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注高优先级任务（如用户输入、动画），避免低优先级任务阻塞。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-参考资料"},"10. 参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.dev/learn/react-fiber-architecture",target:"_blank",rel:"nofollow noopener noreferrer"},"React 官方文档：Fiber 架构")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://react.iamkasong.com/architecture/fiber.html",target:"_blank",rel:"nofollow noopener noreferrer"},"React 源码解析：Fiber")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://juejin.cn/post/6844903929705136141",target:"_blank",rel:"nofollow noopener noreferrer"},"深入理解 React Fiber")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://github.com/acdlite/react-fiber-architecture",target:"_blank",rel:"nofollow noopener noreferrer"},"React Fiber 源码解读"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"11-fiber-的同步任务与异步任务调度机制详解"},"11. Fiber 的同步任务与异步任务、调度机制详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-fiber-的任务类型"},"1. Fiber 的任务类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"同步任务（Synchronous Task）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"最高优先级，必须立即执行，不能被中断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型场景：初次渲染、用户输入（如 onClick）、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useLayoutEffect"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"flushSync"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"直接在当前事件循环内完成所有 Fiber 节点的遍历和提交。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"异步任务（Concurrent/Async Task）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可以被中断、分片执行，优先级较低。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型场景：数据请求、动画、低优先级的状态更新、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"startTransition"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"利用时间分片（Time Slicing），在浏览器空闲时分批处理 Fiber 节点，允许高优先级任务插队。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-fiber-的调度机制"},"2. Fiber 的调度机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"21-lane车道优先级模型"},"2.1 Lane（车道）优先级模型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fiber 通过 Lane（车道）模型为每个任务分配优先级。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常见 Lane（优先级从高到低）：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SyncLane"),"：同步任务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"InputContinuousLane"),"：用户输入"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"DefaultLane"),"：普通异步任务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"TransitionLane"),"：过渡/动画"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"IdleLane"),"：空闲任务")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"22-调度器scheduler"},"2.2 调度器（Scheduler）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 内部有一个 Scheduler（调度器），负责：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"任务入队、优先级排序"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"判断是否让出主线程（如有高优先级任务到来）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"时间切片（Time Slicing）：每处理一批 Fiber 节点就检查是否需要中断")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"23-调度流程"},"2.3 调度流程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"任务入队"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("br",{parentName:"li"}),"任何 setState、props 变化、事件等都会生成一个更新任务，分配 Lane。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优先级判断"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("br",{parentName:"li"}),"Scheduler 检查当前是否有更高优先级任务需要插队。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同步任务处理"),"  ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SyncLane 任务会立即遍历 Fiber Tree，不能被中断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型如 flushSync、生命周期钩子、用户输入。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步任务处理"),"  ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"低优先级任务会被分片处理（如 startTransition），每次只处理一部分 Fiber 节点。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果主线程空闲时间用尽或有高优先级任务到来，当前任务会被中断，稍后恢复。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"利用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"requestIdleCallback")," 或自研 Scheduler 实现时间切片。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"提交阶段"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("br",{parentName:"li"}),"所有变更收集完毕后，统一提交到真实 DOM（commit phase），此阶段是同步的，不能被中断。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-代码示例与场景"},"3. 代码示例与场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { flushSync, startTransition } from 'react-dom';\n\n// 同步任务\nflushSync(() => {\n  setState(...); // 立即同步更新\n});\n\n// 异步任务（可中断）\nstartTransition(() => {\n  setState(...); // 低优先级，异步批量更新\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-调度优化与优势"},"4. 调度优化与优势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高优先级任务（如用户输入）可随时打断低优先级任务，保证交互流畅。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"低优先级任务分片执行，避免长时间阻塞主线程，提升动画和大列表渲染性能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"所有提交（commit）阶段操作都是同步的，保证 DOM 一致性。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-总结"},"5. 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fiber 通过 Lane 优先级和 Scheduler 调度，实现了同步任务（不可中断）和异步任务（可中断、分片）的灵活调度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这让 React 能够兼顾高性能渲染和流畅的用户体验，是现代前端框架的核心创新之一。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"12-fiber-scheduler-如何处理同步任务微任务同步宏任务异步宏任务"},"12. Fiber Scheduler 如何处理同步任务、微任务、同步宏任务、异步宏任务？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-任务类型与调度优先级"},"1. 任务类型与调度优先级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"同步任务（Synchronous Task）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"最高优先级，立即执行，不能被中断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型如 flushSync、用户输入、生命周期钩子。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"直接在当前事件循环（宏任务）内完成所有 Fiber 节点的遍历和提交。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"微任务（Microtask）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如 Promise.then、queueMicrotask。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React Fiber 的调度器不会把渲染任务放入微任务队列，而是用微任务（如 MessageChannel）来实现高精度的调度切片。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微任务用于调度器自身的调度实现，而不是 Fiber 渲染任务本身。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"同步宏任务（Synchronous Macrotask）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如 setTimeout、setInterval、DOM 事件回调。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fiber 的同步任务会在当前宏任务内立即执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果在宏任务内触发了 setState，且是同步优先级，会立即遍历 Fiber Tree 并提交。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"异步宏任务（Asynchronous Macrotask）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"低优先级任务（如 startTransition、动画、空闲渲染）会被分片处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"调度器会用 MessageChannel（或降级 setTimeout）将任务切片，分批插入到后续宏任务中。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每次切片只处理一部分 Fiber 节点，主线程空闲时继续处理，遇到高优先级任务可随时中断。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-调度原理与任务插队"},"2. 调度原理与任务插队"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优先级调度"),"：所有任务根据 Lane 优先级排序，高优先级任务（如同步任务、用户输入）可随时插队，打断低优先级任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"时间切片"),"：异步任务分片执行，每次只处理部分 Fiber 节点，避免长时间阻塞主线程。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"任务恢复"),"：被中断的任务会被重新入队，等主线程空闲时继续执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"提交阶段"),"：所有变更收集完毕后，统一同步提交到 DOM，保证一致性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-典型流程示意"},"3. 典型流程示意"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"用户触发 setState（同步任务）",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"立即遍历 Fiber Tree，不能被中断。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"用户触发 startTransition（异步任务）",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"任务被分片，主线程空闲时分批处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果有高优先级任务到来，当前任务被中断，稍后恢复。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"调度器内部用 MessageChannel（微任务）高效调度切片，保证任务及时切换。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-总结"},"4. 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同步任务"),"：立即执行，不能中断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"微任务"),"：用于调度器自身的调度实现，不直接承载 Fiber 渲染任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同步宏任务"),"：Fiber 的同步任务会在当前宏任务内完成。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步宏任务"),"：Fiber 的异步任务会被分片，分批插入到后续宏任务中，主线程空闲时继续处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优先级调度"),"：高优先级任务可随时插队，低优先级任务分片执行，提升整体性能和响应性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"13-fiber-同步任务的源码分析与调度流程图"},"13. Fiber 同步任务的源码分析与调度流程图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-同步任务调度源码分析"},"1. 同步任务调度源码分析"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"React Fiber 的同步任务调度核心在于："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"最高优先级（SyncLane），必须立即、完整地执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"相关源码主要在 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiberWorkLoop.js")," 和 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ReactFiberLane.js"),"。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"关键源码片段（简化版）：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// ReactFiberWorkLoop.js\nfunction scheduleUpdateOnFiber(fiber, lane) {\n  // ...\n  if (lane === SyncLane) {\n    // 立即同步渲染\n    performSyncWorkOnRoot(root);\n  } else {\n    // 并发/异步调度\n    ensureRootIsScheduled(root);\n  }\n}\n\nfunction performSyncWorkOnRoot(root) {\n  // 递归遍历 Fiber Tree，完成所有更新\n  renderRootSync(root);\n  // 提交变更（commit phase）\n  commitRoot(root);\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可以看到，SyncLane 任务会直接调用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"performSyncWorkOnRoot"),"，同步递归遍历 Fiber 树并提交，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"不会被切片或中断"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"异步任务则会走 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ensureRootIsScheduled"),"，进入时间切片调度。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-调度流程图"},"2. 调度流程图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  A[同步任务触发（如flushSync/setState）] --\x3e B{当前有无同步任务在执行?}\n  B -- 没有 --\x3e C[立即遍历Fiber树，执行所有更新]\n  C --\x3e D[统一提交到DOM（commit phase）]\n  D --\x3e E[下一个同步任务（如有）]\n  B -- 有 --\x3e F[排队，等待当前同步任务完成后立即执行]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"流程说明："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每次同步任务触发，都会立即遍历 Fiber 树并提交。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"如果有多个同步任务，会顺序排队，依次完整执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"同步任务执行期间不会被切片或中断。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有异步任务才会被时间切片和中断。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"14-fiber-核心模块的调用流程详解"},"14. Fiber 核心模块的调用流程详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-主要模块职责"},"1. 主要模块职责"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiber"),"：定义 Fiber 节点的数据结构（单链表、双缓存等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberWorkLoop"),"：调度主循环，负责遍历和调度 Fiber 树（beginWork、completeWork）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberReconciler"),"：协调与 diff，负责新旧 Fiber 树的对比、生成变更。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberLane"),"：优先级模型，定义 Lane 及其调度规则。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberCommitWork"),"：提交变更，将 Fiber 的副作用应用到真实 DOM。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Scheduler"),"：任务调度与时间切片，负责任务优先级、切片、中断与恢复。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-调用流程高层级"},"2. 调用流程（高层级）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  A[setState/props 变化/事件触发] --\x3e B[Scheduler 任务入队]\n  B --\x3e C[ReactFiberLane 分配优先级 Lane]\n  C --\x3e D[ReactFiberWorkLoop 启动调度主循环]\n  D --\x3e E[ReactFiberReconciler 协调与 diff]\n  E --\x3e F[ReactFiberWorkLoop 递归遍历 Fiber Tree]\n  F --\x3e G[收集副作用 effectList]\n  G --\x3e H[ReactFiberCommitWork 提交变更到 DOM]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-详细流程说明"},"3. 详细流程说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"任务触发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户 setState、props 变化、事件等触发更新。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Scheduler 任务入队"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Scheduler 根据任务类型和优先级，将任务入队。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberLane 分配优先级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"根据任务紧急程度分配 Lane（SyncLane、TransitionLane 等）。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberWorkLoop 启动调度主循环"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"根据优先级，决定同步还是异步调度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"进入 beginWork/completeWork 阶段，递归遍历 Fiber Tree。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberReconciler 协调与 diff"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"对比新旧 Fiber 树，生成 effectList（副作用链表）。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberWorkLoop 递归遍历 Fiber Tree"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"处理每个 Fiber 节点，收集需要变更的节点。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"收集副作用 effectList"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"将所有需要插入、更新、删除的操作收集到 effectList。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberCommitWork 提交变更到 DOM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一执行 effectList，将变更应用到真实 DOM。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-关键调用关系"},"4. 关键调用关系"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Scheduler")," 负责任务调度、优先级、时间切片。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberWorkLoop")," 是主循环，驱动整个 Fiber Tree 的遍历和调度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberReconciler")," 在遍历过程中负责 diff 和生成副作用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberLane")," 决定任务的优先级和调度顺序。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ReactFiberCommitWork")," 负责最后的 DOM 操作。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"15-fiber-调度源码片段函数调用链调度动画与-fiber-和虚拟dom的关系"},"15. Fiber 调度源码片段、函数调用链、调度动画与 Fiber 和虚拟DOM的关系"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-fiber-调度核心源码片段"},"1. Fiber 调度核心源码片段"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 任务调度入口（Scheduler）\nfunction scheduleUpdateOnFiber(fiber, lane) {\n  // ...\n  if (lane === SyncLane) {\n    performSyncWorkOnRoot(root);\n  } else {\n    ensureRootIsScheduled(root);\n  }\n}\n\n// 主循环（ReactFiberWorkLoop）\nfunction workLoopSync() {\n  while (workInProgress !== null) {\n    performUnitOfWork(workInProgress);\n  }\n}\n\nfunction performUnitOfWork(unitOfWork) {\n  const next = beginWork(unitOfWork);\n  if (next === null) {\n    completeUnitOfWork(unitOfWork);\n  } else {\n    workInProgress = next;\n  }\n}\n\nfunction completeUnitOfWork(unitOfWork) {\n  // ...递归回溯，收集副作用\n}\n\n// 提交阶段（ReactFiberCommitWork）\nfunction commitRoot(root) {\n  // ...统一执行 effectList，将变更应用到 DOM\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-具体函数调用链简化版"},"2. 具体函数调用链（简化版）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-text"},"scheduleUpdateOnFiber\n  └─ performSyncWorkOnRoot / ensureRootIsScheduled\n      └─ workLoopSync / workLoopConcurrent\n          └─ performUnitOfWork\n              └─ beginWork\n                  └─ completeUnitOfWork\n                      └─ commitRoot\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-调度动画流程图"},"3. 调度动画（流程图）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  A[任务触发（setState/props变更）] --\x3e B[Scheduler 分配优先级]\n  B --\x3e C[workLoop（同步/异步）]\n  C --\x3e D[beginWork（递归构建子Fiber）]\n  D --\x3e E[completeUnitOfWork（回溯收集副作用）]\n  E --\x3e F[effectList（副作用链表）]\n  F --\x3e G[commitRoot（统一提交到DOM）]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-fiber-与虚拟dom的关系"},"4. Fiber 与虚拟DOM的关系"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"虚拟DOM（Virtual DOM）"),"：是 React 组件树的轻量 JS 对象描述，描述 UI 结构和属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Fiber"),'：是虚拟DOM的"增量化、可中断"实现，每个 Fiber 节点对应一个虚拟DOM节点，但包含更多调度、优先级、双缓存等信息。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"关系"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"虚拟DOM 用于描述 UI 结构，Fiber 用于高效调度和渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每次状态变更时，React 会根据新的虚拟DOM生成新的 Fiber Tree，与旧 Fiber Tree diff，找出最小变更。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'Fiber 是虚拟DOM的"工作单元"，让 React 支持异步、可中断、优先级调度等现代特性。')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React-Fiber",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/setState.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/批量更新",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-的批量更新原理与时机"},"React 的批量更新原理与时机"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'React 的"批量更新"是指：在某些场景下，多个 setState（或 useState）操作会被合并（批处理），只触发一次渲染和 DOM 更新，从而提升性能。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-批量更新的典型时机"},"1. 批量更新的典型时机"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 合成事件"),"（如 onClick、onChange 等 React 事件处理函数内）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"生命周期函数"),"（如 componentDidMount、componentDidUpdate 等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Effect 钩子"),"（如 useEffect 内）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"在这些场景下，连续多次 setState 会被 React 自动合并，只触发一次渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"function App() {\n  const [a, setA] = useState(0);\n  const [b, setB] = useState(0);\n  const handleClick = () => {\n    setA(a + 1);\n    setB(b + 1);\n    // 这里 setA 和 setB 会被批量处理，只触发一次渲染\n  };\n  return <button onClick={handleClick}>Click</button>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-定时器settimeoutsetinterval等异步场景"},"2. 定时器（setTimeout/setInterval）等异步场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-17-及以前"},"React 17 及以前"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在 setTimeout、setInterval、Promise.then、原生事件等异步场景下，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"不会自动批量更新"),"，每次 setState 都会单独触发一次渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"setTimeout(() => {\n  setA(a + 1);\n  setB(b + 1);\n  // React 17 及以前：会触发两次渲染\n}, 0);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-18-及以后"},"React 18 及以后"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'引入了"自动批处理（Automatic Batching）"，',Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"绝大多数场景下都自动批量更新"),"，包括 setTimeout、Promise.then、async/await、原生事件等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"setTimeout(() => {\n  setA(a + 1);\n  setB(b + 1);\n  // React 18：只触发一次渲染\n}, 0);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-批量更新与事件循环的关系"},"3. 批量更新与事件循环的关系"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"什么是一次事件循环"},"什么是一次事件循环？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"一次事件循环（event loop）"),'，是指 JavaScript 执行线程从"事件队列"中取出一个任务（宏任务），执行完所有同步代码和相关的微任务（microtasks），然后进入下一轮循环。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"时间长度"),'不是固定的，而是"本轮宏任务+所有微任务"全部执行完毕为止。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"批量更新发生在哪个时机"},"批量更新发生在哪个时机？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 的批量更新"),"，本质上是：在同一轮事件循环（event loop）内收集到的所有 setState，会在本轮宏任务和所有微任务执行完毕后，统一进行一次渲染（flush）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"也就是说，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"批量更新的触发点，通常是在本轮事件循环的末尾"),"，即：当前宏任务（如合成事件、setTimeout 回调、Promise.then 回调等）和所有微任务（Promise.then、queueMicrotask 等）都执行完毕后，React 才会统一处理所有收集到的 state 更新。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"具体流程"},"具体流程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"你在同一轮事件循环内多次 setState"),"（无论是同步代码、微任务还是宏任务，只要在同一轮 event loop 内）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 会暂存这些 state 更新"),"，而不是立即渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"等到本轮事件循环的所有任务（宏+微）都执行完毕"),"，React 才会统一批量处理这些 state 更新，进行一次渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"结合事件循环模型举例"},"结合事件循环模型举例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  setState1(); // 1\n  Promise.resolve().then(() => {\n    setState2(); // 2\n  });\n  setState3(); // 3\n}, 0);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这里 setTimeout 是一个宏任务，setState1 和 setState3 在宏任务中，setState2 在微任务中。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"只要它们都在同一轮事件循环内"),"，React 18 会把这三次 setState 批量合并，等到本轮宏任务和所有微任务都执行完后，统一渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"关键点总结"},"关键点总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},'批量更新的"收集窗口"就是一次事件循环（event loop）'),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 18"),"：无论 setState 发生在同步、微任务还是宏任务，只要在同一轮事件循环内，都会被批量处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渲染时机"),"：在本轮事件循环的所有同步任务、微任务、宏任务都执行完毕后，React 统一渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"参考图示"},"参考图示"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"┌───────────── event loop ─────────────┐\n│                                     │\n│  [同步任务]                         │\n│  [微任务队列]                       │\n│  [setTimeout/setInterval 回调]       │\n│  ...                                │\n│  (本轮所有 setState 都被收集)        │\n│                                     │\n│  → 事件循环末尾，React 统一渲染      │\n└─────────────────────────────────────┘\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-批量更新的本质"},"4. 批量更新的本质"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 会收集同一事件循环（event loop）内的所有 setState 操作，在本轮事件循环结束后统一执行渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"这样可以减少不必要的重复渲染，提高性能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-手动批量更新"},"5. 手动批量更新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如果遇到特殊场景（如第三方回调）需要手动批量更新，可以用："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { unstable_batchedUpdates } from 'react-dom';\nunstable_batchedUpdates(() => {\n  setA(a + 1);\n  setB(b + 1);\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-总结表"},"6. 总结表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"场景/版本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"React 17 及以前"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"React 18 及以后"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"合成事件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生命周期/Effect"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"setTimeout"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"非批量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Promise.then"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"非批量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"原生事件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"非批量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"批量")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-结论"},"7. 结论"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 17 及以前"),"：只有合成事件和生命周期内是批量更新，异步/原生事件不是。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React 18 及以后"),"：绝大多数场景都自动批量更新。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"定时器（setTimeout/setInterval）"),"：React 18 及以后会自动批量，React 17 及以前不会。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"批量更新的窗口就是一次事件循环，渲染发生在本轮事件循环的末尾。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-关于本轮宏任务与异步宏任务的补充说明"},'8. 关于"本轮宏任务"与异步宏任务的补充说明'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"本轮宏任务"),"，严格来说，是指当前事件循环（event loop）中正在执行的那个宏任务（macrotask）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型的宏任务有：主线程执行的同步代码、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"setTimeout"),"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"setInterval")," 回调、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"MessageChannel"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"requestAnimationFrame")," 等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"每一个异步宏任务（如 setTimeout 回调）都会开启一个新的事件循环轮次"),"，即每个宏任务是独立的 event loop 轮次。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'所以，"本轮宏任务"',Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"不包括"),"下一个 setTimeout、setInterval、I/O 等异步宏任务的内容。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有在",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同一个宏任务及其所有微任务"),"中发生的 setState，才会被 React 18 批量收集。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"例子：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"setTimeout(() => {\n  // 这是一个新的宏任务（事件循环轮次）\n  setState1();\n  Promise.resolve().then(() => {\n    setState2();\n  });\n  setState3();\n}, 0);\n\nsetTimeout(() => {\n  // 这是另一个新的宏任务（下一个事件循环轮次）\n  setState4();\n}, 0);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"setState1、setState2、setState3 会被批量合并（同一轮事件循环）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"setState4 在下一个事件循环轮次（新的宏任务），",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"不会和上面三个合并"),"。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"本轮宏任务"),"只包括当前事件循环的同步代码和所有微任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步宏任务"),'（如下一个 setTimeout 回调）属于下一个事件循环轮次，不属于"本轮宏任务"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'React 的批量更新窗口是"同一轮事件循环"，即当前宏任务及其所有微任务。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"\n## 9. 哪些情况会开辟新的宏任务？\n\n除了 setTimeout，以下情况也会开辟新的宏任务（macrotask），即开启新的事件循环轮次：\n\n| 场景/API                | 说明                                                         |\n|-------------------------|--------------------------------------------------------------|\n| `setTimeout`            | 最常用的宏任务调度器，延迟执行回调                           |\n| `setInterval`           | 定时重复执行回调，每次回调都是新宏任务                       |\n| `setImmediate`          | Node.js 环境下，立即执行回调（比 setTimeout 更快）           |\n| `MessageChannel`        | 浏览器端的消息通道，`port.postMessage` 触发新宏任务           |\n| `requestAnimationFrame` | 浏览器端，下一帧渲染前执行回调，每次回调是新宏任务            |\n| `I/O`                   | 如文件读取、网络请求（如 XMLHttpRequest、fetch 的 onload）    |\n| `UI 事件`               | 如 click、input、scroll 等 DOM 事件监听器回调                 |\n| `Promise.finally`       | 如果 finally 返回的是一个新的 Promise，可能会触发新宏任务      |\n\n**注意：**\n- 所有 DOM 事件（如 click、input、scroll、keydown 等）回调，都是在新的宏任务中执行的。\n- Node.js 下还有 `setImmediate`（宏任务）、`process.nextTick`（微任务，非宏任务）。\n\n### 宏任务与微任务的区别\n- **宏任务（macrotask）**：每个宏任务是事件循环的一个轮次，执行完毕后会清空所有微任务队列。\n- **微任务（microtask）**：如 `Promise.then`、`MutationObserver`、`queueMicrotask`，会在当前宏任务结束后、下一个宏任务开始前全部执行完。\n\n**典型宏任务 API 示例：**\n```js\nsetTimeout(() => {\n  // 新的宏任务\n}, 0);\n\nsetInterval(() => {\n  // 每次回调都是新的宏任务\n}, 1000);\n\nconst channel = new MessageChannel();\nchannel.port1.onmessage = () => {\n  // 新的宏任务\n};\nchannel.port2.postMessage('msg');\n\nrequestAnimationFrame(() => {\n  // 新的宏任务（下一帧）\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"会开辟新宏任务的常见情况有：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"setTimeout"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"setInterval"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"MessageChannel"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"requestAnimationFrame"),"、各类 I/O 回调、所有 DOM 事件回调、Node.js 的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"setImmediate"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"微任务"),"（如 Promise.then、queueMicrotask）不会开辟新宏任务，只会在当前宏任务结束后立即执行。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-哪些事件操作会开启新的事件循环轮次"},"10. 哪些事件/操作会开启新的事件循环轮次？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"在 JavaScript 中，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"每个宏任务的开始就是新的一轮事件循环"),"。下列事件/操作会让 JS 进入下一个事件循环轮次："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"会开启新事件循环的典型场景"},"会开启新事件循环的典型场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"setTimeout / setInterval"),"：每次回调都是新事件循环。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"MessageChannel"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"port.postMessage")," 触发的回调。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"requestAnimationFrame"),"：每一帧的回调。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"I/O 操作"),"：如网络请求（XMLHttpRequest、fetch 的 onload/then）、文件读取等异步 I/O 回调。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"DOM 事件"),"：如 click、input、scroll、keydown 等，事件监听器回调每次都是新事件循环。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"setImmediate"),"（Node.js）：每次回调。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"不会开启新事件循环的场景"},"不会开启新事件循环的场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"微任务"),"（如 Promise.then、queueMicrotask、MutationObserver）：这些只会在当前宏任务结束后、下一个宏任务开始前执行，不会单独开启新的事件循环。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"process.nextTick"),"（Node.js）：属于微任务，不会开启新事件循环。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结表"},"总结表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"场景/事件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"是否开启新事件循环"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"setTimeout/setInterval"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"是")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"MessageChannel"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"是")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"requestAnimationFrame"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"是")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"I/O 回调"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"是")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"DOM 事件（click等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"是")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"setImmediate (Node.js)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"是")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Promise.then"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"否（微任务）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"queueMicrotask"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"否（微任务）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"process.nextTick"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"否（微任务）")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"本质说明"},"本质说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"每个宏任务的开始就是新的一轮事件循环。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只要是宏任务队列中的新任务（如上面列举的场景），就会开启新的事件循环。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微任务只是在当前宏任务内追加执行，不会单独开启事件循环。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/批量更新",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/React/status-maange.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/React/React 状态管理",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-状态管理主流方案与对比"},"React 状态管理主流方案与对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"React 应用的状态管理方案主要分为三大类：组件内置状态、上下文（Context）、第三方库（如 Redux、MobX、Zustand、Jotai、Recoil）、云原生/服务端状态（如 SWR、React Query、Apollo Client）等。下面系统梳理各方案原理、优缺点、典型场景与代码示例。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-组件内置状态usestateusereducer"},"1. 组件内置状态（useState/useReducer）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：通过 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useState"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"useReducer")," 在组件内部管理局部状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：简单、无依赖、类型安全、性能好，适合局部/简单状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：状态提升/跨组件传递繁琐，难以应对复杂共享状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：表单输入、UI 控制、局部计数等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const [count, setCount] = useState(0);\nconst [form, dispatch] = useReducer(formReducer, initialForm);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-context-上下文"},"2. Context 上下文"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"React.createContext")," + ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Provider")," 实现全局/跨层级状态共享。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：官方支持、无第三方依赖、适合全局配置/主题/用户信息。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：频繁更新会导致全量子树重渲染，性能瓶颈明显，不适合大规模频繁变动状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：主题、登录用户、国际化、权限等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const ThemeContext = React.createContext('light');\n<ThemeContext.Provider value=\"dark\">...</ThemeContext.Provider>\nconst theme = useContext(ThemeContext);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-redux"},"3. Redux"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：单一全局 Store，纯函数 reducer 管理状态变更，action 派发，支持中间件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：可预测、可追踪、强大生态（devtools、middleware）、适合大型复杂应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：模板代码多、学习曲线陡峭、API 冗长，简单场景显得繁琐。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：企业级后台、复杂表单、权限、流程驱动型应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"// store.js\nimport { configureStore, createSlice } from '@reduxjs/toolkit';\nconst counterSlice = createSlice({\n  name: 'counter', initialState: 0,\n  reducers: { increment: state => state + 1 }\n});\nexport const { increment } = counterSlice.actions;\nexport default configureStore({ reducer: { counter: counterSlice.reducer } });\n// 组件中\nconst count = useSelector(state => state.counter);\nconst dispatch = useDispatch();\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-mobx"},"4. MobX"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：响应式数据流，observable 自动追踪依赖，变更自动驱动视图更新。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：开发体验好、代码简洁、天然支持面向对象、适合中大型项目。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：调试/追踪难度大，副作用隐式，过度响应式可能导致不可控。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：中大型前台、交互复杂、数据流动频繁的应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { makeAutoObservable } from 'mobx';\nclass Counter {\n  count = 0;\n  constructor() { makeAutoObservable(this); }\n  inc() { this.count++; }\n}\nconst counter = new Counter();\n// 组件中\nobserver(() => <button onClick={() => counter.inc()}>{counter.count}</button>);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-zustandjotairecoil现代轻量状态库"},"5. Zustand/Jotai/Recoil（现代轻量状态库）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：基于 hooks 的原子化/局部 store，极简 API，按需订阅，避免全量重渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：极简、性能优、按需响应、无模板代码，适合中小型项目和局部共享状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：生态不如 Redux，部分高级场景需自定义实现。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：局部共享、弹窗、Tab、购物车、轻量全局状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例（Zustand）："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import create from 'zustand';\nconst useStore = create(set => ({ count: 0, inc: () => set(state => ({ count: state.count + 1 })) }));\nconst count = useStore(state => state.count);\nconst inc = useStore(state => state.inc);\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"usesyncexternalstore-在现代轻量状态库中的应用详解"},"useSyncExternalStore 在现代轻量状态库中的应用详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"useSyncExternalStore 是 React 18 新增的底层 Hook，专为外部 store 设计。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"作用：让组件安全、精准地订阅全局 store，store 变化时只重新渲染真正依赖的组件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'解决了 useEffect + setState 方案的"撕裂"问题和并发渲染下的一致性。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"基本用法：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const value = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"subscribe：注册回调，store 变化时调用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"getSnapshot：返回当前最新的 store 状态（或片段）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"getServerSnapshot：SSR 场景下的快照（可选）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Zustand 内部简化实现：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useSyncExternalStore } from 'react';\n\nconst store = { state: { count: 0 }, listeners: new Set() };\n\nfunction setState(partial) {\n  Object.assign(store.state, partial);\n  store.listeners.forEach(l => l());\n}\n\nfunction useStore(selector) {\n  return useSyncExternalStore(\n    (listener) => {\n      store.listeners.add(listener);\n      return () => store.listeners.delete(listener);\n    },\n    () => selector(store.state)\n  );\n}\n\n// 组件中\nconst count = useStore(state => state.count);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有 selector 选中的 state 变化时，才会触发该组件渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"selector 支持 shallow compare，避免无关状态变化导致的重渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"优势：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"精准订阅：每个组件只订阅自己关心的状态片段。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'并发安全：React 保证 getSnapshot 在渲染和 commit 阶段一致，避免"撕裂"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SSR 支持：可传入 getServerSnapshot，支持服务端渲染一致性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能优：极大减少无关组件的重渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"典型应用场景：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Zustand、Jotai、Recoil、Redux（新版 useSelector）、MobX（新版 observer）等现代状态库，底层都用 useSyncExternalStore 实现精准订阅和高性能渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需源码级解读或更复杂场景示例，欢迎继续提问！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-云原生服务端状态管理swrreact-queryapollo-client"},"6. 云原生/服务端状态管理（SWR、React Query、Apollo Client）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),'：以"数据为中心"，自动缓存、同步、重试、失效、分页，主攻远程/服务端数据。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：自动处理异步、缓存、刷新、错误、并发，极大简化数据流管理，适合数据驱动型应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：不适合本地 UI 状态，需与本地状态方案结合。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：数据密集型、API 驱动、表格、报表、实时协作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例（React Query）："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { useQuery } from '@tanstack/react-query';\nfunction Todos() {\n  const { data, isLoading } = useQuery(['todos'], fetchTodos);\n  if (isLoading) return <div>Loading...</div>;\n  return <ul>{data.map(todo => <li key={todo.id}>{todo.text}</li>)}</ul>;\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-方案对比与选型建议"},"7. 方案对比与选型建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"优点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"缺点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"典型场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"useState"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单高效，类型安全"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"仅限局部，难共享"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"局部状态、表单")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Context"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"官方支持，易用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能瓶颈，重渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"主题、用户、配置")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Redux"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"可预测、强生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"模板代码多，繁琐"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"大型复杂应用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"MobX"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"响应式、代码简洁"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"隐式副作用，调试难"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"中大型交互复杂")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Zustand等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"极简、性能优"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态弱，需自定义"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"轻量全局/局部共享")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React Query"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"自动异步、缓存"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"仅适合远程数据"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"数据驱动型应用")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"ssr-场景下的状态管理详解"},"SSR 场景下的状态管理详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-为什么-ssr-也需要状态管理"},"1. 为什么 SSR 也需要状态管理？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务端渲染的本质"),'：SSR 会在服务端"预渲染"出 HTML，返回给浏览器，提升首屏速度和 SEO。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"状态来源"),'：服务端渲染时，页面通常需要根据用户请求、登录态、接口数据等动态内容生成页面，这些都属于"状态"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"客户端一致性"),'：SSR 后，客户端需要"水合"（hydrate）页面，继续管理和更新状态，保证服务端和客户端 UI 一致。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-ssr-状态管理的典型需求"},"2. SSR 状态管理的典型需求"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据预取"),"：服务端渲染时需要提前获取数据（如用户信息、列表、配置等），并注入到初始 HTML。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全局/共享状态"),"：如登录态、主题、权限、路由等，服务端和客户端都要用到。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},'避免"撕裂"'),'：服务端和客户端的状态要完全一致，否则会出现"内容闪烁"或"水合失败"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多用户隔离"),"：服务端渲染时要确保每个请求的状态互不干扰（不能用全局单例 Store）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-ssr-场景下主流状态管理方案"},"3. SSR 场景下主流状态管理方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Context/Redux/MobX 等"),"：这些库都支持 SSR，但需要注意每次请求都要创建独立的 Store/Context 实例，不能用全局单例。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React Query/SWR"),"：天然支持 SSR，可以在服务端预取数据并注入到页面，客户端水合后自动接管缓存和数据同步。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Next.js/Remix 等框架"),"：内置了 SSR 状态管理和数据注入机制，推荐结合 React 状态库使用。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-典型实现方式"},"4. 典型实现方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"以 Redux + Next.js 为例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// pages/_app.js\nimport { Provider } from 'react-redux';\nimport { initializeStore } from '../store';\n\nfunction MyApp({ Component, pageProps }) {\n  const store = initializeStore(pageProps.initialReduxState);\n  return (\n    <Provider store={store}>\n      <Component {...pageProps} />\n    </Provider>\n  );\n}\n\n// getServerSideProps\nexport async function getServerSideProps(context) {\n  const store = initializeStore();\n  // 预取数据并 dispatch 到 store\n  await store.dispatch(fetchUser());\n  return {\n    props: {\n      initialReduxState: store.getState(),\n    },\n  };\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"以 React Query 为例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { dehydrate, QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nexport async function getServerSideProps() {\n  const queryClient = new QueryClient();\n  await queryClient.prefetchQuery(['todos'], fetchTodos);\n  return {\n    props: {\n      dehydratedState: dehydrate(queryClient),\n    },\n  };\n}\n\n// 客户端\n<QueryClientProvider client={queryClient}>\n  <Hydrate state={pageProps.dehydratedState}>\n    <App />\n  </Hydrate>\n</QueryClientProvider>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-总结"},"5. 总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SSR 需要状态管理"),"，否则无法实现数据驱动的动态页面、用户隔离和客户端一致性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐选用支持 SSR 的状态库（如 Redux、MobX、React Query、SWR），并结合框架的 SSR 数据注入机制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"注意每个请求都要有独立的状态实例，避免全局污染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一方案的 SSR 实战细节，欢迎继续提问！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"各主流状态管理方案的实现细节与原理详解"},"各主流状态管理方案的实现细节与原理详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-usestate--usereducer组件内置状态"},"1. useState / useReducer（组件内置状态）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'React 内部为每个组件实例维护一组"hook state"数组，useState/useReducer 实际是对该数组的读写。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每次 setState/setReducer 都会触发组件重新渲染，React 会对比新旧虚拟 DOM，决定哪些部分需要更新。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"状态只在当前组件实例内生效，父子/兄弟组件间不会自动同步。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"底层机制"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React Fiber 节点上有 hooks 链表，记录每个 hook 的当前值和更新队列。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"setState 本质是向更新队列 push 一个 action，调度器（Scheduler）会在合适时机批量处理这些 action。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：无副作用、无全局污染、性能好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缺点：状态提升/跨组件传递繁琐。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-context上下文"},"2. Context（上下文）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React.createContext 创建一个 context 对象，包含 Provider 和 Consumer。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'Provider 组件通过 React 的"context 机制"将 value 注入到组件树下所有 Consumer。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件通过 useContext 读取最近的 Provider value。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"底层机制"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React Fiber 树每个节点都可携带 context 依赖，Provider 更新时会触发所有依赖该 context 的子树重新渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"context 变更会导致所有 Consumer 重新渲染（无 diff 优化），所以频繁变动的 context 会有性能瓶颈。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：全局共享、无第三方依赖。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缺点：全量重渲染，性能不佳。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-redux-1"},"3. Redux"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"单一全局 Store，所有状态集中存储。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过 reducer（纯函数）描述状态如何响应 action 变化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件通过 connect/useSelector 订阅 store，store 变更时自动通知相关组件。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"底层机制"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Store 内部用订阅-发布（pub/sub）模式维护监听器列表。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"dispatch(action) 会依次调用所有 reducer，生成新 state，若 state 变化则通知所有订阅者。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React-Redux 用 context + shouldComponentUpdate/useSyncExternalStore 精细控制组件订阅和渲染。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：可预测、可追踪、强大中间件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缺点：模板代码多，API 冗长。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-mobx-1"},"4. MobX"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"基于响应式编程，核心是 observable（可观察对象）、action（变更）、computed（派生值）、reaction（副作用）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件通过 observer 包裹后，自动追踪依赖的 observable 属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"observable 属性变更时，自动触发依赖该属性的组件重新渲染。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"底层机制"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"MobX 用 getter/setter 劫持对象属性，收集依赖关系（依赖收集），变更时自动通知依赖方。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"依赖图自动维护，最小化重渲染。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：极简、自动依赖追踪、响应式。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缺点：副作用隐式，调试难。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-zustandjotairecoil现代轻量状态库-1"},"5. Zustand/Jotai/Recoil（现代轻量状态库）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理（以 Zustand 为例）"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内部维护一个全局 store（普通 JS 对象），每个状态片段可独立订阅。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件通过 hook 订阅 store 的某个片段，只有该片段变化时才会触发渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 selector、middleware、持久化等扩展。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"底层机制"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"利用 useSyncExternalStore（React 18+）实现精准订阅和渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过 shallow compare/selector 避免无关组件重渲染。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：极简、性能优、按需响应。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缺点：生态不如 Redux，部分高级场景需自定义。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-react-queryswrapollo-client云原生服务端状态"},"6. React Query/SWR/Apollo Client（云原生/服务端状态）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现原理"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'以"数据为中心"，每个远程数据源对应一个 key，自动缓存、同步、失效、重试。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件通过 hook 订阅数据，库自动处理请求、缓存、刷新、错误、并发等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 SSR/SSG，服务端预取数据后注入到客户端。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"底层机制"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内部维护全局 cache，key-value 结构，支持多层缓存和失效策略。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"订阅-发布模式，数据变更时自动通知所有订阅组件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Apollo Client 还支持 GraphQL 查询、缓存归一化、乐观 UI 等。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优点：自动异步、缓存、并发，极大简化数据流。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缺点：不适合本地 UI 状态。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一方案的源码级解读或最佳实践案例，欢迎继续提问！"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"usesyncexternalstore-参数与返回值详解"},"useSyncExternalStore 参数与返回值详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"1. 参数说明")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"subscribe"),"（订阅函数）：注册回调（listener），store 变化时调用，返回取消订阅函数。",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"function subscribe(listener) {\n  store.listeners.add(listener);\n  return () => store.listeners.delete(listener);\n}\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"getSnapshot"),"（快照函数）：返回当前最新的 store 状态（或片段），即组件实际依赖的数据。",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"() => selector(store.state)\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"getServerSnapshot"),"（SSR 场景，可选）：服务端渲染时用来获取初始快照。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"2. 返回值")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"返回值就是你订阅的那部分 store 状态的最新值。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件每次渲染时，useSyncExternalStore 会返回 selector(store.state) 的结果。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只有当 selector(store.state) 的结果发生变化时，组件才会重新渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"3. 结合例子说明")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const value = useSyncExternalStore(\n  subscribe,                // 订阅 store 变化\n  () => selector(store.state) // 获取当前依赖的状态片段\n);\n// value 就是 selector(store.state) 的最新值\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例如：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"const count = useSyncExternalStore(subscribe, () => store.state.count);"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只要 count 变，组件就会渲染，其他字段变不会影响。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"4. 总结")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"subscribe：告诉 React 如何监听 store 变化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"getSnapshot：告诉 React 如何获取当前依赖的状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"返回值：就是你订阅的那部分状态的最新值，决定组件是否渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"流程图解：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"组件挂载时，useSyncExternalStore 注册 listener，并记录 selector(store.state) 的初始值。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"任何 setState 都会通知所有 listener。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"每个 listener 触发时，React 会重新执行 selector(store.state)，和上次的结果对比。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"只有 selector 结果变了，才会让该组件重新渲染。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"例子：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 假设 store.state = { count: 1, name: 'foo' }\nconst count = useSyncExternalStore(subscribe, () => store.state.count); // 只关心 count\nconst name = useSyncExternalStore(subscribe, () => store.state.name);   // 只关心 name\n\nsetState({ count: 2 }); // 只会让 count 相关组件渲染\nsetState({ name: 'bar' }); // 只会让 name 相关组件渲染\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"性能优化建议：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"selector 返回对象/数组时建议用 shallow compare，避免引用变化导致不必要的渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Zustand 等库内部会对 selector 做优化。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"精准更新的本质：selector 决定依赖，快照对比决定是否渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"只要 selector 选中的 state 没变，组件就不会渲染，哪怕 store 其他部分变了。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"usesyncexternalstore-应用例子"},"useSyncExternalStore 应用例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"1. 原生全局状态订阅（无第三方库）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import React, { useSyncExternalStore } from 'react';\n\n// 简单的全局 store\nconst store = {\n  state: { count: 0, name: 'foo' },\n  listeners: new Set(),\n};\n\nfunction setState(partial) {\n  Object.assign(store.state, partial);\n  store.listeners.forEach(l => l());\n}\n\n// 订阅函数\nfunction subscribe(listener) {\n  store.listeners.add(listener);\n  return () => store.listeners.delete(listener);\n}\n\n// 组件 hook，支持 selector\nfunction useStore(selector) {\n  return useSyncExternalStore(\n    subscribe,\n    () => selector(store.state)\n  );\n}\n\n// 组件A：只关心 count\nfunction Counter() {\n  const count = useStore(state => state.count);\n  return (\n    <div>\n      <span>Count: {count}</span>\n      <button onClick={() => setState({ count: count + 1 })}>+1</button>\n    </div>\n  );\n}\n\n// 组件B：只关心 name\nfunction Name() {\n  const name = useStore(state => state.name);\n  return (\n    <div>\n      <span>Name: {name}</span>\n      <button onClick={() => setState({ name: name + '!' })}>Change Name</button>\n    </div>\n  );\n}\n\n// App\nexport default function App() {\n  return (\n    <>\n      <Counter />\n      <Name />\n    </>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"效果说明：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"点击 Counter 的按钮，只 Counter 组件渲染，Name 不变。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"点击 Name 的按钮，只 Name 组件渲染，Counter 不变。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'这就是"精准订阅"！')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"2. 类 Zustand 的极简全局状态库")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { useSyncExternalStore } from 'react';\n\nconst store = { state: { count: 0 }, listeners: new Set() };\n\nfunction setState(partial) {\n  Object.assign(store.state, partial);\n  store.listeners.forEach(l => l());\n}\n\nfunction useStore(selector) {\n  return useSyncExternalStore(\n    (listener) => {\n      store.listeners.add(listener);\n      return () => store.listeners.delete(listener);\n    },\n    () => selector(store.state)\n  );\n}\n\n// 组件中\nfunction Counter() {\n  const count = useStore(state => state.count);\n  return (\n    <button onClick={() => setState({ count: count + 1 })}>\n      {count}\n    </button>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"你可以用 useSyncExternalStore 实现自己的全局状态库，或理解 Zustand/Jotai/Recoil 等库的底层机制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合需要高性能、精准订阅的中大型 React 应用。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/React/React 状态管理",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/expo/camera.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_camera1_jpeg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/camera1.jpeg"),_assets_camera1_jpeg__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_camera1_jpeg__WEBPACK_IMPORTED_MODULE_7__),_assets_camera2_jpeg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./stories/assets/camera2.jpeg"),_assets_camera2_jpeg__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_assets_camera2_jpeg__WEBPACK_IMPORTED_MODULE_8__),_assets_camera3_jpeg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./stories/assets/camera3.jpeg"),_assets_camera3_jpeg__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_assets_camera3_jpeg__WEBPACK_IMPORTED_MODULE_9__),_assets_camera4_jpeg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./stories/assets/camera4.jpeg"),_assets_camera4_jpeg__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_assets_camera4_jpeg__WEBPACK_IMPORTED_MODULE_10__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/expo/相机",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"介绍"},"介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"本文应用 expo-camera 完成从相册选择，拍照上传，扫二维码，录制视频，播放视频，下载图片，下载视频等功能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"expo-camera 官方文档参考",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://docs.expo.dev/versions/latest/sdk/camera/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://docs.expo.dev/versions/latest/sdk/camera/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"示例"},"示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{style:{display:"flex",width:"100%",flexWrap:"wrap"}},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_camera1_jpeg__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"camera1",style:{width:350,height:700,padding:10}}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_camera2_jpeg__WEBPACK_IMPORTED_MODULE_8___default.a,alt:"camera2",style:{width:350,height:700,padding:10}}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_camera3_jpeg__WEBPACK_IMPORTED_MODULE_9___default.a,alt:"camera3",style:{width:350,height:700,padding:10}}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_camera4_jpeg__WEBPACK_IMPORTED_MODULE_10___default.a,alt:"camera4",style:{width:350,height:700,padding:10}})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"核心代码"},"核心代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'// import { StyleSheet } from \'react-native\';\nimport React from "react";\nimport { StyleSheet, View, Image, Text, ScrollView } from "react-native";\nimport { Button, Dialog } from "@rneui/themed";\nimport * as ImagePicker from "expo-image-picker";\nimport { useState, useEffect } from "react";\nimport {\n  Camera,\n  CameraType,\n  AutoFocus,\n  FlashMode,\n  WhiteBalance,\n} from "expo-camera";\nimport { BarCodeScanner } from "expo-barcode-scanner";\nimport { Linking } from "react-native";\nimport { Video, ResizeMode } from "expo-av";\nimport * as MediaLibrary from "expo-media-library";\nimport * as FileSystem from "expo-file-system";\n\nexport default function CameraUse() {\n  const [selectedImage, setSelectedImage] =\n    useState <\n    any >\n    "https://img1.baidu.com/it/u=413643897,2296924942&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500";\n  const [type, setType] = useState(CameraType.back);\n  //相机权限\n  const [permission, requestPermission] = Camera.useCameraPermissions();\n  //是否展示相机弹窗\n  const [visible, setVisible] = useState(false);\n  //是否具备相机权限的标志\n  const [visibleFlag, setVisibleFlag] = useState(false);\n  const granted = permission && permission.granted;\n  //二维码权限\n  const [scanned, setScanned] = useState(false); // 二维码\n  //是否点击扫描二维码\n  const [isScanned, setIsScanned] = useState(false);\n  //是否点击录制视频\n  const [isRecord, setIsRecord] = useState(false);\n  //买克风权限\n  const [mpPermission, requestMPPermission] = Camera.useMicrophonePermissions();\n  //音视频相册写入权限\n  const [permissionMeResponse, requestMePermission] =\n    MediaLibrary.usePermissions();\n  const [recordStatusText, setRecordStatusText] = useState("未录制");\n  const [recordUri, setRecordUri] = useState(\n    "https://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4"\n  );\n  //视频对象\n  const video: any = React.useRef(null);\n  //相机对象\n  const [camerObj, setCamerObj] = useState < any > null;\n  const [status, setStatus] = useState < any > {};\n  let [scale, setZoom] = useState(0);\n  //下载进度\n  const [downloadProgress, setProgess] = useState(0);\n  function toggleCameraType() {\n    setType((current) =>\n      current === CameraType.back ? CameraType.front : CameraType.back\n    );\n  }\n  //图片上传\n  const pickImageAsync = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      allowsEditing: true,\n      quality: 1,\n    });\n\n    if (!result.canceled) {\n      setSelectedImage(result.assets[0].uri);\n      // console.log(result);\n    } else {\n      alert("You did not select any image.");\n    }\n  };\n  //拍照上传\n  const takePhotos = async () => {\n    // setVisible(true);\n    if (camerObj) {\n      let photo = await camerObj.takePictureAsync();\n      const uri = photo.uri;\n      setSelectedImage(uri);\n      reset();\n    }\n  };\n\n  //扫二维码\n  const handleBarCodeScanned = (params: any) => {\n    const { type, data } = params;\n    // alert(`Bar code with type ${type} and data ${data} has been scanned!`);\n    if (data) {\n      Linking.openURL(data);\n      reset();\n    }\n  };\n  //录制视频\n  const takeVideos = async () => {\n    // alert(JSON.stringify(mpPermission))\n    if (mpPermission && mpPermission.granted) {\n      setRecordStatusText("录制中");\n      const data = await camerObj.recordAsync();\n      const uri = data.uri;\n      // alert(uri);\n      setRecordUri(uri);\n      setRecordStatusText("录制完成");\n    }\n  };\n  //录制视频结束\n  const takeVideosEnd = async () => {\n    if (camerObj) {\n      await camerObj.stopRecording();\n      reset();\n    }\n  };\n  const reset = () => {\n    setVisible(false);\n    setScanned(false);\n    setIsScanned(false);\n    setZoom(0);\n    setType(CameraType.back);\n    setIsScanned(false);\n  };\n  function getActionContent() {\n    if (isScanned) {\n      //扫二维码\n      return (\n        <View\n          style={{\n            justifyContent: "center",\n            alignItems: "center",\n            flexDirection: "row",\n          }}\n        >\n          <Text\n            style={{\n              fontSize: 18,\n              marginBottom: 10,\n              color: "white",\n              marginLeft: 20,\n            }}\n            onPress={() => {\n              setScanned(true);\n            }}\n          >\n            开始扫码\n          </Text>\n        </View>\n      );\n    }\n    if (isRecord) {\n      //录视频\n      return (\n        <View style={{ marginTop: -30 }}>\n          <View\n            style={{\n              justifyContent: "center",\n              alignItems: "center",\n              flexDirection: "row",\n            }}\n          >\n            <Text\n              style={{\n                fontSize: 18,\n                marginBottom: 10,\n                color: "white",\n              }}\n            >\n              {recordStatusText}\n            </Text>\n          </View>\n          <View\n            style={{\n              justifyContent: "center",\n              alignItems: "center",\n              flexDirection: "row",\n            }}\n          >\n            <Text\n              style={{\n                fontSize: 18,\n                marginBottom: 10,\n                color: "white",\n              }}\n              onPress={takeVideos}\n            >\n              开始录制\n            </Text>\n            <Text\n              style={{\n                fontSize: 18,\n                marginBottom: 10,\n                color: "white",\n                marginLeft: 20,\n              }}\n              onPress={takeVideosEnd}\n            >\n              停止录制\n            </Text>\n            <Text\n              style={{\n                fontSize: 18,\n                marginBottom: 10,\n                color: "white",\n                marginLeft: 20,\n              }}\n              onPress={toggleCameraType}\n            >\n              反转\n            </Text>\n          </View>\n        </View>\n      );\n    }\n\n    return (\n      //拍照\n      <View style={{ marginTop: -60 }}>\n        <View\n          style={{\n            justifyContent: "center",\n            alignItems: "center",\n            flexDirection: "row",\n          }}\n        >\n          <Text\n            style={{\n              fontSize: 50,\n              marginBottom: 10,\n              color: "white",\n            }}\n            onPress={() => {\n              if (scale < 10) {\n                scale += 1;\n              } else {\n                scale = 10;\n              }\n              setZoom(scale);\n            }}\n          >\n            +\n          </Text>\n          <Text\n            style={{\n              fontSize: 50,\n              marginBottom: 10,\n              color: "white",\n              marginLeft: 50,\n            }}\n            onPress={() => {\n              if (scale > 1) {\n                scale -= 1;\n              } else {\n                scale = 0;\n              }\n              setZoom(scale);\n            }}\n          >\n            -\n          </Text>\n        </View>\n        <View\n          style={{\n            justifyContent: "center",\n            alignItems: "center",\n            flexDirection: "row",\n          }}\n        >\n          <Text\n            style={{\n              fontSize: 18,\n              marginBottom: 10,\n              color: "white",\n            }}\n            onPress={takePhotos}\n          >\n            开始拍照\n          </Text>\n          <Text\n            style={{\n              fontSize: 18,\n              marginBottom: 10,\n              color: "white",\n              marginLeft: 20,\n            }}\n            onPress={toggleCameraType}\n          >\n            反转\n          </Text>\n        </View>\n      </View>\n    );\n  }\n  const isVisibleByPower: any = async () => {\n    if (camerObj) {\n      const camer = await camerObj.getCameraPermissionsAsync();\n      if (camer && camer.granted) {\n        if (isScanned) {\n          //如果是扫码，也不需要处理\n        }\n        if (isRecord) {\n          //如果是录制视频，则需要允许音频\n          const mp = await camerObj.requestMicrophonePermissionsAsync();\n          return mp && mp.granted && camer.granted;\n        }\n\n        //默认是允许拍照上传\n        return true;\n      }\n    }\n    return false;\n  };\n  useEffect(() => {\n    // alert(\'111\')\n    if (visible && isVisibleByPower()) {\n      setVisibleFlag(true);\n    }\n    if (!(permission && permission.granted)) {\n      // Camera permissions are not granted yet\n      requestPermission();\n    }\n    if (!(mpPermission && mpPermission.granted)) {\n      requestMPPermission();\n    }\n    return () => {\n      setVisibleFlag(false);\n    };\n  }, [visible]);\n  if (!permission) {\n    // Camera permissions are still loading\n    return <View />;\n  }\n  return (\n    <ScrollView>\n      <View style={styles.container}>\n        {/* 图片 */}\n        <View style={styles.imageContainer}>\n          <Image\n            source={{ uri: selectedImage }}\n            style={styles.image}\n            resizeMode="cover"\n          />\n        </View>\n        {/* 视频 */}\n        <View>\n          <Video\n            ref={video}\n            style={styles.video}\n            source={{\n              uri: recordUri,\n            }}\n            useNativeControls\n            resizeMode={ResizeMode.COVER}\n            isLooping\n            onPlaybackStatusUpdate={(status) => setStatus(() => status)}\n          />\n        </View>\n        {/* 一排按钮 */}\n        <View\n          style={{\n            display: "flex",\n            flexDirection: "row",\n            marginTop: 20,\n            justifyContent: "center",\n          }}\n        >\n          <View style={{ width: 120, marginLeft: 20 }}>\n            <Button onPress={pickImageAsync}>从相册选择</Button>\n          </View>\n          <View style={{ marginLeft: 20, width: 120 }}>\n            <Button\n              onPress={() => {\n                setIsScanned(false);\n                setIsRecord(false);\n                setVisible(true);\n                if (!permission.granted) {\n                  // Camera permissions are not granted yet\n                  requestPermission();\n                } else {\n                }\n              }}\n            >\n              拍照上传\n            </Button>\n          </View>\n        </View>\n        {/* 二排按钮 */}\n        <View\n          style={{\n            display: "flex",\n            flexDirection: "row",\n            marginTop: 20,\n            justifyContent: "center",\n          }}\n        >\n          <View style={{ marginLeft: 20, width: 120 }}>\n            <Button\n              onPress={() => {\n                setIsScanned(true);\n                setVisible(true);\n                if (!permission.granted) {\n                  // Camera permissions are not granted yet\n                  requestPermission();\n                } else {\n                }\n              }}\n            >\n              扫二维码\n            </Button>\n          </View>\n          <View style={{ marginLeft: 20, width: 120 }}>\n            <Button\n              onPress={() => {\n                if (video && video.current) {\n                  video.current.pauseAsync();\n                }\n                setIsRecord(true);\n                setVisible(true);\n                setRecordStatusText("未录制");\n\n                if (!permission.granted) {\n                  requestPermission();\n                }\n                if (!(mpPermission && mpPermission.granted)) {\n                  requestMPPermission();\n                }\n              }}\n            >\n              录制视频\n            </Button>\n          </View>\n        </View>\n        {/* 三排按钮 */}\n        <View\n          style={{\n            display: "flex",\n            flexDirection: "row",\n            marginTop: 20,\n            justifyContent: "center",\n            // alignItems:\'center\'\n          }}\n        >\n          <View style={{ width: 120, marginLeft: 20 }}>\n            <Button\n              onPress={() =>\n                status.isPlaying\n                  ? video.current.pauseAsync()\n                  : video.current.playAsync()\n              }\n            >\n              {!status.isPlaying ? "播放视频" : "停止视频"}\n            </Button>\n          </View>\n          <View style={{ width: 120, marginLeft: 20 }}>\n            <Button\n              onPress={() =>\n                setRecordUri(\n                  "https://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4"\n                )\n              }\n            >\n              恢复默认视频\n            </Button>\n          </View>\n        </View>\n        {/* 四排按钮 */}\n        <View\n          style={{\n            display: "flex",\n            flexDirection: "row",\n            marginTop: 20,\n            justifyContent: "center",\n            // alignItems:\'center\'\n          }}\n        >\n          <View style={{ width: 120, marginLeft: 20 }}>\n            <Button\n              onPress={async () => {\n                if (\n                  !(\n                    permissionMeResponse &&\n                    permissionMeResponse.accessPrivileges == "all"\n                  )\n                ) {\n                  requestMePermission();\n                }\n                // const { uri } = await Camera.takePictureAsync();\n                if (\n                  selectedImage.startsWith("http") ||\n                  selectedImage.startsWith("https")\n                ) {\n                  //处理网络图片\n                  const callback = (downloadProgress: any) => {\n                    const progress =\n                      downloadProgress.totalBytesWritten /\n                      downloadProgress.totalBytesExpectedToWrite;\n                    setProgess(progress);\n                  };\n\n                  const downloadResumable = FileSystem.createDownloadResumable(\n                    selectedImage,\n                    FileSystem.documentDirectory + "download.png",\n                    {},\n                    callback\n                  );\n                  try {\n                    const photoData: any =\n                      await downloadResumable.downloadAsync();\n                    const uri = photoData.uri;\n                    const asset = await MediaLibrary.createAssetAsync(uri);\n                    alert(JSON.stringify(asset));\n                    // setProgess(0);\n                  } catch (e) {\n                    alert(e);\n                  }\n                } else {\n                  const asset = await MediaLibrary.createAssetAsync(\n                    selectedImage\n                  );\n                  alert(JSON.stringify(asset));\n                }\n              }}\n            >\n              {`下载图片(${downloadProgress})`}\n            </Button>\n          </View>\n          <View style={{ width: 120, marginLeft: 20 }}>\n            <Button\n              onPress={async () => {\n                if (\n                  !(\n                    permissionMeResponse &&\n                    permissionMeResponse.accessPrivileges == "all"\n                  )\n                ) {\n                  requestMePermission();\n                }\n                if (\n                  selectedImage.startsWith("http") ||\n                  selectedImage.startsWith("https")\n                ) {\n                  //处理网络视频\n                  const callback = (downloadProgress: any) => {\n                    const progress =\n                      downloadProgress.totalBytesWritten /\n                      downloadProgress.totalBytesExpectedToWrite;\n                    setProgess(progress);\n                  };\n\n                  const downloadResumable = FileSystem.createDownloadResumable(\n                    recordUri,\n                    FileSystem.documentDirectory + "download.mp4",\n                    {},\n                    callback\n                  );\n                  try {\n                    const photoData: any =\n                      await downloadResumable.downloadAsync();\n                    const uri = photoData.uri;\n                    const asset = await MediaLibrary.createAssetAsync(uri);\n                    alert(JSON.stringify(asset));\n                    setProgess(0);\n                  } catch (e) {\n                    alert(e);\n                  }\n                } else {\n                  const asset = await MediaLibrary.createAssetAsync(recordUri);\n                  alert(JSON.stringify(asset));\n                }\n              }}\n            >\n              {`下载视频(${downloadProgress})`}\n            </Button>\n          </View>\n        </View>\n      </View>\n      <Dialog\n        isVisible={visible && visibleFlag}\n        overlayStyle={{\n          height: "100%",\n          width: "100%",\n          backgroundColor: "black",\n        }}\n        onBackdropPress={() => {\n          reset();\n        }}\n      >\n        <Dialog.Title title="相机" />\n        {visible && (\n          <View>\n            <Camera\n              style={{ height: "90%" }}\n              type={type}\n              flashMode={FlashMode.auto}\n              barCodeScannerSettings={{\n                barCodeTypes: [BarCodeScanner.Constants.BarCodeType.qr],\n              }}\n              onBarCodeScanned={!scanned ? undefined : handleBarCodeScanned}\n              autoFocus={AutoFocus.on}\n              focusDepth={0}\n              ref={(el: any) => setCamerObj(el)}\n              whiteBalance={WhiteBalance.sunny}\n              zoom={scale / 10}\n              onMountError={(e) => {\n                requestPermission();\n                requestMPPermission();\n                // alert(JSON.stringify(e))\n              }}\n            ></Camera>\n          </View>\n        )}\n        {getActionContent()}\n        <View style={{ position: "absolute", right: 20, top: 20 }}>\n          <Text\n            style={{ color: "white" }}\n            onPress={() => {\n              reset();\n            }}\n          >\n            关闭\n          </Text>\n        </View>\n      </Dialog>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: "column",\n    alignItems: "center",\n    width: "100%",\n    height: "100%",\n    marginTop: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: "bold",\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: "80%",\n  },\n  imageContainer: {\n    // flex: 1,\n    // paddingTop: 58,\n    // backgroundColor:\'red\'\n  },\n  image: {\n    width: 300,\n    height: 400,\n    borderRadius: 18,\n  },\n  footerContainer: {\n    flex: 1 / 3,\n    alignItems: "center",\n  },\n  camera: {\n    flex: 1,\n  },\n  video: {\n    alignSelf: "center",\n    marginTop: 20,\n    width: 320,\n    height: 200,\n  },\n  buttons: {\n    flexDirection: "row",\n    justifyContent: "center",\n    alignItems: "center",\n  },\n});\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"注意事项"},"注意事项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"配置权限许可"},"配置权限许可"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'//app.json ios权限申请提示消息\n{\n  "expo": {\n    "plugins": [\n        [\n        "expo-image-picker",\n        {\n          "photosPermission": "custom photos permission",\n          "cameraPermission": "Allow $(PRODUCT_NAME) to open the camera",\n          "microphonePermission": "Allow $(PRODUCT_NAME) to access your microphone"\n        }\n      ],\n      [\n        "expo-camera",\n        {\n          "cameraPermission": "Allow $(PRODUCT_NAME) to access your camera.",\n          "microphonePermission": "Allow $(PRODUCT_NAME) to access your microphone"\n        }\n      ],\n      [\n        "expo-barcode-scanner",\n        {\n          "cameraPermission": "Allow $(PRODUCT_NAME) to access camera."\n        }\n      ],\n      [\n        "expo-av",\n        {\n          "microphonePermission": "Allow $(PRODUCT_NAME) to access your microphone."\n        }\n      ],\n      [\n        "expo-media-library",\n        {\n          "photosPermission": "Allow $(PRODUCT_NAME) to access your photos.",\n          "savePhotosPermission": "Allow $(PRODUCT_NAME) to save photos.",\n          "isAccessMediaLocationEnabled": true\n        }\n      ],]\n  }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"踩坑记录"},"踩坑记录"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、当相机的权限选择的是允许本次运行的时候，APP 保持运行状态，过段时间再打开 APP，发现相机无法唤醒/黑屏问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"问题的原因是授权过期了，无法取到权限对象"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"解决方案，相机抛出异常并且没有相机权限的时候，重新获取权限；在每次进入相机弹窗之前，先检查一下相机权限是否存在。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'<Camera\n  style={{ height: "90%" }}\n  type={type}\n  flashMode={FlashMode.auto}\n  barCodeScannerSettings={{\n    barCodeTypes: [BarCodeScanner.Constants.BarCodeType.qr],\n  }}\n  onBarCodeScanned={!scanned ? undefined : handleBarCodeScanned}\n  autoFocus={AutoFocus.on}\n  focusDepth={0}\n  ref={(el: any) => setCamerObj(el)}\n  whiteBalance={WhiteBalance.sunny}\n  zoom={scale / 10}\n  onMountError={(e) => {\n    requestPermission();\n    requestMPPermission();\n    // alert(JSON.stringify(e))\n  }}\n></Camera>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\n  useEffect(() => {\n    // alert('111')\n    if (visible && isVisibleByPower()) {\n      setVisibleFlag(true);\n    }\n    if (!(permission && permission.granted)) {\n      // Camera permissions are not granted yet\n      requestPermission();\n    }\n    if (!(mpPermission && mpPermission.granted)) {\n      requestMPPermission();\n    }\n    return () => {\n      setVisibleFlag(false);\n    };\n  }, [visible]);\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/expo/相机",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/expo/dynamic.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/expo/动态化更新",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"综述"},"综述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"对于App˜来说，每次下载更新无疑是一大痛点，为了解决这类问题，于是有了动态化方案，简单说如果不涉及新插件的迭代，那么通过动态打包js，css之后，推到远端，"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"是完全可以实现不用下载就能更新的。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"另一方面，小程序与H5本身就是动态化的，因此这里只讨论APP提供的原生动态化能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"expo官方提供了expo- update来支撑动态化能力，expo　本身提供了存储动态资源的能力，当然也可以自建服务存储。详见：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://docs.expo.dev/versions/latest/sdk/updates/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://docs.expo.dev/versions/latest/sdk/updates/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"核心实现"},"核心实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'import React from "react";\nimport { View,Text,} from "react-native";\nimport { Button, Dialog } from "@rneui/themed";\nimport * as Updates from "expo-updates";\nexport default function CheckAndUpdate() {\n  async function onFetchUpdateAsync() {\n    try {\n      const update = await Updates.checkForUpdateAsync();\n\n      if (update.isAvailable) {\n        await Updates.fetchUpdateAsync();\n        await Updates.reloadAsync();\n        alert(\'更新成功\')\n      }else{\n        alert(\'已是最新版本\')\n      }\n    } catch (error) {\n      // You can also add an alert() to see the error message in case of an error when fetching updates.\n      alert(`Error fetching latest Expo update: ${error}`);\n    }\n  }\n  return (\n    <View style={{ flex: 1, flexDirection: "row", justifyContent: "center" }}>\n      <View style={{ width: 150, marginRight: 5 }}>\n        <Button onPress={onFetchUpdateAsync}>检查更新(?)</Button>\n      </View>\n      {/* <View style={{ width: 150,marginLeft:5 }}>\n        <Button>检查更新2</Button>\n      </View> */}\n    </View>\n  );\n}\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"附录"},"附录"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"RN APP更新方案：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://blog.csdn.net/weixin_43972437/article/details/122113169",target:"_blank",rel:"nofollow noopener noreferrer"},"https://blog.csdn.net/weixin_43972437/article/details/122113169")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/expo/动态化更新",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/expo/expo-webview.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_webview_demo_jpeg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/webview-demo.jpeg"),_assets_webview_demo_jpeg__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_webview_demo_jpeg__WEBPACK_IMPORTED_MODULE_7__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/expo/webView",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"介绍"},"介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"webView 一直是 H5 集成在 APp 内部最快的方法，就连火爆的各类小程序也离不开 webView 的渲染。下面我们来介绍一下 expo 中 webview 的用法，包括如何与 App 通信，H5 路由与原生 App 路由跳转与返回问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"官方文档参考 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://docs.expo.dev/versions/latest/sdk/webview/",target:"_blank",rel:"nofollow noopener noreferrer"},"expo-webview")," ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://reactnative.cn/docs/webview",target:"_blank",rel:"nofollow noopener noreferrer"},"react-native-webview 中文文档")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"示例"},"示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_webview_demo_jpeg__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"webViewImg",style:{width:350,height:700}}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"核心代码讲解"},"核心代码讲解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"app-端"},"APP 端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'import React from "react";\nimport { WebView } from "react-native-webview";\nimport { useNavigation } from "expo-router";\nimport { BackHandler } from \'react-native\';\nexport function demo() {\n  //定义webview承接变量，便于APP与H5通过postMessage交互\n  let webViewRef: any = null;\n  //定义发消息的回掉函数，第一个window是web网站的window，响应的时候在web端，第二个是RN里的window,响应的时候已经嵌入app了\n  const injectedJavaScript = `\n  (function() {\n    window.postMessage2 = function(data) {\n      window.ReactNativeWebView.postMessage(data);\n    };\n  })()`;\n  const navigation:any = useNavigation()\n  const [canWebGoBack, setCanWebGoBack] = useState(false);\n  useEffect(() => {\n    const backHandlerListener = BackHandler.addEventListener(\'hardwareBackPress\',\n      () => {\n        // console.log(\'BACK PRESSED FROM APP\');\n        // // doSomethingThatIWant();\n        // // alert(\'BACK PRESSED FROM APP\')\n        // console.log(\'canWebGoBack\',canWebGoBack)\n        if(canWebGoBack&&webViewRef){\n         webViewRef.goBack()\n         //APP发消息给H5\n         webView.postMessage(\'H5APP内返回上一级成功\')\n        }else if(navigation.canGoBack()){\n          // alert(\'o\')\n          try{\n          navigation.goBack()\n          }catch(e){\n            return false\n          }\n        }\n        // webViewRef.goBack()\n        return true; // prevent default behaviour;\n      }\n    );\n\n    return () => {\n      backHandlerListener.remove();\n    };\n  }, [canWebGoBack]);\n  return(\n\n  <WebView\n    ref={(ref: any) => {\n      //   setWebViewRef(ref);\n      webViewRef = ref;\n    }}\n     onNavigationStateChange={(navState:any) => {\n      // webview内是否可以返回，webview内能返回的时候，要调用webview的返回，否则调用原生APP返回\n        if (navState.canGoBack) {\n            //可返回\n          setCanWebGoBack(true)\n        } else {\n            //不可\n          setCanWebGoBack(false)\n        }\n      }}\n    //在网页加载之前注入的一段 JS 代码。将回掉函数注入H5内并挂载在web页面的window下\n    injectedJavaScript={injectedJavaScript}\n    // 响应 window.ReactNativeWebView.postMessage(data);\n    onMessage={(event) => {\n      try {\n        // 传过来的 data 肯定为字符串，可以跟 web 端约定好交互的数据格式\n        // const data = JSON.parse(event.nativeEvent.data);\n        alert(JSON.stringify(event));\n      } catch (error) {\n        alert(error);\n        // handle parse error\n      }\n    }}\n    //设置 true 的时候会使用新的 WKWebView 来代替老的 UIWebView。\n    useWebKit\n    //控制是否启用 JavaScript。仅在安卓下使用，因为 IOS 默认为启用 JavaScript。默认值为true。\n    javaScriptEnabled={true}\n    //允许文件系统\n    allowFileAccess\n    onLoadEnd={() => {\n      if (webViewRef) {\n        // 加载webview成功\n        webViewRef.postMessage(selectedPdf);\n      }\n    }}\n    source={{\n      //加载的资源，不缓存\n      uri: "http://hundun.site/hundun-web-view/previewPDF.html",\n      method: "GET",\n      headers: { "Cache-Control": "no-cache" },\n      // uri:"http://localhost:9002/previewPDF.html"\n    }}\n  />);\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"webh5-端"},"web/H5  端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"发送消息给app"},"发送消息给App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'<div\n  onClick={() => {\n    const pWin: any = window;\n    if (pWin.postMessage2) {\n     //注入的回掉函数在这里触发\n      pWin.postMessage2("Web-TO-RN");\n    }\n  }}\n>\n  发消息\n</div>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"监听rn-app消息"},"监听RN-APP消息"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'  useEffect(() => {\n    const handleEvent = (event: any) => {\n      const url = event.data\n      setPreviewUrl(event.data)\n      alert(`RN-TO_WEB:${url}`)\n      // alert(`RN-TO-Web:${JSON.stringify(event)}`)\n    }\n    document.addEventListener("message", handleEvent)\n    return () => {\n      document.removeEventListener("message", handleEvent)\n    }\n  }, [])\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"webh5-端代码"},"web/H5 端代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'import React from "react";\n// import { Icon, Spin, Tooltip,Input } from \'antd\';\nimport "./PDF.less";\n\nimport { Document, Page, pdfjs } from "react-pdf";\nimport { SpinLoading, Input } from "antd-mobile";\n\npdfjs.GlobalWorkerOptions.workerSrc = `http://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n//https://juejin.cn/post/6888964708214013959\nclass File extends React.Component<any, any> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      pageNumber: 1,\n      pageNumberInput: 1,\n      pageNumberFocus: false,\n      numPages: 1,\n      pageWidth: 600,\n      fullscreen: false,\n    };\n  }\n\n  onDocumentLoadSuccess = ({ numPages }) => {\n    this.setState({ numPages: numPages });\n  };\n\n  lastPage = () => {\n    if (this.state.pageNumber == 1) {\n      return;\n    }\n    const page = this.state.pageNumber - 1;\n    this.setState({ pageNumber: page, pageNumberInput: page });\n  };\n  nextPage = () => {\n    if (this.state.pageNumber == this.state.numPages) {\n      return;\n    }\n    const page = this.state.pageNumber + 1;\n    this.setState({ pageNumber: page, pageNumberInput: page });\n  };\n  onPageNumberFocus = (e) => {\n    this.setState({ pageNumberFocus: true });\n  };\n  onPageNumberBlur = (e) => {\n    this.setState({\n      pageNumberFocus: false,\n      pageNumberInput: this.state.pageNumber,\n    });\n  };\n  onPageNumberChange = (e) => {\n    let value = e.target.value;\n    value = value <= 0 ? 1 : value;\n    value = value >= this.state.numPages ? this.state.numPages : value;\n    this.setState({ pageNumberInput: value });\n  };\n  toPage = (e) => {\n    this.setState({ pageNumber: Number(e.target.value) });\n  };\n\n  pageZoomOut = () => {\n    if (this.state.pageWidth <= 600) {\n      return;\n    }\n    const pageWidth = this.state.pageWidth * 0.8;\n    this.setState({ pageWidth: pageWidth });\n  };\n  pageZoomIn = () => {\n    const pageWidth = this.state.pageWidth * 1.2;\n    this.setState({ pageWidth: pageWidth });\n  };\n\n  pageFullscreen = () => {\n    if (this.state.fullscreen) {\n      this.setState({ fullscreen: false, pageWidth: 600 });\n    } else {\n      this.setState({ fullscreen: true, pageWidth: window.screen.width - 40 });\n    }\n  };\n\n  render() {\n    const {\n      pageNumber,\n      pageNumberFocus,\n      pageNumberInput,\n      numPages,\n      pageWidth,\n      fullscreen,\n    } = this.state;\n    return (\n      <div>\n        <div className={"view"}>\n          <div className={"pageContainer"}>\n            <Document\n              file={\n                this.props.previewurl ||\n                "https://pdf.dfcfw.com/pdf/H3_AP202304201585601855_1.pdf?1681977223000.pdf"\n              }\n              onLoadSuccess={this.onDocumentLoadSuccess}\n              loading={<SpinLoading color="primary" />}\n            >\n              <Page pageNumber={pageNumber} width={pageWidth} />\n            </Document>\n          </div>\n        </div>\n        <div className={"pageTool"}>\n          <div onClick={this.lastPage}>\n            {pageNumber == 1 ? "已是第一页" : "上一页"}\n          </div>\n          <div style={{ color: "white" }}>\n            <span>{pageNumberFocus ? pageNumberInput : pageNumber}</span>\n            <span>{`/${numPages}`}</span>\n          </div>\n          <div onClick={this.nextPage}>\n            {pageNumber == numPages ? "已是最后一页" : "下一页"}\n          </div>\n          <div onClick={this.pageZoomIn}>放大</div>\n          <div onClick={this.pageZoomOut}>缩小</div>\n          <div onClick={this.pageFullscreen}>\n            {fullscreen ? "退出" : "全屏"}\n          </div>\n          <div\n            onClick={() => {\n              const pWin: any = window;\n              if (pWin.postMessage2) {\n                pWin.postMessage2("Web-TO-RN");\n              }\n            }}\n          >\n            发消息\n          </div>\n          <div\n            onClick={() => {\n              window.location.href = "https://www.baidu.com/";\n            }}\n          >\n            　跳转到百度\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default (props) => <File {...props} />;\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"app-端代码"},"APP 端代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'import React from "react";\nimport { View, Text } from "react-native";\nimport { Button, Dialog } from "@rneui/themed";\nimport * as MediaLibrary from "expo-media-library";\nimport * as FileSystem from "expo-file-system";\nimport { useState, useEffect } from "react";\nimport * as Sharing from "expo-sharing";\nimport { WebView } from "react-native-webview";\nimport { Link, Tabs, useNavigation } from "expo-router";\n// const htmlStr = require(\'./downFileDist/index.html\')\n// alert(htmlStr)\nexport default function DownLoadFile() {\n  const [selectedPdf, setselectedPdf] =\n    useState <\n    any >\n    "https://pdf.dfcfw.com/pdf/H3_AP202304201585601855_1.pdf?1681977223000.pdf";\n  const [downloadProgress, setProgess] = useState(0);\n  const [htmlStr, setHtml] = useState("<div></div>");\n  const [visible, setVisible] = useState(false);\n  //   const [webViewRef, setWebViewRef] = useState<any>(null);\n  let webViewRef: any = null;\n  const injectedJavaScript = `\n  (function() {\n    window.postMessage2 = function(data) {\n      window.ReactNativeWebView.postMessage(data);\n    };\n  })()`;\n  const navigation: any = useNavigation();\n  return (\n    <View\n      style={{\n        marginTop: 20,\n        flex: 1,\n        flexDirection: "row",\n        justifyContent: "center",\n      }}\n    >\n      <View style={{ width: 150, marginRight: 5 }}>\n        <Button\n          onPress={async () => {\n            setProgess(0);\n            if (\n              selectedPdf.startsWith("http") ||\n              selectedPdf.startsWith("https")\n            ) {\n              //处理网络图片\n              const callback = (downloadProgress: any) => {\n                const progress =\n                  downloadProgress.totalBytesWritten /\n                  downloadProgress.totalBytesExpectedToWrite;\n                setProgess(progress);\n              };\n\n              const downloadResumable = FileSystem.createDownloadResumable(\n                selectedPdf,\n                FileSystem.documentDirectory + "大模型.pdf",\n                {},\n                callback\n              );\n              try {\n                const photoData: any = await downloadResumable.downloadAsync();\n                const uri = photoData.uri;\n                if (!(await Sharing.isAvailableAsync())) {\n                  alert(`分享无法使用`);\n                  return;\n                }\n                await Sharing.shareAsync(uri);\n              } catch (e) {\n                alert(e);\n              }\n            } else {\n              const asset = await MediaLibrary.createAssetAsync(selectedPdf);\n              alert(JSON.stringify(asset));\n            }\n          }}\n        >\n          {`下载文件(${parseInt(String(downloadProgress * 100))})%`}\n        </Button>\n      </View>\n      <View style={{ width: 150, marginLeft: 5 }}>\n        <Button\n          onPress={() => {\n            setVisible(true);\n          }}\n        >\n          预览文件\n        </Button>\n      </View>\n\n      <Dialog\n        isVisible={visible}\n        overlayStyle={{\n          height: "100%",\n          width: "100%",\n          backgroundColor: "black",\n        }}\n        onBackdropPress={() => {\n          //   reset();\n          setVisible(false);\n        }}\n      >\n        <Dialog.Title title="相机" />\n\n        <View style={{ width: "100%", height: "100%" }}>\n          <WebView\n            ref={(ref: any) => {\n              //   setWebViewRef(ref);\n              webViewRef = ref;\n            }}\n            onNavigationStateChange={(navState: any) => {\n              alert(JSON.stringify(navState));\n              if (navState.canGoBack) {\n                alert("truetrue");\n                navigation.setParams({\n                  headerLeftInfo: {\n                    title: "",\n                    onPress: () => webViewRef.current.goBack(),\n                  },\n                });\n              } else {\n                navigation.setParams({\n                  headerLeftInfo: null,\n                });\n              }\n            }}\n            injectedJavaScript={injectedJavaScript}\n            onMessage={(event) => {\n              try {\n                // 传过来的 data 肯定为字符串，可以跟 web 端约定好交互的数据格式\n                // const data = JSON.parse(event.nativeEvent.data);\n                alert(JSON.stringify(event));\n              } catch (error) {\n                alert(error);\n                // handle parse error\n              }\n            }}\n            useWebKit\n            javaScriptEnabled={true}\n            allowFileAccess\n            onLoadEnd={() => {\n              if (webViewRef) {\n                // alert(JSON.stringify(webViewRef.postMessage))\n                webViewRef.postMessage(selectedPdf);\n              }\n            }}\n            source={{\n              uri: "http://hundun.site/hundun-web-view/previewPDF.html",\n              method: "GET",\n              headers: { "Cache-Control": "no-cache" },\n              // uri:"http://localhost:9002/previewPDF.html"\n            }}\n          />\n        </View>\n        <View style={{ position: "absolute", right: 20, top: 20 }}>\n          <Text\n            style={{ color: "white" }}\n            onPress={() => {\n              setVisible(false);\n            }}\n          >\n            关闭\n          </Text>\n        </View>\n      </Dialog>\n    </View>\n  );\n}\n')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/expo/webView",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/expo/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/expo/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1综述"},"1.综述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"随着前端技术的发展，跨端成为一种主流的开发方式，主流的跨端方式有flutter,react native,weex，uniapp等，对前端来说，flutter与新学一门语言并无区别，"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"react native 、weex，uniapp则相对友好很多。本文侧重介绍react native的最简单的上手思路-",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://docs.expo.dev/",target:"_blank",rel:"nofollow noopener noreferrer"},"expo")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"expo 最大的优点是不需要配置开发环境，expo-cli，eas远端构建，缺点也很明显，国内的一些库可能无法通过原生方式应用，比如高德SDK"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2创建app"},"2.创建app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"\nnpx create-expo-app my-app\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3安装依赖"},"3.安装依赖"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"# 注意这里不要用taobao镜像，不然有的依赖可能没有\nnpm install \n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4下载expo-go-调试app"},"4.下载expo Go 调试App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"安卓手机点下列链接下载即可："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://d1ahtucjixef4r.cloudfront.net/Exponent-2.29.6.apk",target:"_blank",rel:"nofollow noopener noreferrer"},"https://d1ahtucjixef4r.cloudfront.net/Exponent-2.29.6.apk")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"iPhone点下列链接下载即可："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://dpq5q02fu5f55.cloudfront.net/Exponent-2.29.4.tar.gz",target:"_blank",rel:"nofollow noopener noreferrer"},"https://dpq5q02fu5f55.cloudfront.net/Exponent-2.29.4.tar.gz")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"注意："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"这个版本的expo Go只支持expo-sdk 47，48，49，使用其他sdk 可下载其他版本的expo Go"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"启动项目"},"启动项目"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"\nnpm start \n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"随后用expo Go App扫码即可"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5部署发布"},"5.部署发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"51-注册expo账户"},"5.1 注册expo账户"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"去 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://expo.dev/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://expo.dev/")," 注册 expo账户，为eas发布做准备"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"52-安装eas-cli"},"5.2 安装eas-cli"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"\nsudo npm install -g eas-cli@latest\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"53-部署发布"},"5.3 部署发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"android:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"eas build -p android --profile preview"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"iOS:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"eas build -p ios --profile preview"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-模版项目"},"6 模版项目"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/1623311678/expo-app-demo",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/1623311678/expo-app-demo")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"该项目使用expo-sdk49 配置了android eas-build 以及包括了常用的动态热更新，下载/分享文件，扫二维码，图片上传，保存到相册，录制视频，拍照上传，相机，webview，音视频，webview与H5通信，路由回退问题等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"可能的问题"},"可能的问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"由于CN，可能存在eas部署无法连接google cloud的问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"Build/Submit details page URL\nNo response\n\nSummary\nFailed to upload the project tarball to EAS Build\n\nCompressing project files and uploading to EAS Build. Learn more\n✖ Uploading to EAS Build (127 KB / 6.3 MB)\nFailed to upload the project tarball to EAS Build\n\nReason: request to https://storage.googleapis.com/turtle-v2-projects/production/7d986165-0e82-4ff4-a727-b8db7f25a3bf/e0b9aa26-fb11-418c-a10a-4c58d4b53d55?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=www-production%40exponentjs.iam.gserviceaccount.com%2F20230827%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20230827T132519Z&X-Goog-Expires=3601&X-Goog-SignedHeaders=host%3Bx-goog-content-length-range&X-Goog-Signature=1ea57402c1b5da14a26c5d73faf8130142e374edb56107881706d34e4845ed6eeb97c4b8dc3e5f9b55566a69082261745880e11f79f752d891c9b9600d750b6cf1b16ac6ece606bf279c99949f8f0a1c84d433250233ab8f67b3c00e7f4b6fd9367dea19c110689d927074367a54a8c0a7028cdf951279289d0200da87d0e3315c2461459780af0d0efe67258ab5494d68ba047bf4c7028ef5680faa9dfc76f1e884ed7e76386b003fb31d4e1c95fcc7dfccd7cbe852c37800aa6ad8033857483ff9e9285526afd7d4352ebde6f9f99197b609b271aa9ea004944516e10437c11db9b7fb0ce3cabb5199a2da08364235b1bec97a82327780b8c0f8087e6421b3 failed, reason: read ECONNRESET\nError: build command failed.\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考 issue　：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/expo/eas-cli/issues/2026",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/expo/eas-cli/issues/2026")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/expo/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/origin/env/android.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/原生/环境搭建/android",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"原生android环境"},"原生android环境"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考官网安装教程即可，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://reactnative.cn/docs/environment-setup",target:"_blank",rel:"nofollow noopener noreferrer"},"https://reactnative.cn/docs/environment-setup")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"需要注意的问题是，需要翻墙，推荐啊哈加速器，月租45"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"啊哈加速器下载链接：\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://wbs.ahaspeed.com/zh-hans/huanyinglaidaoahajiasuqi",target:"_blank",rel:"nofollow noopener noreferrer"},"https://wbs.ahaspeed.com/zh-hans/huanyinglaidaoahajiasuqi")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"安卓studio下载与安装："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"可能会出现，反复卡在sdk下载，以及代理的问题，参考下面的链接，设置proxy即可"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://stackoverflow.com/questions/73993450/android-sdk-is-unavailable-upon-first-startup-of-android-studio",target:"_blank",rel:"nofollow noopener noreferrer"},"https://stackoverflow.com/questions/73993450/android-sdk-is-unavailable-upon-first-startup-of-android-studio")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"最后，第一次打开android目录会比较慢，需要耐心等待"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/原生/环境搭建/android",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/origin/env/ios.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/原生/环境搭建/ios",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"原生ios环境"},"原生ios环境"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"需要下载xcode，下载xcode之前，先检查下自己的mac系统是否是最新的，如果不是先更新一下，否则后面更新了系统，xcode需要重新下载。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"按照官网的链接依次安装环境：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://reactnative.cn/docs/environment-setup",target:"_blank",rel:"nofollow noopener noreferrer"},"https://reactnative.cn/docs/environment-setup")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"注意要使用 brew install cocoapods 来安装cocoapods ，不要用gem，问题实在太多了。安装完之后，发现要求ruby的版本一般需要大于3"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如果是zshrc，依次执行下列命令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"\n brew link --overwrite cocoapods\n\n brew link --overwrite ruby \n\n echo 'export PATH=\"/usr/local/opt/ruby/bin:$PATH\"' >> ~/.zshrc\n\nsource  ~/.zshrc\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如果是bash shell把zshrc 换成对应的文件即可。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"最后，需要重新用react-cli初始化一个项目，不然老的原生依赖无法编译通过，或者尝试一下去ios目录下执行一下npx pod install命令能否跑起来项目"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/原生/环境搭建/ios",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ReactNative/taro/taro-intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/react-native/taro",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"taro"},"taro"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/react-native/taro",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/TypeScript/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/TypeScript/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"typescript-58-最新特性详解"},"TypeScript 5.8 最新特性详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"typescript-58-核心新特性"},"TypeScript 5.8 核心新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-控制流分析改进"},"1. 控制流分析改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// TypeScript 5.8 控制流分析增强\nconst controlFlowEnhancements = {\n  '更智能的类型收窄': {\n    description: '改进的控制流分析',\n    example: `\n      function processValue(value: string | number | boolean) {\n        if (typeof value === 'string') {\n          // 5.8中更精确的类型收窄\n          console.log(value.toUpperCase()); // value 被收窄为 string\n        } else if (typeof value === 'number') {\n          console.log(value.toFixed(2)); // value 被收窄为 number\n        } else {\n          console.log(value.valueOf()); // value 被收窄为 boolean\n        }\n      }\n    `\n  },\n  \n  '联合类型收窄': {\n    description: '更好的联合类型处理',\n    example: `\n      type Shape = \n        | { kind: 'circle'; radius: number }\n        | { kind: 'square'; size: number }\n        | { kind: 'rectangle'; width: number; height: number };\n      \n      function getArea(shape: Shape): number {\n        switch (shape.kind) {\n          case 'circle':\n            return Math.PI * shape.radius ** 2; // 精确收窄\n          case 'square':\n            return shape.size ** 2; // 精确收窄\n          case 'rectangle':\n            return shape.width * shape.height; // 精确收窄\n        }\n      }\n    `\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-装饰器增强"},"2. 装饰器增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// TypeScript 5.8 装饰器新特性\nconst decoratorEnhancements = {\n  '参数装饰器改进': {\n    description: '更强大的参数装饰器',\n    example: `\n      function Validate(min: number, max: number) {\n        return function (target: any, propertyKey: string, parameterIndex: number) {\n          // 5.8中参数装饰器功能增强\n          console.log(\\`Validating parameter \\${parameterIndex} of \\${propertyKey}\\`);\n        };\n      }\n      \n      class Calculator {\n        add(@Validate(0, 100) a: number, @Validate(0, 100) b: number) {\n          return a + b;\n        }\n      }\n    `\n  },\n  \n  '元数据反射': {\n    description: '改进的元数据反射支持',\n    example: `\n      import 'reflect-metadata';\n      \n      function Log(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n        const originalMethod = descriptor.value;\n        \n        descriptor.value = function (...args: any[]) {\n          console.log(\\`Calling \\${propertyKey} with args:\\`, args);\n          const result = originalMethod.apply(this, args);\n          console.log(\\`Result:\\`, result);\n          return result;\n        };\n        \n        return descriptor;\n      }\n      \n      class Example {\n        @Log\n        multiply(a: number, b: number): number {\n          return a * b;\n        }\n      }\n    `\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-类型推断优化"},"3. 类型推断优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// TypeScript 5.8 类型推断改进\nconst typeInferenceImprovements = {\n  '更智能的泛型推断': {\n    description: '改进的泛型类型推断',\n    example: `\n      // 5.8中更精确的泛型推断\n      function createArray<T>(length: number, value: T): T[] {\n        return Array(length).fill(value);\n      }\n      \n      const numbers = createArray(5, 42); // 推断为 number[]\n      const strings = createArray(3, 'hello'); // 推断为 string[]\n      const booleans = createArray(2, true); // 推断为 boolean[]\n    `\n  },\n  \n  '条件类型推断增强': {\n    description: '更强大的条件类型推断',\n    example: `\n      // 5.8中条件类型推断改进\n      type IsArray<T> = T extends any[] ? true : false;\n      type IsString<T> = T extends string ? true : false;\n      \n      type Test1 = IsArray<number[]>; // true\n      type Test2 = IsArray<string>;   // false\n      type Test3 = IsString<'hello'>; // true\n      type Test4 = IsString<number>;  // false\n      \n      // 更复杂的条件类型推断\n      type ExtractArrayType<T> = T extends (infer U)[] ? U : never;\n      type Test5 = ExtractArrayType<string[]>; // string\n      type Test6 = ExtractArrayType<number[]>; // number\n    `\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-模块解析改进"},"4. 模块解析改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},'// TypeScript 5.8 模块解析增强\nconst moduleResolutionImprovements = {\n  \'ES模块解析优化\': {\n    description: \'更好的ES模块支持\',\n    example: `\n      // 5.8中ES模块解析改进\n      // tsconfig.json\n      {\n        "compilerOptions": {\n          "module": "ESNext",\n          "moduleResolution": "bundler",\n          "allowImportingTsExtensions": true,\n          "noEmit": true\n        }\n      }\n      \n      // 支持更灵活的导入语法\n      import { Component } from \'./Component.js\';\n      import type { Props } from \'./types.js\';\n      import { createElement } from \'react\';\n    `\n  },\n  \n  \'路径映射增强\': {\n    description: \'改进的路径映射功能\',\n    example: `\n      // tsconfig.json 路径映射改进\n      {\n        "compilerOptions": {\n          "baseUrl": "./src",\n          "paths": {\n            "@/*": ["*"],\n            "@components/*": ["components/*"],\n            "@utils/*": ["utils/*"],\n            "@types/*": ["types/*"]\n          }\n        }\n      }\n      \n      // 使用路径映射\n      import { Button } from \'@/components/Button\';\n      import { formatDate } from \'@/utils/date\';\n      import type { User } from \'@/types/user\';\n    `\n  }\n};\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-性能优化"},"5. 性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// TypeScript 5.8 性能改进\nconst performanceImprovements = {\n  '编译速度提升': {\n    description: '显著的编译性能提升',\n    improvements: [\n      '增量编译优化',\n      '类型检查加速',\n      '内存使用优化',\n      '并行处理增强'\n    ]\n  },\n  \n  '内存效率': {\n    description: '更好的内存管理',\n    improvements: [\n      'AST内存占用减少',\n      '类型缓存优化',\n      '垃圾回收改进',\n      '内存泄漏防护'\n    ]\n  },\n  \n  '开发体验': {\n    description: '改进的开发体验',\n    improvements: [\n      '更快的语言服务',\n      '智能提示优化',\n      '错误检测加速',\n      '重构性能提升'\n    ]\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-错误处理改进"},"6. 错误处理改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// TypeScript 5.8 错误处理增强\nconst errorHandlingImprovements = {\n  '更友好的错误信息': {\n    description: '改进的错误提示',\n    example: `\n      // 5.8中更清晰的错误信息\n      interface User {\n        id: number;\n        name: string;\n        email: string;\n      }\n      \n      function createUser(user: Partial<User>) {\n        // 更精确的错误提示\n        return user;\n      }\n      \n      // 错误信息更加友好和具体\n      createUser({ id: 1, name: 'John' }); // 缺少 email 属性\n    `\n  },\n  \n  '类型错误定位': {\n    description: '更精确的错误定位',\n    improvements: [\n      '更好的错误位置标记',\n      '类型不匹配详细说明',\n      '建议修复方案',\n      '上下文信息增强'\n    ]\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"7-工具类型增强"},"7. 工具类型增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"// TypeScript 5.8 工具类型改进\nconst utilityTypeImprovements = {\n  '新的工具类型': {\n    description: '新增的实用工具类型',\n    examples: `\n      // 5.8中新增的工具类型\n      \n      // 更精确的 Partial\n      type DeepPartial<T> = {\n        [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n      };\n      \n      // 更强大的 Pick\n      type PickByType<T, U> = {\n        [K in keyof T as T[K] extends U ? K : never]: T[K];\n      };\n      \n      // 条件类型工具\n      type ConditionalKeys<T, U> = {\n        [K in keyof T]: T[K] extends U ? K : never;\n      }[keyof T];\n      \n      // 使用示例\n      interface User {\n        id: number;\n        name: string;\n        email: string;\n        age: number;\n      }\n      \n      type StringKeys = PickByType<User, string>; // { name: string; email: string }\n      type NumberKeys = PickByType<User, number>; // { id: number; age: number }\n    `\n  },\n  \n  '现有工具类型优化': {\n    description: '现有工具类型的改进',\n    improvements: [\n      'Partial 类型推断优化',\n      'Required 类型处理改进',\n      'Readonly 类型性能提升',\n      'Pick/Omit 类型精确性增强'\n    ]\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"8-配置选项增强"},"8. 配置选项增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},'// TypeScript 5.8 配置改进\nconst configImprovements = {\n  \'新的编译选项\': {\n    description: \'新增的编译器选项\',\n    options: `\n      // tsconfig.json 新选项\n      {\n        "compilerOptions": {\n          // 5.8 新增选项\n          "allowUnusedLabels": false,        // 禁止未使用的标签\n          "exactOptionalPropertyTypes": true, // 精确的可选属性类型\n          "noUncheckedIndexedAccess": true,   // 禁止未检查的索引访问\n          "noPropertyAccessFromIndexSignature": true, // 禁止从索引签名访问属性\n          \n          // 性能相关选项\n          "incremental": true,               // 增量编译\n          "tsBuildInfoFile": "./buildcache", // 构建信息文件位置\n          \n          // 模块解析选项\n          "moduleResolution": "bundler",     // 打包器模块解析\n          "allowImportingTsExtensions": true, // 允许导入 .ts 扩展名\n          "noEmit": true                     // 不输出文件\n        }\n      }\n    `\n  },\n  \n  \'严格模式增强\': {\n    description: \'更严格的类型检查\',\n    features: [\n      \'更精确的类型检查\',\n      \'更好的空值处理\',\n      \'改进的联合类型检查\',\n      \'增强的类型推断\'\n    ]\n  }\n};\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"typescript-58-与之前版本对比"},"TypeScript 5.8 与之前版本对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"性能对比"},"性能对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"const versionComparison = {\n  '编译速度': {\n    'TypeScript 5.7': '100% (基准)',\n    'TypeScript 5.8': '120% (提升20%)',\n    '改进原因': [\n      '增量编译优化',\n      '类型检查加速',\n      '内存使用优化',\n      '并行处理增强'\n    ]\n  },\n  \n  '内存使用': {\n    'TypeScript 5.7': '100% (基准)',\n    'TypeScript 5.8': '85% (减少15%)',\n    '优化原因': [\n      'AST内存占用减少',\n      '类型缓存优化',\n      '垃圾回收改进',\n      '内存泄漏防护'\n    ]\n  },\n  \n  '开发体验': {\n    'TypeScript 5.7': '100% (基准)',\n    'TypeScript 5.8': '130% (提升30%)',\n    '改进原因': [\n      '更快的语言服务',\n      '智能提示优化',\n      '错误检测加速',\n      '重构性能提升'\n    ]\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"特性对比表"},"特性对比表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"TypeScript 5.7"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"TypeScript 5.8"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"控制流分析")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基础支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"增强支持")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"装饰器")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"实验性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"稳定增强")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"类型推断")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基础"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"优化改进")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"模块解析")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"传统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"现代化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"性能")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基准"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"显著提升")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"错误处理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基础"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"友好改进")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"工具类型")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"标准"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"增强扩展")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"配置选项")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基础"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"丰富增强")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"迁移指南"},"迁移指南"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"从-typescript-57-升级到-58"},"从 TypeScript 5.7 升级到 5.8"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},"const migrationGuide = {\n  '自动升级': {\n    description: '自动升级步骤',\n    steps: [\n      'npm install typescript@5.8',\n      '检查 tsconfig.json 兼容性',\n      '运行类型检查',\n      '修复可能的类型错误'\n    ]\n  },\n  \n  '配置更新': {\n    description: '推荐配置更新',\n    updates: [\n      '启用新的严格模式选项',\n      '配置模块解析为 bundler',\n      '启用增量编译',\n      '配置构建缓存'\n    ]\n  },\n  \n  '代码优化': {\n    description: '代码优化建议',\n    suggestions: [\n      '利用改进的类型推断',\n      '使用新的工具类型',\n      '优化装饰器使用',\n      '改进错误处理'\n    ]\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"最佳实践"},"最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"typescript-58-最佳实践"},"TypeScript 5.8 最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-typescript"},'const bestPractices = {\n  \'类型安全\': `\n    // 使用新的严格模式选项\n    // tsconfig.json\n    {\n      "compilerOptions": {\n        "strict": true,\n        "exactOptionalPropertyTypes": true,\n        "noUncheckedIndexedAccess": true,\n        "noPropertyAccessFromIndexSignature": true\n      }\n    }\n  `,\n  \n  \'性能优化\': `\n    // 启用增量编译和缓存\n    // tsconfig.json\n    {\n      "compilerOptions": {\n        "incremental": true,\n        "tsBuildInfoFile": "./buildcache"\n      }\n    }\n  `,\n  \n  \'模块管理\': `\n    // 使用现代化的模块解析\n    // tsconfig.json\n    {\n      "compilerOptions": {\n        "module": "ESNext",\n        "moduleResolution": "bundler",\n        "allowImportingTsExtensions": true\n      }\n    }\n  `,\n  \n  \'错误处理\': `\n    // 利用改进的错误处理\n    function processData<T>(data: T): T {\n      if (!data) {\n        throw new Error(\'Data is required\'); // 更好的错误信息\n      }\n      return data;\n    }\n  `\n};\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"typescript-58-核心改进"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"TypeScript 5.8 核心改进")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"性能提升"),": 编译速度提升20%，内存使用减少15%"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"类型系统增强"),": 更智能的控制流分析，改进的类型推断"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开发体验优化"),": 更友好的错误信息，更快的语言服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"现代化支持"),": 更好的ES模块支持，现代化的模块解析")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"主要新特性"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"主要新特性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"控制流分析改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"装饰器功能增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"类型推断优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"模块解析改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能显著提升"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"错误处理改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"工具类型增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置选项丰富")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"升级建议"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h3"},"升级建议")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"立即升级"),": 新项目建议直接使用TypeScript 5.8"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渐进升级"),": 现有项目可以逐步升级，注意兼容性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置优化"),": 启用新的严格模式选项和性能优化选项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码重构"),": 利用新特性优化现有代码")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"TypeScript 5.8是一个重要的版本更新，在性能、类型系统和开发体验方面都有显著改进，强烈推荐升级使用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/7343548913033429011",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/7343548913033429011")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"typescript-最新特性与高频面试题"},"TypeScript 最新特性与高频面试题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"typescript-2024-最新特性与高频面试题含答案"},"TypeScript 2024 最新特性与高频面试题（含答案）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-typescript-5x2024-最新特性"},"1. TypeScript 5.x/2024 最新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"11-装饰器decorators正式进入标准"},"1.1 装饰器（Decorators）正式进入标准"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持类、属性、方法、访问器、参数装饰器，语法与 ES Decorators 标准一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"@sealed\nclass MyClass {}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"12-const-type-parameters"},"1.2 const type parameters"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持类型参数 const 修饰，提升泛型类型推断能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"function foo<const T extends string[]>(arr: T) {}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"13-extends-infer-支持"},"1.3 extends infer 支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持在条件类型中 infer 多个类型参数。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type Foo<T> = T extends [infer A, infer B] ? A | B : never;\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"14-交集类型简化"},"1.4 交集类型简化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"交集类型推断更智能，避免不必要的类型合并。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"15-其他增强"},"1.5 其他增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'支持 export type * from "..."，类型导出更灵活。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 using 声明资源释放。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能优化、类型推断更智能、错误提示更友好。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-高频-typescript-面试题与答案"},"2. 高频 TypeScript 面试题与答案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-基础与类型系统"},"2.1 基础与类型系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"TypeScript 和 JavaScript 的区别？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TypeScript 是 JavaScript 的超集，增加了静态类型、类型推断、接口、泛型、类型保护等，能在编译期发现错误。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"什么是类型推断？什么是类型断言？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"类型推断：TS 自动根据赋值/上下文推断变量类型。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"类型断言：开发者手动指定变量类型（如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"as string"),"），不会做类型转换。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"interface 和 type 有什么区别？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"interface 可多次声明合并、可继承、主要用于对象结构；type 更灵活，可用于联合/交叉类型、别名、不可合并。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"什么是联合类型、交叉类型、字面量类型？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"联合类型：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"A | B"),"，可为多种类型之一。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"交叉类型：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"A & B"),"，同时具备多种类型属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"字面量类型：具体值类型，如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"'foo' | 'bar'"),"。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"keyof、typeof、in、extends、infer 的作用？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"keyof：取对象所有键名组成的联合类型。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"typeof：取变量/表达式的类型。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"in：用于映射类型遍历属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"extends：条件类型/泛型约束。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"infer：在条件类型中推断类型变量。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Partial、Required、Readonly、Pick、Omit 等工具类型原理？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Partial<T>")," // JS 泛型注释：所有属性变可选。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Required<T>")," // JS 泛型注释：所有属性变必选。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Readonly<T>")," // JS 泛型注释：所有属性只读。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Pick 类型：选取部分属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Omit 类型：排除部分属性。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"211-interface-和-type-的详细区别"},"2.1.1 interface 和 type 的详细区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-语法和能力"},"1. 语法和能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"interface")," 只能用于描述对象、类的结构（属性、方法、索引、继承等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"type")," 可用于类型别名，支持基本类型、联合类型、交叉类型、元组、映射等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-声明合并"},"2. 声明合并"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"interface")," 支持多次声明同名接口，TS 会自动合并属性：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"interface A { x: number }\ninterface A { y: string }\n// 合并后等价于：interface A { x: number; y: string }\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"type")," 不支持声明合并，重复声明会报错。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-继承与扩展"},"3. 继承与扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"interface")," 支持 extends 继承多个接口，也可 implements 被类实现：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"interface B { foo: string }\ninterface C extends B { bar: number }\nclass D implements C { foo = 'a'; bar = 1 }\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"type")," 也可通过交叉类型扩展：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type E = { foo: string }\ntype F = E & { bar: number }\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-表达能力"},"4. 表达能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"type")," 能表达联合、交叉、条件、映射、元组等复杂类型：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type G = { a: number } | { b: string }\ntype H = { x: number } & { y: string }\ntype Tuple = [number, string]\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"interface")," 只能描述对象结构，不能直接表达联合/交叉类型。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-场景与最佳实践"},"5. 场景与最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"interface")," 描述对象、类、props、API 返回结构等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"type")," 定义基本类型别名、联合/交叉类型、复杂类型工具。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件 props 推荐 interface，工具类型/联合类型用 type。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"6-ts5-新特性"},"6. TS5+ 新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TS5.0 支持 interface 实现 symbol 索引签名、可选方法等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"但 type 依然在类型体操、复杂类型推导中更灵活。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"7-互相兼容"},"7. 互相兼容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"interface 和 type 可互相扩展：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"interface I { a: number }\ntype J = I & { b: string }\ninterface K extends J { c: boolean }\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"8-总结表格"},"8. 总结表格"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"interface"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"type"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"对象结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"联合类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"交叉类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"条件类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"声明合并"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"继承"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"implements"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"类型体操"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"推荐场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"对象/类"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"工具/联合")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"9-典型面试答法"},"9. 典型面试答法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'interface 更适合描述对象和类，支持声明合并和继承；type 更灵活，适合类型体操和复杂类型表达。实际开发中可结合使用，遵循"结构用 interface，类型运算用 type"的最佳实践。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"10-type-不能被类-implements"},"10. type 不能被类 implements"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"只有 interface 可以被类 implements，type 不能直接被 implements。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"示例："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"interface Foo { x: number }\nclass Bar implements Foo { x = 1 }\n\ntype Baz = { y: string }\n// 错误：A class can only implement an object type or intersection of object types with statically known members.\n// class Qux implements Baz { y = 'hi' } // ❌\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"但 type 如果是对象类型（非联合/交叉/条件类型），可被 implements，但不推荐，且复杂类型会报错。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"最佳实践：类实现结构建议用 interface。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-泛型与高级类型"},"2.2 泛型与高级类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"泛型的作用？如何定义泛型函数、泛型接口、泛型类？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"泛型用于复用类型逻辑、提升类型安全。定义：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"function foo<T>(arg: T): T {}"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"interface Box<T> { value: T }"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"class MyClass<T> {}")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"泛型约束、默认类型、条件类型、映射类型、分布式条件类型？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"约束：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<T extends U>")," 限定类型范围。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"默认类型：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<T = string>"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"条件类型：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"T extends U ? X : Y"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"映射类型：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"{ [K in keyof T]: ... }"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"分布式条件类型：条件类型作用于联合类型的每个成员。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"infer 关键字的用法？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"在条件类型中推断类型变量，如 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"T extends Promise<infer U> ? U : T"),"。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何实现 DeepPartial、DeepReadonly 等递归类型？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"递归遍历对象属性，遇到对象类型递归应用 Partial/Readonly。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type DeepPartial<T> = { [K in keyof T]?: DeepPartial<T[K]> };\n")))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"221-typescript-常见类型体操联合交叉条件映射元组"},"2.2.1 TypeScript 常见类型体操：联合、交叉、条件、映射、元组"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-联合类型union-type"},"1. 联合类型（Union Type）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"语法：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"A | B"),"，表示类型可以是 A 或 B。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"应用：参数/变量可为多种类型。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"示例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type Status = 'success' | 'error' | 'loading';\nlet s: Status = 'success';\ns = 'error'; // 合法\n// s = 'other'; // 报错\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-交叉类型intersection-type"},"2. 交叉类型（Intersection Type）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"语法：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"A & B"),"，表示类型同时具备 A 和 B 的属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"应用：对象混合、类型扩展。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"示例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type A = { foo: string };\ntype B = { bar: number };\ntype C = A & B; // { foo: string; bar: number }\nconst obj: C = { foo: 'hi', bar: 1 };\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-条件类型conditional-type"},"3. 条件类型（Conditional Type）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"语法：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"T extends U ? X : Y"),"，根据类型关系选择类型。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"应用：类型推导、类型变换。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"示例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type IsString<T> = T extends string ? true : false;\ntype A = IsString<'foo'>; // true\ntype B = IsString<123>;   // false\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-映射类型mapped-type"},"4. 映射类型（Mapped Type）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"语法：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"{ [K in Keys]: Type }"),"，对对象属性做批量变换。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"应用：工具类型（如 Partial、Readonly）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"示例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type MyPartial<T> = { [K in keyof T]?: T[K] };\ntype Obj = { a: number; b: string };\ntype PartialObj = MyPartial<Obj>; // { a?: number; b?: string }\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-元组类型tuple-type"},"5. 元组类型（Tuple Type）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"语法：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"[T1, T2, ...]"),"，定长、定类型的数组。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"应用：函数多返回值、结构化数据。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"示例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"const tuple: [number, string, boolean] = [1, 'hi', true];\nfunction usePair(): [string, number] {\n  return ['foo', 42];\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-类型体操与实战"},"2.3 类型体操与实战"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现一个类型：将字符串类型转为联合类型？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-ts"},"type StrToUnion<S extends string> = S extends `${infer F}${infer R}` ? F | StrToUnion<R> : never;\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现 PromiseAll 的类型推断？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用泛型和条件类型推断每个 Promise 的返回值，返回 Promise 类型的所有结果数组。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何实现链式调用类型？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用泛型和 this 返回类型递归定义链式方法。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何实现类型安全的事件总线？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用泛型约束事件名和参数类型，on/off/emit 方法类型安全。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何用 TS 实现 Redux 的 connect 类型推断？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用泛型、条件类型推断 mapStateToProps/mapDispatchToProps 的返回类型，合并到组件 props。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"24-实际开发场景"},"2.4 实际开发场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何在 React/Vue 项目中用好 TypeScript？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用类型声明 props、state、context、ref、事件等，结合泛型和工具类型提升类型安全。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何为第三方库编写类型声明文件（.d.ts）？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用 declare module、export type/interface、全局声明等，补充类型信息。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"any/unknown/never/void 区别？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"any：任意类型，关闭类型检查。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"unknown：安全的任意类型，赋值前需类型缩小。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"never：不可能的类型（如抛错、死循环）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"void：无返回值。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"如何用 TS 做 API 类型自动推断？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用泛型、条件类型、infer 自动推断接口返回值类型。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"TypeScript 编译配置（tsconfig）常用项？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"strict、target、module、jsx、esModuleInterop、baseUrl、paths、types、include/exclude 等。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一特性源码级分析或面试题详细答案，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/TypeScript/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Vue/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/Vue/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"vue2-与-vue3-全面对比与高频面试题"},"Vue2 与 Vue3 全面对比与高频面试题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-vue2-与-vue3-的核心区别"},"1. Vue2 与 Vue3 的核心区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"维度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Vue2"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Vue3"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"响应式原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Object.defineProperty"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Proxy（更高效、支持数组/Map/Set）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"组合逻辑"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Options API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Composition API（setup、hooks）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"首次渲染/更新较慢"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更快，内存占用更低，编译优化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"TypeScript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持有限"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"完全重写，类型推断友好")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Tree-shaking"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持，包体更小")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Fragment"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持多根节点")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Teleport"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持跨层级渲染")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Suspense"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"不支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持异步组件占位")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"2.x 生态成熟"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"3.x 生态逐步完善")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"兼容性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"兼容老项目"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"需升级适配")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"11-响应式系统对比"},"1.1 响应式系统对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue2 用 Object.defineProperty，无法监听新增/删除属性、数组索引变动。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 用 Proxy，能深度监听对象/数组/Map/Set，性能更优。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"12-api-设计对比"},"1.2 API 设计对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue2 以 Options API（data、methods、computed、watch）为主，逻辑分散。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 推荐 Composition API（setup、ref、reactive、computed、watchEffect），逻辑聚合、复用性强。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"composition-api-示例"},"Composition API 示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// Vue3 组合式写法\nimport { ref, computed } from 'vue';\nexport default {\n  setup() {\n    const count = ref(0);\n    const double = computed(() => count.value * 2);\n    return { count, double };\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"13-性能与编译优化"},"1.3 性能与编译优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 编译器更智能，静态提升、patch flag 优化 diff，首次渲染/更新更快。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 Tree-shaking，未用到的 API 不打包，包体更小。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"14-typescript-支持"},"1.4 TypeScript 支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 用 TS 重写，类型推断、IDE 体验大幅提升。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"15-新特性"},"1.5 新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fragment：支持多根节点组件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Teleport：跨层级渲染 DOM。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Suspense：异步组件占位/加载。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-高频面试题与标准答案"},"2. 高频面试题与标准答案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-vue2-和-vue3-响应式原理有何不同"},"2.1 Vue2 和 Vue3 响应式原理有何不同？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue2 用 Object.defineProperty，不能监听数组索引/对象新增属性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 用 Proxy，能深度监听对象/数组/Map/Set，性能更优，API 更一致。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-composition-api-有什么优势"},"2.2 Composition API 有什么优势？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"逻辑聚合、复用性强，支持 hooks，类型推断好，利于大型项目维护。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-vue3-性能优化点有哪些"},"2.3 Vue3 性能优化点有哪些？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"编译器静态提升、patch flag、Tree-shaking、Proxy 响应式、Fragment/Teleport/Suspense 支持。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"24-vue3-如何支持-typescript"},"2.4 Vue3 如何支持 TypeScript？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"全量 TS 重写，类型推断友好，IDE 智能提示完善。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"25-fragmentteleportsuspense-分别是什么"},"2.5 Fragment/Teleport/Suspense 分别是什么？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fragment：多根节点组件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Teleport：跨层级渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Suspense：异步组件占位/加载。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"26-vue3-如何实现-tree-shaking"},"2.6 Vue3 如何实现 Tree-shaking？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采用 ESM 导出，未用到的 API 不会被打包进最终产物。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"27-vue3-兼容性与迁移注意点"},"2.7 Vue3 兼容性与迁移注意点？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需升级依赖、适配新 API，部分 2.x 插件需等 3.x 版本。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"vue2-vs-vue3-的-dom-diff-算法详解"},"Vue2 vs Vue3 的 DOM Diff 算法详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-vue2-的-dom-diff-原理"},"1. Vue2 的 DOM Diff 原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"基于 snabbdom 算法，采用双端比较（头尾指针），核心流程：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"新旧节点头尾指针依次比较，能复用则 patch，不能则插入/删除。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"通过 key 优化复用，未命中则遍历查找。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"复杂场景下性能一般，静态节点每次都 diff。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"伪代码：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"while (oldStart <= oldEnd && newStart <= newEnd) {\n  if (sameNode(oldStart, newStart)) patch();\n  else if (sameNode(oldEnd, newEnd)) patch();\n  else if (sameNode(oldStart, newEnd)) move();\n  else if (sameNode(oldEnd, newStart)) move();\n  else searchByKey();\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-vue3-的-dom-diff-优化"},"2. Vue3 的 DOM Diff 优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"依然基于双端比较，但引入了 Patch Flag、静态提升等多项优化：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Patch Flag"),"：编译期标记动态节点，运行时只 diff 有变化的部分，极大减少无效比较。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"静态提升"),"：静态节点只生成一次，后续渲染直接复用，无需 diff。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最长递增子序列（LIS）"),"：优化子节点移动，最少 DOM 操作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Fragment 支持"),"：多根节点 diff 更高效。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能对比：Vue3 在大列表、静态内容、复杂嵌套场景下明显优于 Vue2。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"patch-flag-示例"},"Patch Flag 示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 编译后 patchFlag 标记动态属性/事件/文本\ncreateVNode('div', { id: dynamicId }, null, PatchFlags.PROPS)\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"静态提升示意"},"静态提升示意"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 静态节点只生成一次，后续直接复用\nconst staticVNode = createVNode('div', { class: 'static' })\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-面试答题要点"},"3. 面试答题要点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue2 diff 主要靠双端比较和 key，静态节点每次都 diff。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 diff 引入 patch flag、静态提升、LIS，极大提升性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue3 只 diff 有 patchFlag 的动态节点，静态节点跳过。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fragment/Teleport 等新特性也对 diff 做了适配。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需源码级 diff 流程分析、性能对比 demo、patch flag/LIS 细节讲解，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/Vue/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/Vue/process.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("em",{parentName:"p"}," @source cursor @line_count 578 @branch master "),"/"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/Vue/演化进程",parameters:{docs:{description:{component:"Vue框架从2.0到3.6+的完整演化进程分析，包括各版本特性、性能对比、技术突破和未来趋势。"}}},mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"vue-演化进程详解"},"Vue 演化进程详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"vue-2x-时代-2016-2022"},"Vue 2.x 时代 (2016-2022)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-20-2016年9月"},"Vue 2.0 (2016年9月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"核心特性：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"引入虚拟DOM，提升渲染性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持服务端渲染(SSR)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"引入响应式系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件化开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"单文件组件(.vue)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vue Router 2.0"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vuex 状态管理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术架构：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// Vue 2.0 组件写法\nexport default {\n  data() {\n    return {\n      message: 'Hello Vue 2.0'\n    }\n  },\n  methods: {\n    handleClick() {\n      this.message = 'Updated'\n    }\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-26-2019年2月"},"Vue 2.6 (2019年2月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"重要更新：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-slot")," 指令，统一插槽语法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-memo")," 指令，优化列表渲染性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-once")," 指令的改进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"$listeners")," 对象"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"$scopedSlots")," 对象"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新增 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"$attrs")," 对象")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"插槽语法统一：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},'\x3c!-- 旧语法 --\x3e\n<template slot="header" slot-scope="props">\n  {{ props.text }}\n</template>\n\n\x3c!-- 新语法 --\x3e\n<template v-slot:header="props">\n  {{ props.text }}\n</template>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-27-2022年7月"},"Vue 2.7 (2022年7月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Vue 3 特性回迁：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 Composition API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<script setup>")," 语法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineProps"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineEmits"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineExpose")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 CSS v-bind"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-memo")," 指令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-bind")," 的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},".camel")," 修饰符"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-on")," 的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},".vnode")," 修饰符")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Composition API 示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"<script setup>\nimport { ref, computed } from 'vue'\n\nconst count = ref(0)\nconst doubleCount = computed(() => count.value * 2)\n\nconst increment = () => {\n  count.value++\n}\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"vue-3x-时代-2020-至今"},"Vue 3.x 时代 (2020-至今)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-30-2020年9月"},"Vue 3.0 (2020年9月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"革命性更新：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-性能提升"},"1. 性能提升"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"基于 Proxy 的响应式系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"编译时优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Tree-shaking 支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更小的包体积")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-composition-api"},"2. Composition API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"import { ref, reactive, computed, watch, onMounted } from 'vue'\n\nexport default {\n  setup() {\n    const count = ref(0)\n    const state = reactive({\n      name: 'Vue 3',\n      version: '3.0'\n    })\n    \n    const doubleCount = computed(() => count.value * 2)\n    \n    watch(count, (newVal, oldVal) => {\n      console.log(`Count changed from ${oldVal} to ${newVal}`)\n    })\n    \n    onMounted(() => {\n      console.log('Component mounted')\n    })\n    \n    return {\n      count,\n      state,\n      doubleCount\n    }\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-新特性"},"3. 新特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Teleport 组件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fragments (多根节点)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Suspense 组件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"全局 API 重构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TypeScript 支持增强")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-编译优化"},"4. 编译优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},'\x3c!-- 静态提升 --\x3e\n<div>\n  <span>静态内容</span>\n  <span>{{ dynamic }}</span>\n</div>\n\n\x3c!-- 编译后 --\x3e\nconst _hoisted_1 = createVNode("span", null, "静态内容")\n\nexport function render() {\n  return createVNode("div", null, [\n    _hoisted_1, // 静态节点被提升\n    createVNode("span", null, ctx.dynamic)\n  ])\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-32-2021年8月"},"Vue 3.2 (2021年8月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"重要更新：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"<script setup>")," 语法糖稳定版"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineProps"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineEmits"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineExpose")," 编译器宏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-memo")," 指令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"CSS v-bind"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能优化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"strong"},"<script setup>")," 完整示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"<script setup>\nimport { ref, computed } from 'vue'\n\n// Props 定义\nconst props = defineProps({\n  title: String,\n  count: {\n    type: Number,\n    default: 0\n  }\n})\n\n// Emits 定义\nconst emit = defineEmits(['update', 'delete'])\n\n// 响应式数据\nconst localCount = ref(props.count)\n\n// 计算属性\nconst doubleCount = computed(() => localCount.value * 2)\n\n// 方法\nconst handleClick = () => {\n  localCount.value++\n  emit('update', localCount.value)\n}\n\n// 暴露给父组件\ndefineExpose({\n  reset: () => {\n    localCount.value = 0\n  }\n})\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-33-2023年5月"},"Vue 3.3 (2023年5月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"新特性：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"泛型组件支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"改进的 TypeScript 支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineModel")," 宏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"defineSlots")," 宏"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"改进的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-bind")," 语法")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"泛型组件示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},'<script setup lang="ts" generic="T">\ninterface Props<T> {\n  items: T[]\n  itemKey: keyof T\n}\n\nconst props = defineProps<Props<T>>()\n<\/script>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"strong"},"defineModel")," 示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"<script setup>\n// 双向绑定简化\nconst modelValue = defineModel()\nconst count = defineModel('count', { default: 0 })\n\n// 等同于\n// const props = defineProps(['modelValue', 'count'])\n// const emit = defineEmits(['update:modelValue', 'update:count'])\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-34-2023年12月"},"Vue 3.4 (2023年12月)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"性能优化：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更快的响应式系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"改进的编译器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更好的 Tree-shaking"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内存使用优化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"新特性：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"改进的 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"v-bind")," 语法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更好的 TypeScript 支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能监控工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-35-2024年"},"Vue 3.5 (2024年)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"重要更新：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更快的渲染性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"改进的开发工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更好的错误处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"新的实验性特性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-36-2024年及以后"},"Vue 3.6+ (2024年及以后)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"未来规划：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更强大的编译器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更好的性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更多实验性特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态系统完善")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"革命性特性无虚拟dom-no-virtual-dom"},"革命性特性：无虚拟DOM (No Virtual DOM)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术背景："),'\nVue 3.6+ 引入了可选的"无虚拟DOM"模式，这是对传统虚拟DOM架构的重大突破。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"传统虚拟DOM vs 无虚拟DOM：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 传统虚拟DOM流程\n// 1. 数据变化 → 2. 生成新VNode → 3. Diff算法比较 → 4. 批量DOM更新\n\n// 无虚拟DOM流程  \n// 1. 数据变化 → 2. 直接更新DOM (编译时优化)\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"核心原理：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"\x3c!-- 编译时优化示例 --\x3e\n<template>\n  <div>\n    <span>{{ count }}</span>\n    <button @click=\"increment\">+1</button>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\n\nconst count = ref(0)\nconst increment = () => count.value++\n<\/script>\n\n\x3c!-- 无虚拟DOM编译结果 --\x3e\n<script>\n// 编译器直接生成高效的DOM更新代码\nfunction updateCount(newValue) {\n  // 直接定位到需要更新的DOM节点\n  textNode.textContent = newValue\n}\n\n// 无需创建VNode，无需Diff比较\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"性能优势对比：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"虚拟DOM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"无虚拟DOM"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"内存占用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"较高 (需要存储VNode树)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更低 (直接操作DOM)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"首次渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"中等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更快 (无VNode创建开销)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更新性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"依赖Diff算法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"直接更新，更快")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包体积"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包含VNode相关代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更小 (可选择性移除)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"适用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂动态内容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单静态内容")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"使用场景分析：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'// 适合无虚拟DOM的场景\n// 1. 静态内容较多的页面\n<template>\n  <div class="article">\n    <h1>{{ title }}</h1>\n    <p>{{ content }}</p>\n    <div class="static-content">\n      \x3c!-- 大量静态内容 --\x3e\n    </div>\n  </div>\n</template>\n\n// 2. 表单组件\n<template>\n  <form>\n    <input v-model="name" />\n    <input v-model="email" />\n    <button type="submit">提交</button>\n  </form>\n</template>\n\n// 3. 列表渲染 (简单场景)\n<template>\n  <ul>\n    <li v-for="item in items" :key="item.id">\n      {{ item.name }}\n    </li>\n  </ul>\n</template>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"配置方式：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// vite.config.js\nexport default {\n  plugins: [\n    vue({\n      // 启用无虚拟DOM模式\n      noVirtualDOM: true,\n      // 或者针对特定组件启用\n      noVirtualDOM: {\n        include: ['**/static/**/*.vue'],\n        exclude: ['**/dynamic/**/*.vue']\n      }\n    })\n  ]\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"混合模式：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},'\x3c!-- 同一应用中混合使用 --\x3e\n<template>\n  \x3c!-- 静态部分使用无虚拟DOM --\x3e\n  <StaticHeader />\n  \n  \x3c!-- 动态部分使用虚拟DOM --\x3e\n  <DynamicContent :data="complexData" />\n</template>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"性能测试数据：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 基准测试结果 (示例数据)\nconst benchmarks = {\n  '首次渲染': {\n    '虚拟DOM': '100ms',\n    '无虚拟DOM': '60ms', // 40% 提升\n  },\n  '更新性能': {\n    '虚拟DOM': '5ms',\n    '无虚拟DOM': '2ms', // 60% 提升\n  },\n  '内存占用': {\n    '虚拟DOM': '2MB',\n    '无虚拟DOM': '1.2MB', // 40% 减少\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术挑战与解决方案：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"编译复杂度增加")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 编译器需要更智能的静态分析\nconst compilerOptions = {\n  hoistStatic: true,      // 静态提升\n  cacheHandlers: true,    // 事件缓存\n  noVirtualDOM: true      // 无虚拟DOM优化\n}\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"调试工具适配")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// Vue DevTools 需要适配无虚拟DOM模式\nif (__DEV__ && !options.noVirtualDOM) {\n  // 传统调试模式\n} else {\n  // 无虚拟DOM调试模式\n}\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态系统兼容性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 第三方库需要检测运行模式\nexport function isNoVirtualDOM() {\n  return !!window.__VUE_NO_VIRTUAL_DOM__\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"未来发展方向：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"智能模式切换")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 编译器自动选择最优模式\nconst autoMode = {\n  // 根据组件复杂度自动选择\n  threshold: 100, // 节点数量阈值\n  fallback: 'virtual-dom' // 回退策略\n}\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"渐进式迁移")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 支持运行时模式切换\nconst app = createApp(App)\napp.config.compilerOptions.noVirtualDOM = true\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"性能监控")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 内置性能分析工具\nconst performance = {\n  trackMode: true,\n  metrics: ['render-time', 'memory-usage', 'update-frequency']\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"最佳实践建议：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景判断")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"静态内容 > 70% → 推荐无虚拟DOM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"复杂交互较多 → 保持虚拟DOM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能敏感场景 → 混合使用"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"迁移策略")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 渐进式迁移步骤\nconst migrationSteps = [\n  '1. 识别静态组件',\n  '2. 启用无虚拟DOM模式',\n  '3. 性能测试验证',\n  '4. 逐步扩展到更多组件'\n]\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"性能监控")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 关键指标监控\nconst metrics = {\n  '首次渲染时间': 'FCP < 1.5s',\n  '交互响应时间': 'TTI < 3.8s',\n  '内存使用': '< 50MB',\n  '更新频率': '> 60fps'\n}\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结："),'\n无虚拟DOM是Vue 3.6+最重要的技术突破之一，它通过编译时优化直接操作DOM，在特定场景下能显著提升性能。这标志着Vue从"虚拟DOM优先"向"性能优先"的转变，为未来的Web应用开发提供了新的可能性。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"版本对比总结"},"版本对比总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-2x-vs-vue-3x-核心差异"},"Vue 2.x vs Vue 3.x 核心差异"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Vue 2.x"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Vue 3.x"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"响应式系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Object.defineProperty"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Proxy")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"组件API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Options API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Composition API + Options API")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"中等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"显著提升")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包体积"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"较大"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更小 (Tree-shaking)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"TypeScript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"有限支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"原生支持")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"编译优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"较少"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"大量优化")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"性能对比"},"性能对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// Vue 2.x 响应式\nObject.defineProperty(obj, 'key', {\n  get() { return value },\n  set(newVal) { \n    value = newVal\n    // 触发更新\n  }\n})\n\n// Vue 3.x 响应式\nconst reactive = new Proxy(obj, {\n  get(target, key) { return target[key] },\n  set(target, key, value) {\n    target[key] = value\n    // 触发更新\n    return true\n  }\n})\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"未来趋势分析"},"未来趋势分析"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-性能持续优化"},"1. 性能持续优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"编译时优化"),"：更多静态分析，减少运行时开销"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"响应式系统"),"：更精细的依赖追踪"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渲染优化"),"：更智能的 diff 算法")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-开发体验提升"},"2. 开发体验提升"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"TypeScript 集成"),"：更完善的类型推导"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开发工具"),"：更强大的调试和分析工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"文档和教程"),"：更丰富的学习资源")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-生态系统发展"},"3. 生态系统发展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"官方库"),"：Vue Router、Pinia、Vite 等持续更新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"社区生态"),"：更多第三方库和工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"企业采用"),"：更多大型项目采用 Vue 3")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-新特性展望"},"4. 新特性展望"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Suspense 完善"),"：更好的异步组件支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"编译时优化"),"：更多编译时特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务端渲染"),"：更强大的 SSR 能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"微前端"),"：更好的微前端支持")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-技术演进方向"},"5. 技术演进方向"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 未来可能的语法\n<script setup>\n// 更简洁的响应式语法\nlet count = $ref(0)\nlet name = $ref('Vue')\n\n// 自动解包\nconsole.log(count) // 不需要 .value\n\n// 更强大的编译时优化\nconst expensive = $computed(() => {\n  // 复杂的计算逻辑\n})\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"迁移建议"},"迁移建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"vue-2x-到-vue-3x-迁移策略"},"Vue 2.x 到 Vue 3.x 迁移策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渐进式迁移"),"：使用 Vue 2.7 作为过渡版本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Composition API"),"：逐步引入新的 API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"生态系统"),"：更新相关依赖库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"测试覆盖"),"：确保功能完整性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"最佳实践"},"最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优先使用 Composition API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"充分利用 TypeScript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"保持代码简洁")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("em",{parentName:"p"},"本文档将持续更新，反映 Vue 生态系统的最新发展。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"vue-2-到-vue-3-迁移工具详解"},"Vue 2 到 Vue 3 迁移工具详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"官方迁移工具"},"官方迁移工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-vue-migration-build"},"1. Vue Migration Build"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"官方推荐的迁移工具，支持渐进式迁移")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装迁移构建版本\nnpm install @vue/compat@^3.4.0\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"配置方式：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// vite.config.js\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\nexport default defineConfig({\n  plugins: [\n    vue({\n      // 启用兼容模式\n      compat: {\n        // 启用所有兼容性警告\n        warn: true,\n        // 启用运行时兼容性检查\n        runtime: true\n      }\n    })\n  ]\n})\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主要功能：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"运行时兼容性检查"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动警告不兼容的API使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持Vue 2语法在Vue 3环境中运行"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"渐进式迁移支持")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-vuecompat-兼容性检查"},"2. @vue/compat 兼容性检查"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 自动检测不兼容的API\nconst compatWarnings = {\n  'GLOBAL_MOUNT': 'Vue.use() 已废弃，使用 app.use()',\n  'GLOBAL_EXTEND': 'Vue.extend() 已废弃',\n  'GLOBAL_PROTOTYPE': 'Vue.prototype 已废弃',\n  'GLOBAL_SET': 'Vue.set() 已废弃',\n  'GLOBAL_DELETE': 'Vue.delete() 已废弃',\n  'GLOBAL_NEXT_TICK': 'Vue.nextTick() 已废弃'\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"第三方迁移工具"},"第三方迁移工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-vue-migration-helper"},"1. vue-migration-helper"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"自动检测和修复常见迁移问题")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装工具\nnpm install -g vue-migration-helper\n\n# 运行迁移检查\nvue-migration-helper check ./src\n\n# 自动修复部分问题\nvue-migration-helper fix ./src\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"检测范围：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const migrationChecks = {\n  // 全局API变更\n  globalAPI: [\n    'Vue.use() → app.use()',\n    'Vue.component() → app.component()',\n    'Vue.directive() → app.directive()'\n  ],\n  \n  // 生命周期钩子\n  lifecycle: [\n    'beforeDestroy → beforeUnmount',\n    'destroyed → unmounted'\n  ],\n  \n  // 事件系统\n  events: [\n    '$on/$off/$once 已移除',\n    'eventBus 替代方案'\n  ],\n  \n  // 过滤器\n  filters: [\n    'filters 已移除',\n    'methods 或 computed 替代'\n  ]\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-vue-codemod"},"2. vue-codemod"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"基于AST的代码转换工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装codemod工具\nnpm install -g jscodeshift\nnpm install -g @vue/codemod\n\n# 运行转换\njscodeshift -t @vue/codemod/transforms/global-api.js src/\njscodeshift -t @vue/codemod/transforms/new-component-api.js src/\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"转换示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 转换前 (Vue 2)\nexport default {\n  name: 'MyComponent',\n  data() {\n    return { count: 0 }\n  },\n  methods: {\n    increment() {\n      this.count++\n    }\n  }\n}\n\n// 转换后 (Vue 3)\nimport { ref } from 'vue'\n\nexport default {\n  name: 'MyComponent',\n  setup() {\n    const count = ref(0)\n    \n    const increment = () => {\n      count.value++\n    }\n    \n    return {\n      count,\n      increment\n    }\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"自定义迁移工具开发"},"自定义迁移工具开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-语法验证工具架构"},"1. 语法验证工具架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"/* @source cursor @line_count 200 @branch master */\n\n// migration-validator.js\nimport { parse } from '@vue/compiler-sfc'\nimport { parse as parseJS } from '@babel/parser'\nimport traverse from '@babel/traverse'\n\nclass VueMigrationValidator {\n  constructor(options = {}) {\n    this.options = {\n      strict: false,\n      autoFix: false,\n      ...options\n    }\n    this.issues = []\n  }\n\n  // 验证Vue文件\n  validateVueFile(filePath, content) {\n    const issues = []\n    \n    try {\n      const { descriptor } = parse(content)\n      \n      // 检查模板\n      if (descriptor.template) {\n        issues.push(...this.validateTemplate(descriptor.template))\n      }\n      \n      // 检查脚本\n      if (descriptor.script) {\n        issues.push(...this.validateScript(descriptor.script))\n      }\n      \n      // 检查样式\n      if (descriptor.styles) {\n        issues.push(...this.validateStyles(descriptor.styles))\n      }\n      \n    } catch (error) {\n      issues.push({\n        type: 'error',\n        message: `解析错误: ${error.message}`,\n        line: error.line,\n        column: error.column\n      })\n    }\n    \n    return issues\n  }\n\n  // 验证模板语法\n  validateTemplate(template) {\n    const issues = []\n    \n    // 检查已废弃的指令\n    const deprecatedDirectives = [\n      { pattern: /v-on:keyup\\.enter/, replacement: 'v-on:keyup.enter' },\n      { pattern: /v-on:keyup\\.tab/, replacement: 'v-on:keyup.tab' }\n    ]\n    \n    // 检查过滤器语法\n    if (template.content.includes('|')) {\n      issues.push({\n        type: 'warning',\n        message: '过滤器语法已废弃，建议使用methods或computed',\n        line: this.findLineNumber(template.content, '|'),\n        suggestion: '使用计算属性或方法替代过滤器'\n      })\n    }\n    \n    return issues\n  }\n\n  // 验证脚本语法\n  validateScript(script) {\n    const issues = []\n    \n    try {\n      const ast = parseJS(script.content, {\n        sourceType: 'module',\n        plugins: ['jsx', 'typescript']\n      })\n      \n      traverse(ast, {\n        // 检查Vue 2 API使用\n        CallExpression(path) {\n          const { node } = path\n          \n          // 检查Vue.use()\n          if (node.callee.type === 'MemberExpression' &&\n              node.callee.object.name === 'Vue' &&\n              node.callee.property.name === 'use') {\n            issues.push({\n              type: 'error',\n              message: 'Vue.use() 已废弃，使用 app.use()',\n              line: node.loc?.start.line,\n              suggestion: '将 Vue.use() 替换为 app.use()'\n            })\n          }\n        },\n        \n        // 检查生命周期钩子\n        ObjectMethod(path) {\n          const { node } = path\n          const deprecatedHooks = ['beforeDestroy', 'destroyed']\n          \n          if (deprecatedHooks.includes(node.key.name)) {\n            const replacements = {\n              beforeDestroy: 'beforeUnmount',\n              destroyed: 'unmounted'\n            }\n            \n            issues.push({\n              type: 'warning',\n              message: `生命周期钩子 ${node.key.name} 已废弃`,\n              line: node.loc?.start.line,\n              suggestion: `使用 ${replacements[node.key.name]} 替代`\n            })\n          }\n        }\n      })\n      \n    } catch (error) {\n      issues.push({\n        type: 'error',\n        message: `脚本解析错误: ${error.message}`,\n        line: error.line\n      })\n    }\n    \n    return issues\n  }\n\n  // 生成迁移报告\n  generateReport() {\n    const report = {\n      summary: {\n        total: this.issues.length,\n        errors: this.issues.filter(i => i.type === 'error').length,\n        warnings: this.issues.filter(i => i.type === 'warning').length\n      },\n      issues: this.issues,\n      recommendations: this.generateRecommendations()\n    }\n    \n    return report\n  }\n\n  // 生成迁移建议\n  generateRecommendations() {\n    const recommendations = []\n    \n    const errorCount = this.issues.filter(i => i.type === 'error').length\n    const warningCount = this.issues.filter(i => i.type === 'warning').length\n    \n    if (errorCount > 0) {\n      recommendations.push('优先修复所有错误，这些是迁移的必需步骤')\n    }\n    \n    if (warningCount > 0) {\n      recommendations.push('逐步处理警告，这些是推荐的改进')\n    }\n    \n    return recommendations\n  }\n}\n\nexport default VueMigrationValidator\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-依赖分析工具"},"2. 依赖分析工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// dependency-analyzer.js\nimport { execSync } from 'child_process'\nimport fs from 'fs'\nimport path from 'path'\n\nclass DependencyAnalyzer {\n  constructor() {\n    this.vue2Dependencies = new Set()\n    this.vue3Dependencies = new Set()\n    this.incompatibleDependencies = new Set()\n  }\n\n  // 分析package.json依赖\n  analyzeDependencies(packageJsonPath) {\n    const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'))\n    const allDependencies = {\n      ...packageJson.dependencies,\n      ...packageJson.devDependencies\n    }\n\n    const analysis = {\n      vue2Deps: [],\n      vue3Deps: [],\n      incompatible: [],\n      recommendations: []\n    }\n\n    // Vue 2 相关依赖\n    const vue2Patterns = [\n      /^vue@^2\\./,\n      /^vue-router@^3\\./,\n      /^vuex@^3\\./,\n      /^@vue\\/cli/,\n      /^vue-template-compiler/\n    ]\n\n    // Vue 3 相关依赖\n    const vue3Patterns = [\n      /^vue@^3\\./,\n      /^vue-router@^4\\./,\n      /^pinia/,\n      /^@vue\\/compiler-sfc/\n    ]\n\n    // 不兼容的依赖\n    const incompatiblePatterns = [\n      /^element-ui/,\n      /^iview/,\n      /^ant-design-vue@^1\\./\n    ]\n\n    Object.entries(allDependencies).forEach(([name, version]) => {\n      const fullName = `${name}@${version}`\n      \n      if (vue2Patterns.some(pattern => pattern.test(fullName))) {\n        analysis.vue2Deps.push({ name, version, fullName })\n      }\n      \n      if (vue3Patterns.some(pattern => pattern.test(fullName))) {\n        analysis.vue3Deps.push({ name, version, fullName })\n      }\n      \n      if (incompatiblePatterns.some(pattern => pattern.test(fullName))) {\n        analysis.incompatible.push({ name, version, fullName })\n      }\n    })\n\n    // 生成迁移建议\n    analysis.recommendations = this.generateMigrationRecommendations(analysis)\n\n    return analysis\n  }\n\n  // 生成迁移建议\n  generateMigrationRecommendations(analysis) {\n    const recommendations = []\n\n    // Vue 2 依赖迁移建议\n    const migrationMap = {\n      'vue-router': { from: '^3.x', to: '^4.x', breaking: true },\n      'vuex': { from: '^3.x', to: '^4.x', breaking: true },\n      'element-ui': { from: '^2.x', to: 'element-plus', breaking: true },\n      'iview': { from: '^4.x', to: 'view-design', breaking: true },\n      'ant-design-vue': { from: '^1.x', to: '^3.x', breaking: true }\n    }\n\n    analysis.vue2Deps.forEach(dep => {\n      if (migrationMap[dep.name]) {\n        const migration = migrationMap[dep.name]\n        recommendations.push({\n          type: 'dependency',\n          package: dep.name,\n          current: dep.version,\n          target: migration.to,\n          breaking: migration.breaking,\n          description: `将 ${dep.name} 从 ${dep.version} 升级到 ${migration.to}`\n        })\n      }\n    })\n\n    return recommendations\n  }\n\n  // 检查依赖冲突\n  checkConflicts(analysis) {\n    const conflicts = []\n    \n    // 检查Vue版本冲突\n    const vue2Deps = analysis.vue2Deps.filter(dep => dep.name === 'vue')\n    const vue3Deps = analysis.vue3Deps.filter(dep => dep.name === 'vue')\n    \n    if (vue2Deps.length > 0 && vue3Deps.length > 0) {\n      conflicts.push({\n        type: 'version_conflict',\n        message: '检测到Vue 2和Vue 3版本冲突',\n        vue2: vue2Deps[0],\n        vue3: vue3Deps[0],\n        resolution: '选择一个Vue版本进行迁移'\n      })\n    }\n    \n    return conflicts\n  }\n}\n\nexport default DependencyAnalyzer\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-自动迁移工具"},"3. 自动迁移工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// auto-migrator.js\nimport fs from 'fs'\nimport path from 'path'\nimport { transform } from '@babel/core'\nimport VueMigrationValidator from './migration-validator.js'\n\nclass AutoMigrator {\n  constructor(options = {}) {\n    this.options = {\n      backup: true,\n      dryRun: false,\n      ...options\n    }\n    this.validator = new VueMigrationValidator()\n    this.migrationCount = 0\n  }\n\n  // 自动迁移Vue文件\n  async migrateVueFile(filePath) {\n    const content = fs.readFileSync(filePath, 'utf8')\n    const originalContent = content\n    \n    // 备份原文件\n    if (this.options.backup) {\n      const backupPath = `${filePath}.backup`\n      fs.writeFileSync(backupPath, content)\n    }\n    \n    let migratedContent = content\n    \n    // 应用迁移规则\n    migratedContent = this.applyMigrationRules(migratedContent)\n    \n    // 验证迁移结果\n    const issues = this.validator.validateVueFile(filePath, migratedContent)\n    const errors = issues.filter(i => i.type === 'error')\n    \n    if (errors.length > 0) {\n      console.warn(`迁移文件 ${filePath} 时发现错误:`, errors)\n      return { success: false, errors }\n    }\n    \n    // 写入迁移后的文件\n    if (!this.options.dryRun) {\n      fs.writeFileSync(filePath, migratedContent)\n    }\n    \n    this.migrationCount++\n    \n    return {\n      success: true,\n      changes: this.detectChanges(originalContent, migratedContent)\n    }\n  }\n\n  // 应用迁移规则\n  applyMigrationRules(content) {\n    let result = content\n    \n    // 规则1: 生命周期钩子迁移\n    const lifecycleMigrations = [\n      { from: 'beforeDestroy', to: 'beforeUnmount' },\n      { from: 'destroyed', to: 'unmounted' }\n    ]\n    \n    lifecycleMigrations.forEach(migration => {\n      const regex = new RegExp(`\\\\b${migration.from}\\\\b`, 'g')\n      result = result.replace(regex, migration.to)\n    })\n    \n    // 规则2: 全局API迁移\n    const globalAPIMigrations = [\n      { from: 'Vue.use(', to: 'app.use(' },\n      { from: 'Vue.component(', to: 'app.component(' },\n      { from: 'Vue.directive(', to: 'app.directive(' }\n    ]\n    \n    globalAPIMigrations.forEach(migration => {\n      result = result.replace(new RegExp(migration.from, 'g'), migration.to)\n    })\n    \n    // 规则3: 事件总线迁移\n    if (result.includes('$on') || result.includes('$off') || result.includes('$once')) {\n      result = this.migrateEventBus(result)\n    }\n    \n    // 规则4: 过滤器迁移\n    if (result.includes('filters:')) {\n      result = this.migrateFilters(result)\n    }\n    \n    return result\n  }\n\n  // 迁移事件总线\n  migrateEventBus(content) {\n    // 替换事件总线为mitt\n    let result = content\n    \n    // 添加mitt导入\n    if (!result.includes('import mitt')) {\n      result = result.replace(\n        /import.*from ['\"]vue['\"]/,\n        \"import { createApp } from 'vue'\\nimport mitt from 'mitt'\"\n      )\n    }\n    \n    // 替换事件总线使用\n    result = result.replace(/\\$on\\(/g, 'emitter.on(')\n    result = result.replace(/\\$off\\(/g, 'emitter.off(')\n    result = result.replace(/\\$once\\(/g, 'emitter.once(')\n    result = result.replace(/\\$emit\\(/g, 'emitter.emit(')\n    \n    return result\n  }\n\n  // 迁移过滤器\n  migrateFilters(content) {\n    // 将过滤器转换为计算属性或方法\n    const filterRegex = /filters:\\s*{([^}]+)}/g\n    let result = content\n    \n    result = result.replace(filterRegex, (match, filtersContent) => {\n      const filters = this.parseFilters(filtersContent)\n      const computedProps = filters.map(filter => \n        `computed: {\\n  ${filter.name}() {\\n    return ${filter.body}\\n  }\\n}`\n      ).join(',\\n')\n      \n      return computedProps\n    })\n    \n    return result\n  }\n\n  // 解析过滤器内容\n  parseFilters(filtersContent) {\n    const filters = []\n    const lines = filtersContent.split('\\n')\n    \n    let currentFilter = null\n    \n    lines.forEach(line => {\n      const trimmed = line.trim()\n      if (trimmed.includes(':')) {\n        const [name, body] = trimmed.split(':').map(s => s.trim())\n        filters.push({ name, body })\n      }\n    })\n    \n    return filters\n  }\n\n  // 检测变更\n  detectChanges(original, migrated) {\n    const changes = []\n    \n    if (original !== migrated) {\n      changes.push({\n        type: 'content_changed',\n        description: '文件内容已更新'\n      })\n    }\n    \n    return changes\n  }\n\n  // 批量迁移\n  async migrateDirectory(dirPath) {\n    const files = this.findVueFiles(dirPath)\n    const results = []\n    \n    for (const file of files) {\n      try {\n        const result = await this.migrateVueFile(file)\n        results.push({ file, ...result })\n      } catch (error) {\n        results.push({ file, success: false, error: error.message })\n      }\n    }\n    \n    return results\n  }\n\n  // 查找Vue文件\n  findVueFiles(dirPath) {\n    const files = []\n    \n    const walk = (currentPath) => {\n      const items = fs.readdirSync(currentPath)\n      \n      items.forEach(item => {\n        const fullPath = path.join(currentPath, item)\n        const stat = fs.statSync(fullPath)\n        \n        if (stat.isDirectory()) {\n          walk(fullPath)\n        } else if (item.endsWith('.vue')) {\n          files.push(fullPath)\n        }\n      })\n    }\n    \n    walk(dirPath)\n    return files\n  }\n\n  // 生成迁移报告\n  generateMigrationReport(results) {\n    const successful = results.filter(r => r.success)\n    const failed = results.filter(r => !r.success)\n    \n    return {\n      summary: {\n        total: results.length,\n        successful: successful.length,\n        failed: failed.length,\n        successRate: (successful.length / results.length * 100).toFixed(2) + '%'\n      },\n      details: {\n        successful,\n        failed\n      },\n      recommendations: this.generatePostMigrationRecommendations(results)\n    }\n  }\n\n  // 生成迁移后建议\n  generatePostMigrationRecommendations(results) {\n    const recommendations = []\n    \n    if (results.some(r => r.success && r.changes?.some(c => c.type === 'content_changed'))) {\n      recommendations.push('检查迁移后的代码，确保功能正常')\n    }\n    \n    if (results.some(r => !r.success)) {\n      recommendations.push('手动处理迁移失败的文件')\n    }\n    \n    recommendations.push('运行测试套件验证功能')\n    recommendations.push('更新相关文档和配置')\n    \n    return recommendations\n  }\n}\n\nexport default AutoMigrator\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-使用示例"},"4. 使用示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// migration-cli.js\n#!/usr/bin/env node\n\nimport AutoMigrator from './auto-migrator.js'\nimport DependencyAnalyzer from './dependency-analyzer.js'\nimport VueMigrationValidator from './migration-validator.js'\n\nasync function main() {\n  const args = process.argv.slice(2)\n  const command = args[0]\n  \n  switch (command) {\n    case 'analyze':\n      await analyzeProject(args[1] || '.')\n      break\n    case 'migrate':\n      await migrateProject(args[1] || '.')\n      break\n    case 'validate':\n      await validateProject(args[1] || '.')\n      break\n    default:\n      console.log(`\nVue Migration Tool\n\nUsage:\n  node migration-cli.js analyze [path]    - 分析项目迁移需求\n  node migration-cli.js migrate [path]    - 自动迁移项目\n  node migration-cli.js validate [path]   - 验证迁移结果\n      `)\n  }\n}\n\nasync function analyzeProject(projectPath) {\n  console.log('🔍 分析项目迁移需求...')\n  \n  const analyzer = new DependencyAnalyzer()\n  const validator = new VueMigrationValidator()\n  \n  // 分析依赖\n  const depAnalysis = analyzer.analyzeDependencies(path.join(projectPath, 'package.json'))\n  \n  // 分析代码\n  const migrator = new AutoMigrator({ dryRun: true })\n  const codeResults = await migrator.migrateDirectory(projectPath)\n  \n  console.log('\\n📊 分析报告:')\n  console.log('依赖分析:', depAnalysis)\n  console.log('代码分析:', migrator.generateMigrationReport(codeResults))\n}\n\nasync function migrateProject(projectPath) {\n  console.log('🚀 开始自动迁移...')\n  \n  const migrator = new AutoMigrator({\n    backup: true,\n    dryRun: false\n  })\n  \n  const results = await migrator.migrateDirectory(projectPath)\n  const report = migrator.generateMigrationReport(results)\n  \n  console.log('\\n✅ 迁移完成!')\n  console.log('迁移报告:', report)\n}\n\nasync function validateProject(projectPath) {\n  console.log('✅ 验证迁移结果...')\n  \n  const validator = new VueMigrationValidator()\n  const migrator = new AutoMigrator({ dryRun: true })\n  \n  const results = await migrator.migrateDirectory(projectPath)\n  const issues = results.flatMap(r => r.issues || [])\n  \n  console.log('\\n🔍 验证结果:')\n  console.log('发现的问题:', issues)\n}\n\nmain().catch(console.error)\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"迁移工具的最佳实践"},"迁移工具的最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-渐进式迁移策略"},"1. 渐进式迁移策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const migrationStrategy = {\n  phase1: {\n    name: '准备阶段',\n    tasks: [\n      '安装Vue 3兼容性构建',\n      '更新构建工具配置',\n      '运行迁移检查工具'\n    ]\n  },\n  phase2: {\n    name: '依赖迁移',\n    tasks: [\n      '更新Vue Router到v4',\n      '迁移Vuex到Pinia',\n      '更新UI组件库'\n    ]\n  },\n  phase3: {\n    name: '代码迁移',\n    tasks: [\n      '迁移全局API',\n      '更新生命周期钩子',\n      '迁移事件总线'\n    ]\n  },\n  phase4: {\n    name: '优化阶段',\n    tasks: [\n      '采用Composition API',\n      '使用script setup语法',\n      '性能优化'\n    ]\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-测试策略"},"2. 测试策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const testingStrategy = {\n  unit: {\n    description: '单元测试验证',\n    tools: ['Jest', 'Vitest'],\n    focus: ['组件逻辑', '工具函数']\n  },\n  integration: {\n    description: '集成测试验证',\n    tools: ['Cypress', 'Playwright'],\n    focus: ['页面交互', '路由跳转']\n  },\n  e2e: {\n    description: '端到端测试',\n    tools: ['Cypress', 'Playwright'],\n    focus: ['完整用户流程']\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-回滚策略"},"3. 回滚策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const rollbackStrategy = {\n  code: {\n    backup: '.backup文件',\n    git: '使用Git分支',\n    description: '保留原始代码备份'\n  },\n  dependencies: {\n    lockfile: 'package-lock.json备份',\n    node_modules: '保留Vue 2版本',\n    description: '依赖版本管理'\n  },\n  deployment: {\n    blueGreen: '蓝绿部署',\n    canary: '金丝雀发布',\n    description: '渐进式部署策略'\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Vue 2到Vue 3的迁移是一个复杂的过程，需要综合考虑："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"工具选择"),"：官方工具 + 第三方工具 + 自定义工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"迁移策略"),"：渐进式迁移，分阶段进行"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"质量保证"),"：自动化测试 + 手动验证"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"风险控制"),"：备份策略 + 回滚方案")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"通过合理的工具组合和迁移策略，可以大大降低迁移风险，提高迁移效率。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"react-迁移工具生态对比"},"React 迁移工具生态对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-官方迁移工具"},"React 官方迁移工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-react-migration-scripts"},"1. React Migration Scripts"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"官方提供的迁移脚本，支持自动化迁移")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装迁移工具\nnpm install -g @reactjs/migration-scripts\n\n# 运行迁移检查\nnpx react-migration-scripts check\n\n# 自动迁移\nnpx react-migration-scripts migrate\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"支持的迁移类型：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const reactMigrationTypes = {\n  // 类组件到函数组件\n  classToFunction: {\n    description: '将类组件转换为函数组件',\n    examples: [\n      'React.Component → 函数组件',\n      'this.state → useState',\n      'this.props → props参数'\n    ]\n  },\n  \n  // 生命周期钩子迁移\n  lifecycle: {\n    description: '生命周期钩子迁移',\n    mappings: {\n      'componentDidMount': 'useEffect(() => {}, [])',\n      'componentDidUpdate': 'useEffect(() => {}, [deps])',\n      'componentWillUnmount': 'useEffect(() => { return cleanup }, [])'\n    }\n  },\n  \n  // Context API迁移\n  context: {\n    description: 'Context API使用方式迁移',\n    changes: [\n      'React.createContext() 语法更新',\n      'Consumer组件 → useContext Hook',\n      'Provider使用方式优化'\n    ]\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-react-codemods"},"2. React Codemods"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"基于AST的代码转换工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装jscodeshift\nnpm install -g jscodeshift\n\n# 运行React codemods\njscodeshift -t react-codemod/transforms/class.js src/\njscodeshift -t react-codemod/transforms/rename-unsafe-lifecycles.js src/\njscodeshift -t react-codemod/transforms/sort-comp.js src/\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"常用codemod转换：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 转换前 (类组件)\nclass MyComponent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { count: 0 }\n  }\n  \n  componentDidMount() {\n    console.log('Component mounted')\n  }\n  \n  handleClick = () => {\n    this.setState({ count: this.state.count + 1 })\n  }\n  \n  render() {\n    return (\n      <div onClick={this.handleClick}>\n        Count: {this.state.count}\n      </div>\n    )\n  }\n}\n\n// 转换后 (函数组件)\nimport React, { useState, useEffect } from 'react'\n\nfunction MyComponent() {\n  const [count, setCount] = useState(0)\n  \n  useEffect(() => {\n    console.log('Component mounted')\n  }, [])\n  \n  const handleClick = () => {\n    setCount(count + 1)\n  }\n  \n  return (\n    <div onClick={handleClick}>\n      Count: {count}\n    </div>\n  )\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"第三方react迁移工具"},"第三方React迁移工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-react-migration-helper"},"1. react-migration-helper"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"智能React迁移助手")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装工具\nnpm install -g react-migration-helper\n\n# 分析项目\nreact-migration-helper analyze ./src\n\n# 生成迁移报告\nreact-migration-helper report\n\n# 自动迁移\nreact-migration-helper migrate --auto-fix\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"功能特性：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const reactMigrationFeatures = {\n  // 智能检测\n  detection: [\n    '类组件识别',\n    '生命周期钩子检测',\n    'Context使用分析',\n    'Ref使用模式识别'\n  ],\n  \n  // 自动转换\n  transformation: [\n    '类组件 → 函数组件',\n    'this.state → useState',\n    'this.props → props',\n    '生命周期 → Hooks',\n    'Context.Consumer → useContext'\n  ],\n  \n  // 代码优化\n  optimization: [\n    '性能优化建议',\n    '最佳实践推荐',\n    'TypeScript类型推断',\n    'ESLint规则更新'\n  ]\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-react-hooks-migrator"},"2. react-hooks-migrator"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"专门针对Hooks迁移的工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装Hooks迁移工具\nnpm install -g react-hooks-migrator\n\n# 迁移生命周期钩子\nreact-hooks-migrator lifecycle ./src\n\n# 迁移状态管理\nreact-hooks-migrator state ./src\n\n# 迁移Context使用\nreact-hooks-migrator context ./src\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Hooks迁移映射：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const hooksMigrationMap = {\n  // 状态管理迁移\n  state: {\n    'this.state = { x: 0 }': 'const [x, setX] = useState(0)',\n    'this.setState({ x: 1 })': 'setX(1)',\n    'this.state.x': 'x'\n  },\n  \n  // 生命周期迁移\n  lifecycle: {\n    'componentDidMount()': 'useEffect(() => {}, [])',\n    'componentDidUpdate(prevProps)': 'useEffect(() => {}, [deps])',\n    'componentWillUnmount()': 'useEffect(() => { return cleanup }, [])'\n  },\n  \n  // 事件处理迁移\n  events: {\n    'this.handleClick = this.handleClick.bind(this)': 'const handleClick = () => {}',\n    'onClick={this.handleClick}': 'onClick={handleClick}'\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"自定义react迁移工具开发"},"自定义React迁移工具开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-react迁移验证器"},"1. React迁移验证器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"/* @source cursor @line_count 180 @branch master */\n\n// react-migration-validator.js\nimport { parse } from '@babel/parser'\nimport traverse from '@babel/traverse'\nimport fs from 'fs'\nimport path from 'path'\n\nclass ReactMigrationValidator {\n  constructor(options = {}) {\n    this.options = {\n      strict: false,\n      autoFix: false,\n      ...options\n    }\n    this.issues = []\n  }\n\n  // 验证React文件\n  validateReactFile(filePath, content) {\n    const issues = []\n    \n    try {\n      const ast = parse(content, {\n        sourceType: 'module',\n        plugins: ['jsx', 'typescript', 'decorators-legacy']\n      })\n      \n      traverse(ast, {\n        // 检查类组件\n        ClassDeclaration(path) {\n          const { node } = path\n          \n          // 检查是否继承React.Component\n          if (node.superClass && \n              node.superClass.type === 'MemberExpression' &&\n              node.superClass.object.name === 'React' &&\n              node.superClass.property.name === 'Component') {\n            \n            issues.push({\n              type: 'warning',\n              message: '检测到类组件，建议迁移到函数组件',\n              line: node.loc?.start.line,\n              suggestion: '使用函数组件和Hooks替代类组件'\n            })\n          }\n        },\n        \n        // 检查生命周期钩子\n        ClassMethod(path) {\n          const { node } = path\n          const deprecatedLifecycles = [\n            'componentWillMount',\n            'componentWillReceiveProps', \n            'componentWillUpdate'\n          ]\n          \n          if (deprecatedLifecycles.includes(node.key.name)) {\n            issues.push({\n              type: 'error',\n              message: `生命周期钩子 ${node.key.name} 已废弃`,\n              line: node.loc?.start.line,\n              suggestion: '使用useEffect替代'\n            })\n          }\n        },\n        \n        // 检查this.setState使用\n        CallExpression(path) {\n          const { node } = path\n          \n          if (node.callee.type === 'MemberExpression' &&\n              node.callee.property.name === 'setState') {\n            \n            issues.push({\n              type: 'info',\n              message: '检测到setState使用',\n              line: node.loc?.start.line,\n              suggestion: '考虑使用useState Hook'\n            })\n          }\n        },\n        \n        // 检查Context.Consumer使用\n        JSXElement(path) {\n          const { node } = path\n          \n          if (node.openingElement.name.name === 'Context.Consumer') {\n            issues.push({\n              type: 'info',\n              message: '检测到Context.Consumer使用',\n              line: node.loc?.start.line,\n              suggestion: '考虑使用useContext Hook'\n            })\n          }\n        }\n      })\n      \n    } catch (error) {\n      issues.push({\n        type: 'error',\n        message: `解析错误: ${error.message}`,\n        line: error.line\n      })\n    }\n    \n    return issues\n  }\n\n  // 生成迁移报告\n  generateReport() {\n    const report = {\n      summary: {\n        total: this.issues.length,\n        errors: this.issues.filter(i => i.type === 'error').length,\n        warnings: this.issues.filter(i => i.type === 'warning').length,\n        info: this.issues.filter(i => i.type === 'info').length\n      },\n      issues: this.issues,\n      recommendations: this.generateRecommendations()\n    }\n    \n    return report\n  }\n\n  // 生成迁移建议\n  generateRecommendations() {\n    const recommendations = []\n    \n    const classComponents = this.issues.filter(i => \n      i.message.includes('类组件')\n    ).length\n    \n    const deprecatedLifecycles = this.issues.filter(i => \n      i.message.includes('生命周期钩子')\n    ).length\n    \n    if (classComponents > 0) {\n      recommendations.push('优先迁移类组件到函数组件')\n    }\n    \n    if (deprecatedLifecycles > 0) {\n      recommendations.push('立即修复废弃的生命周期钩子')\n    }\n    \n    return recommendations\n  }\n}\n\nexport default ReactMigrationValidator\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-react依赖分析器"},"2. React依赖分析器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// react-dependency-analyzer.js\nimport fs from 'fs'\nimport path from 'path'\n\nclass ReactDependencyAnalyzer {\n  constructor() {\n    this.reactDependencies = new Set()\n    this.legacyDependencies = new Set()\n    this.migrationTargets = new Set()\n  }\n\n  // 分析package.json依赖\n  analyzeDependencies(packageJsonPath) {\n    const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'))\n    const allDependencies = {\n      ...packageJson.dependencies,\n      ...packageJson.devDependencies\n    }\n\n    const analysis = {\n      reactVersion: null,\n      legacyDeps: [],\n      migrationTargets: [],\n      recommendations: []\n    }\n\n    // 检测React版本\n    if (allDependencies.react) {\n      analysis.reactVersion = allDependencies.react\n      \n      if (allDependencies.react.startsWith('^16.') || \n          allDependencies.react.startsWith('^17.')) {\n        analysis.recommendations.push({\n          type: 'version',\n          message: '建议升级到React 18',\n          current: allDependencies.react,\n          target: '^18.0.0'\n        })\n      }\n    }\n\n    // 检测需要迁移的依赖\n    const legacyPatterns = [\n      /^react-router@^4\\./,\n      /^redux@^3\\./,\n      /^mobx@^4\\./,\n      /^antd@^3\\./,\n      /^material-ui@^3\\./\n    ]\n\n    const migrationTargets = {\n      'react-router': { from: '^4.x', to: '^6.x', breaking: true },\n      'redux': { from: '^3.x', to: '^4.x', breaking: true },\n      'mobx': { from: '^4.x', to: '^6.x', breaking: true },\n      'antd': { from: '^3.x', to: '^4.x', breaking: true },\n      'material-ui': { from: '^3.x', to: '@mui/material', breaking: true }\n    }\n\n    Object.entries(allDependencies).forEach(([name, version]) => {\n      if (legacyPatterns.some(pattern => pattern.test(`${name}@${version}`))) {\n        analysis.legacyDeps.push({ name, version })\n        \n        if (migrationTargets[name]) {\n          analysis.migrationTargets.push({\n            name,\n            current: version,\n            target: migrationTargets[name].to,\n            breaking: migrationTargets[name].breaking\n          })\n        }\n      }\n    })\n\n    return analysis\n  }\n\n  // 检查Hooks兼容性\n  checkHooksCompatibility(analysis) {\n    const issues = []\n    \n    if (analysis.reactVersion && \n        (analysis.reactVersion.startsWith('^16.') && \n         !analysis.reactVersion.includes('16.8'))) {\n      issues.push({\n        type: 'error',\n        message: 'React版本不支持Hooks',\n        current: analysis.reactVersion,\n        requirement: '需要React 16.8+才能使用Hooks'\n      })\n    }\n    \n    return issues\n  }\n}\n\nexport default ReactDependencyAnalyzer\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-react自动迁移器"},"3. React自动迁移器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// react-auto-migrator.js\nimport fs from 'fs'\nimport path from 'path'\nimport { transform } from '@babel/core'\nimport ReactMigrationValidator from './react-migration-validator.js'\n\nclass ReactAutoMigrator {\n  constructor(options = {}) {\n    this.options = {\n      backup: true,\n      dryRun: false,\n      ...options\n    }\n    this.validator = new ReactMigrationValidator()\n    this.migrationCount = 0\n  }\n\n  // 迁移React文件\n  async migrateReactFile(filePath) {\n    const content = fs.readFileSync(filePath, 'utf8')\n    const originalContent = content\n    \n    // 备份原文件\n    if (this.options.backup) {\n      const backupPath = `${filePath}.backup`\n      fs.writeFileSync(backupPath, content)\n    }\n    \n    let migratedContent = content\n    \n    // 应用迁移规则\n    migratedContent = this.applyMigrationRules(migratedContent)\n    \n    // 验证迁移结果\n    const issues = this.validator.validateReactFile(filePath, migratedContent)\n    const errors = issues.filter(i => i.type === 'error')\n    \n    if (errors.length > 0) {\n      console.warn(`迁移文件 ${filePath} 时发现错误:`, errors)\n      return { success: false, errors }\n    }\n    \n    // 写入迁移后的文件\n    if (!this.options.dryRun) {\n      fs.writeFileSync(filePath, migratedContent)\n    }\n    \n    this.migrationCount++\n    \n    return {\n      success: true,\n      changes: this.detectChanges(originalContent, migratedContent)\n    }\n  }\n\n  // 应用迁移规则\n  applyMigrationRules(content) {\n    let result = content\n    \n    // 规则1: 类组件转换为函数组件\n    result = this.convertClassToFunction(result)\n    \n    // 规则2: 生命周期钩子迁移\n    result = this.migrateLifecycleHooks(result)\n    \n    // 规则3: 状态管理迁移\n    result = this.migrateStateManagement(result)\n    \n    // 规则4: Context使用迁移\n    result = this.migrateContextUsage(result)\n    \n    return result\n  }\n\n  // 类组件转换为函数组件\n  convertClassToFunction(content) {\n    // 简单的类组件转换示例\n    const classComponentRegex = /class\\s+(\\w+)\\s+extends\\s+React\\.Component\\s*{([^}]+)}/g\n    \n    return content.replace(classComponentRegex, (match, className, classBody) => {\n      // 提取constructor\n      const constructorMatch = classBody.match(/constructor\\s*\\([^)]*\\)\\s*{([^}]+)}/)\n      const stateMatch = constructorMatch ? \n        constructorMatch[1].match(/this\\.state\\s*=\\s*({[^}]+})/) : null\n      \n      // 提取render方法\n      const renderMatch = classBody.match(/render\\s*\\(\\)\\s*{([^}]+)}/)\n      \n      if (renderMatch) {\n        let functionComponent = `function ${className}() {\\n`\n        \n        // 添加状态\n        if (stateMatch) {\n          functionComponent += `  const [state, setState] = useState(${stateMatch[1]})\\n`\n        }\n        \n        functionComponent += `  \\n  return (\\n    ${renderMatch[1].trim()}\\n  )\\n}`\n        \n        return functionComponent\n      }\n      \n      return match\n    })\n  }\n\n  // 迁移生命周期钩子\n  migrateLifecycleHooks(content) {\n    const lifecycleMigrations = [\n      { from: 'componentDidMount', to: 'useEffect(() => {}, [])' },\n      { from: 'componentWillUnmount', to: 'useEffect(() => { return cleanup }, [])' }\n    ]\n    \n    lifecycleMigrations.forEach(migration => {\n      const regex = new RegExp(`\\\\b${migration.from}\\\\b`, 'g')\n      content = content.replace(regex, migration.to)\n    })\n    \n    return content\n  }\n\n  // 迁移状态管理\n  migrateStateManagement(content) {\n    // 替换this.state访问\n    content = content.replace(/this\\.state\\.(\\w+)/g, '$1')\n    \n    // 替换this.setState\n    content = content.replace(/this\\.setState\\s*\\(\\s*{([^}]+)}\\s*\\)/g, \n      (match, stateUpdates) => {\n        const updates = stateUpdates.split(',').map(update => {\n          const [key, value] = update.split(':').map(s => s.trim())\n          return `set${key.charAt(0).toUpperCase() + key.slice(1)}(${value})`\n        })\n        return updates.join('\\n    ')\n      })\n    \n    return content\n  }\n\n  // 迁移Context使用\n  migrateContextUsage(content) {\n    // 替换Context.Consumer为useContext\n    const consumerRegex = /<(\\w+)\\.Consumer>\\s*{([^}]+)}\\s*<\\/\\1\\.Consumer>/g\n    \n    return content.replace(consumerRegex, (match, contextName, consumerBody) => {\n      return `{(() => {\n  const context = useContext(${contextName})\n  return ${consumerBody.trim()}\n})()}`\n    })\n  }\n\n  // 批量迁移\n  async migrateDirectory(dirPath) {\n    const files = this.findReactFiles(dirPath)\n    const results = []\n    \n    for (const file of files) {\n      try {\n        const result = await this.migrateReactFile(file)\n        results.push({ file, ...result })\n      } catch (error) {\n        results.push({ file, success: false, error: error.message })\n      }\n    }\n    \n    return results\n  }\n\n  // 查找React文件\n  findReactFiles(dirPath) {\n    const files = []\n    \n    const walk = (currentPath) => {\n      const items = fs.readdirSync(currentPath)\n      \n      items.forEach(item => {\n        const fullPath = path.join(currentPath, item)\n        const stat = fs.statSync(fullPath)\n        \n        if (stat.isDirectory()) {\n          walk(fullPath)\n        } else if (item.endsWith('.jsx') || item.endsWith('.tsx') || \n                   (item.endsWith('.js') && fs.readFileSync(fullPath, 'utf8').includes('React'))) {\n          files.push(fullPath)\n        }\n      })\n    }\n    \n    walk(dirPath)\n    return files\n  }\n}\n\nexport default ReactAutoMigrator\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"react-vs-vue-迁移工具对比"},"React vs Vue 迁移工具对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-迁移复杂度对比"},"1. 迁移复杂度对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"方面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"React"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"Vue"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"语法变化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"中等 (类组件→函数组件)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"较大 (Options API→Composition API)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"状态管理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单 (this.state→useState)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"中等 (data→ref/reactive)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"生命周期")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"中等 (生命周期→useEffect)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单 (生命周期名称变化)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"全局API")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"无重大变化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"重大变化 (Vue.use→app.use)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"事件系统")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"无变化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"重大变化 ($on/$off移除)")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-工具生态对比"},"2. 工具生态对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const toolEcosystemComparison = {\n  react: {\n    official: [\n      'React Migration Scripts',\n      'React Codemods',\n      'Create React App迁移指南'\n    ],\n    thirdParty: [\n      'react-migration-helper',\n      'react-hooks-migrator',\n      'jscodeshift'\n    ],\n    customTools: [\n      'AST解析器',\n      '代码转换器',\n      '依赖分析器'\n    ]\n  },\n  \n  vue: {\n    official: [\n      'Vue Migration Build',\n      '@vue/compat',\n      'Vue 3迁移指南'\n    ],\n    thirdParty: [\n      'vue-migration-helper',\n      'vue-codemod',\n      'Vue CLI迁移工具'\n    ],\n    customTools: [\n      'Vue编译器SFC',\n      '模板解析器',\n      '依赖分析器'\n    ]\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-迁移策略对比"},"3. 迁移策略对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"const migrationStrategyComparison = {\n  react: {\n    approach: '渐进式迁移',\n    phases: [\n      '升级React版本到16.8+',\n      '逐步迁移类组件',\n      '引入Hooks',\n      '优化性能'\n    ],\n    risk: '低到中等',\n    timeline: '2-4周'\n  },\n  \n  vue: {\n    approach: '兼容性构建',\n    phases: [\n      '使用Vue 3兼容性构建',\n      '修复兼容性警告',\n      '迁移到Vue 3 API',\n      '采用新特性'\n    ],\n    risk: '中等',\n    timeline: '4-8周'\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结-1"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"React和Vue都有完善的迁移工具生态："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"react迁移工具特点"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h4"},"React迁移工具特点：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"官方支持强"),"：React团队提供完善的迁移指南和工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渐进式迁移"),"：可以逐步迁移，风险相对较低"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Hooks生态"),"：丰富的Hooks迁移工具和最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"社区活跃"),"：大量第三方迁移工具和插件")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"vue迁移工具特点"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h4"},"Vue迁移工具特点：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"兼容性构建"),"：官方提供兼容性构建，降低迁移风险"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"语法变化大"),"：需要更多的代码转换工作"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"生态系统迁移"),"：需要同时迁移相关依赖库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"工具链完善"),"：Vue编译器提供强大的代码分析能力")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"选择建议"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"h4"},"选择建议：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"React项目"),"：优先使用官方codemods + 第三方工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Vue项目"),"：使用兼容性构建 + 自定义迁移工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"大型项目"),"：都需要制定详细的迁移计划和回滚策略")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"两种框架的迁移工具都在不断发展，为开发者提供了越来越好的迁移体验。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/Vue/演化进程",parameters:{docs:{description:{component:"Vue框架从2.0到3.6+的完整演化进程分析，包括各版本特性、性能对比、技术突破和未来趋势。"}}},includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/WebSocket/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前后端通信/WebSocket/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"websocket介绍"},"WebSocket介绍"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前后端通信/WebSocket/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/assets/antd-mobile.jpg":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/antd-mobile.d3dec159.jpg"},"./stories/assets/article.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/article.712f05c6.png"},"./stories/assets/camera1.jpeg":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/camera1.738b9fbd.jpeg"},"./stories/assets/camera2.jpeg":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/camera2.337d5a23.jpeg"},"./stories/assets/camera3.jpeg":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/camera3.18564ff5.jpeg"},"./stories/assets/camera4.jpeg":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/camera4.df70c763.jpeg"},"./stories/assets/compile.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/compile.cf092625.png"},"./stories/assets/devRule.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/devRule.48426399.png"},"./stories/assets/hundun-cli.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/hundun-cli.668286fe.png"},"./stories/assets/logo.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/logo.87a958ca.png"},"./stories/assets/lowCode.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/lowCode.e224f0cb.png"},"./stories/assets/mircroClient.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/mircroClient.1de33592.png"},"./stories/assets/monitor.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/monitor.0129ccdf.png"},"./stories/assets/mvc-flow.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/mvc-flow.b46651fa.png"},"./stories/assets/node-mvc.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/node-mvc.3105803b.png"},"./stories/assets/plugin.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/plugin.4daedea5.png"},"./stories/assets/react-ui.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/react-ui.0285ea19.png"},"./stories/assets/template.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/template.c5f250f8.png"},"./stories/assets/view.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/view.ec1af5ff.png"},"./stories/assets/vue-ui.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/vue-ui.d912257b.png"},"./stories/assets/webview-demo.jpeg":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/webview-demo.7911a76f.jpeg"},"./stories/clientTrend/2023.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前端演进趋势/2023前端技术演进趋势",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2023前端技术演进趋势"},"2023前端技术演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2023前端技术演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、字节2023前端演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/SoyvF1GFgs_Hs49T1wnnZg",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/SoyvF1GFgs_Hs49T1wnnZg")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、2023前端总结（来源：不是海绵宝宝）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/NMd8Yd223alvzeFzZFcCZA",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/NMd8Yd223alvzeFzZFcCZA")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、2023年前端十大Web发展趋势（来源：前端之巅）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/jPltI2cIrMb8wnYKYhWY4g",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/jPltI2cIrMb8wnYKYhWY4g")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、2023前端十大趋势（来源：前端前沿技术）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/DhFxG4gflMAtcEOZ_oFY0w",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/DhFxG4gflMAtcEOZ_oFY0w")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"5、"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"总结："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"SSR，SSG使用场景越来越多，平台化，serverless，全栈，一码多端，构建工具"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前端演进趋势/2023前端技术演进趋势",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/clientTrend/2024.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前端演进趋势/2024前端技术演进趋势",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2024前端技术演进趋势"},"2024前端技术演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2024前端技术演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、2024 7个web前端技术趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/bkORZi1kPS6ter3PyDxT0g",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/bkORZi1kPS6ter3PyDxT0g")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、2024款最新前端技术趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/K0wNvrvUim9Er5aJZFlIpQ",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/K0wNvrvUim9Er5aJZFlIpQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、2024前端演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/hehvaZmUDSdRuA4iOBf8Vw",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/hehvaZmUDSdRuA4iOBf8Vw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、2024前端技术趋势（腾讯云）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/LiygBJqMN8U_vSpAjxMibQ",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/LiygBJqMN8U_vSpAjxMibQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"5、从2023看2024前端发展趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/5Izxd7LCP_Y2lA1wFwprzQ",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/5Izxd7LCP_Y2lA1wFwprzQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"6、2024 前端怎么卷？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://mp.weixin.qq.com/s/O1dNASBd_EMyXHr83k73Pw",target:"_blank",rel:"nofollow noopener noreferrer"},"https://mp.weixin.qq.com/s/O1dNASBd_EMyXHr83k73Pw")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"总结：AI元年，大模型提高生产力，低代码不局限于前端，全栈依旧是趋势，服务端渲染备受青睐，平台化"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前端演进趋势/2024前端技术演进趋势",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/clientTrend/2025.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前端演进趋势/2025前端技术演进趋势",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"2025前端技术演进趋势"},"2025前端技术演进趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2025年，前端技术将迎来多维度的创新与变革，以下为业内主流趋势总结："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-ai驱动的前端开发"},"1. AI驱动的前端开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"浏览器原生AI能力（如Chrome Prompt API）将普及，前端可直接调用AI模型，实现内容生成、智能交互、自动摘要等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"AI辅助开发（如Copilot、AI Lint、AI测试）成为标配，极大提升开发效率与代码质量。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Prompt驱动开发工具兴起，开发者用自然语言即可生成UI、代码、测试用例。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-webassemblywasm普及"},"2. WebAssembly（Wasm）普及"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Wasm成为高性能Web应用的标配，Rust/Go等语言可直接编译为Wasm，提升前端计算能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Wasm应用场景扩展至视频编辑、3D渲染、科学计算、游戏等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-pwa-20与web原生能力增强"},"3. PWA 2.0与Web原生能力增强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA支持更丰富的原生API（如HID、蓝牙、文件系统），Web应用体验接近原生App。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"离线能力、推送、硬件访问等持续增强，PWA成为企业级应用首选。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-微前端与模块联邦"},"4. 微前端与模块联邦"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微前端架构成熟，Module Federation等技术实现多团队独立开发、部署与复用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件生态与设计系统（如Figma、Storybook）深度集成，提升协作与一致性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-低代码无代码平台"},"5. 低代码/无代码平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"低代码、无代码平台普及，非开发者也能高效构建业务应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"AI与低代码结合，自动生成页面、流程、数据模型。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-web3与去中心化应用"},"6. Web3与去中心化应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"区块链、智能合约、去中心化存储（如IPFS）等技术融入前端，DApp开发需求增长。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"钱包集成、NFT、数字身份等成为新兴前端能力。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-可访问性与可持续性"},"7. 可访问性与可持续性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"无障碍设计（a11y）成为强制标准，自动化工具集成CI/CD流程。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"绿色前端（Green Web）：高效代码、绿色托管、低碳设计成为新关注点。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-主流框架与工具链演进"},"8. 主流框架与工具链演进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React 19、Next.js 15、Vue 3.5、Svelte 5等持续优化性能与开发体验。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SSR/SSG/Edge Rendering普及，内容渲染更快、SEO更优。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TypeScript成为默认选项，Rust等新兴语言在前端基础设施中应用增多。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vite、Turbopack、Nx、Turborepo等新一代构建/管理工具提升效率。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-三维arvr与可视化"},"9. 三维/AR/VR与可视化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WebGL、Three.js、Babylon.js等推动3D/AR/VR在Web端落地，电商、教育、展示等场景普及。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据可视化与实时渲染能力增强，Web端体验更沉浸。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-性能优化与用户体验"},"10. 性能优化与用户体验"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Edge Functions、HTTP/3、CDN、骨架屏、懒加载等持续优化首屏与交互性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"个性化与上下文感知UI，AI根据用户行为动态调整界面与内容。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"11-全栈与跨端融合"},"11. 全栈与跨端融合"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端界限模糊，前端工程师需掌握全栈技能，Monorepo与零配置工具流行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'React Native、Flutter、Tauri等跨端框架持续优化，实现"一码多端"。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"12-生态与社区"},"12. 生态与社区"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件市场、开源项目、社区协作更加活跃，推动技术创新与知识共享。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"开发者需持续学习主流框架、TypeScript、Wasm、AI工具等，紧跟技术潮流。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"关键技术详解webassemblydapppwa-20"},"关键技术详解：WebAssembly、DApp、PWA 2.0"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-webassemblywasm"},"1. WebAssembly（Wasm）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义："),"\nWebAssembly（简称Wasm）是一种可在现代浏览器中运行的二进制指令格式，设计目标是让高性能代码（如C/C++/Rust/Go等编写）能在Web端高效运行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"原理：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Wasm代码由高级语言编译而来，体积小、加载快、执行效率高。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"浏览器内置Wasm虚拟机，能直接运行Wasm模块，与JavaScript无缝协作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合需要高性能计算的场景，如音视频处理、3D渲染、游戏、科学计算等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"应用场景：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"视频/音频编解码、图像处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"3D/AR/VR渲染（如Three.js结合Wasm）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"游戏引擎、仿真、科学计算"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"传统桌面应用迁移到Web（如AutoCAD Web版）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"发展趋势：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"越来越多Web应用采用Wasm提升性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Rust/Go等新兴语言在Web端应用增多"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与PWA、Web3等结合，拓展Web能力边界")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"相关技术栈与主流框架"},"相关技术栈与主流框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-webassemblywasm-1"},"1. WebAssembly（Wasm）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主流技术栈：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"编程语言：Rust、C/C++、Go、AssemblyScript、Zig"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"工具链：Emscripten（C/C++）、wasm-pack（Rust）、TinyGo（Go）、AssemblyScript CLI"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与JS集成：wasm-bindgen、wasmer、wasmtime")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主流框架/库：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Yew（Rust，Web前端框架，类似React）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Leptos（Rust，响应式Web框架）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Blazor WebAssembly（.NET/C#，微软官方）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Emscripten SDK（C/C++转Wasm）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"wasm-bindgen（Rust与JS互操作）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WebAssembly Studio（在线IDE）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态特点：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Rust生态最活跃，Yew/Leptos等框架适合构建高性能Web应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Blazor适合.NET开发者迁移Web"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与JS生态高度集成，适合性能瓶颈场景")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-dapp去中心化应用"},"2. DApp（去中心化应用）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义："),"\nDApp是基于区块链等去中心化网络构建的应用程序，核心特征是无中心服务器，数据和逻辑分布在区块链节点上。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"原理：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过智能合约实现业务逻辑，数据存储在区块链或去中心化存储（如IPFS）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户通过钱包（如MetaMask）与DApp交互，身份和资产自持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端通常为Web应用，后端为区块链网络")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"应用场景：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"去中心化金融（DeFi）、NFT市场、DAO、链游、数字身份等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型如Uniswap、OpenSea、ENS、Mirror等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"发展趋势：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Web3生态持续壮大，DApp数量和类型快速增长"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端需掌握钱包集成、智能合约交互、去中心化存储等新能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"安全性、用户体验、合规性成为DApp发展重点")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主流技术栈：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"区块链平台：以太坊（Ethereum）、Solana、Polygon、BNB Chain、Arbitrum等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"智能合约语言：Solidity（以太坊）、Move（Aptos/Sui）、Rust（Solana/NEAR）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端开发：React、Vue、Next.js、Svelte等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"钱包集成：MetaMask、WalletConnect、RainbowKit"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"去中心化存储：IPFS、Arweave、Filecoin")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主流框架/库：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"web3.js、ethers.js（以太坊JS库）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"wagmi（React DApp开发库）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RainbowKit（钱包UI集成）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Hardhat、Truffle、Foundry（智能合约开发/测试）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"The Graph（去中心化数据索引）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态特点：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"React+web3.js/ethers.js是DApp前端主流组合"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"钱包与合约交互库丰富，支持多链生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"智能合约开发工具链完善，测试与部署自动化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-pwa-20progressive-web-app-20"},"3. PWA 2.0（Progressive Web App 2.0）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义："),"\nPWA 2.0是新一代渐进式Web应用，融合了更多原生能力和现代Web API，让Web应用体验接近甚至超越原生App。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"原理：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"依托Service Worker实现离线缓存、消息推送、后台同步等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持原生API（如蓝牙、HID、文件系统、摄像头等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可安装到桌面/移动设备，拥有独立图标、启动页、全屏体验"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持Web App Manifest，便于系统集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"应用场景：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"企业级Web应用、内容平台、工具类应用、移动Web App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型如Twitter Lite、Google Maps PWA、阿里钉钉PWA等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"发展趋势：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA 2.0将成为Web应用主流形态，企业级应用大量采用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与Wasm、Web3等结合，拓展Web应用边界"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Web原生能力持续增强，体验与原生App趋同甚至超越")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主流技术栈：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端框架：React、Vue、Angular、Svelte、Next.js、Nuxt.js、Astro等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA核心API：Service Worker、Web App Manifest、Push API、Background Sync、Web Share、File System Access等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"构建工具：Vite、Webpack、Workbox（PWA工具库）、Lighthouse（性能检测）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"主流框架/库：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Workbox（Google官方PWA工具库）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Next.js/Nuxt.js（内置PWA插件）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Angular PWA（官方PWA支持）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SvelteKit PWA插件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA Builder（微软官方PWA生成工具）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态特点：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"各大主流前端框架均支持PWA能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Workbox等库简化PWA开发与缓存管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA与SSR/SSG/Edge Rendering结合，提升体验与SEO")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WebAssembly以Rust/C++/Go为主，Yew/Blazor等为代表框架，适合高性能Web。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"DApp以React+web3.js/ethers.js为主，配合Solidity/智能合约工具链，适合Web3应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA 2.0以主流前端框架+Service Worker/Workbox为主，适合企业级Web与移动端体验。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"三者生态日益融合，推动Web应用智能化、去中心化与原生体验升级。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结："),"\n2025年前端将以AI驱动、性能为核心，融合WebAssembly、PWA、Web3、低代码、微前端、3D/AR等新技术，推动Web体验向智能化、沉浸化、全场景覆盖演进。开发者需关注AI、Wasm、PWA、Web3、主流框架、可访问性、绿色前端等方向，持续提升全栈与创新能力，迎接前端新纪元。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"pwa快应用rn-app-区别对比"},"PWA、快应用、RN APP 区别对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-pwaprogressive-web-app"},"1. PWA（Progressive Web App）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义：")," 渐进式Web应用，基于Web标准（HTML/CSS/JS），通过Service Worker、Web App Manifest等API实现接近原生App的体验。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术原理：")," 运行于浏览器，支持离线、推送、安装到桌面/主屏，访问Web原生API。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态：")," 各大主流前端框架（React/Vue/Angular等）均支持，Workbox等工具链丰富。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"优点：")," 跨平台、无需上架、更新便捷、开发成本低、SEO友好。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"缺点：")," 部分原生能力受限（如蓝牙、传感器等），性能略逊于原生App，部分浏览器兼容性差异。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景：")," 企业级Web、内容平台、工具类、轻量级移动应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-快应用quick-app"},"2. 快应用（Quick App）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义：")," 由华为等中国厂商主导的轻量级应用标准，运行于安卓设备的快应用引擎，兼具Web和原生特性。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术原理：")," 使用自有DSL（.ux/.js/.css/.json），运行在快应用引擎（非浏览器），可调用丰富原生API，支持动态发布。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态：")," 主要面向中国安卓市场，华为、小米、OPPO、vivo等厂商共同推动，开发工具和组件库完善。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"优点：")," 原生能力强、无需安装、入口丰富（负一屏、快应用中心等）、包体小、动态更新。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"缺点：")," 仅限安卓生态，iOS不支持，生态相对封闭，需适配多厂商平台。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景：")," 国内安卓用户为主的轻量级应用、O2O、工具、内容分发等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-rn-appreact-native-app"},"3. RN APP（React Native App）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义：")," 基于React的跨平台原生应用开发框架，JS代码通过Bridge与原生模块通信，渲染原生UI组件。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"技术原理：")," JS运行在独立引擎，通过Bridge调用原生API，UI为原生控件，支持iOS/Android双端。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态：")," Facebook主导，社区活跃，组件库丰富，支持热更新、第三方原生模块扩展。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"优点：")," 性能接近原生、可复用Web开发经验、跨平台、生态成熟、原生扩展能力强。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"缺点：")," Bridge通信有性能瓶颈，复杂动画/高性能场景需原生开发，包体相对较大，升级和兼容性需关注。\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"适用场景：")," 需要高性能、复杂交互、原生体验的中大型App，企业级移动应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"总结对比表"},"总结对比表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"维度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"PWA"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"快应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"RN APP"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"运行环境"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"浏览器/桌面/移动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"安卓快应用引擎"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"iOS/Android原生")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"技术栈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"HTML/CSS/JS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},".ux/.js/.css/.json"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React(JS/TS)+原生模块")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"原生能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"部分支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持大部分原生API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持全部原生API")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"跨平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"全平台（Web为主）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"安卓为主"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"iOS/Android")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"安装方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"浏览器/主屏/桌面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"无需安装，入口丰富"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"应用商店下载安装")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"更新方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"在线自动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"动态发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"热更新/商店更新")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"优于Web，略低原生"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"接近原生"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"接近原生")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"国际主流"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"国内安卓厂商"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"国际主流")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"典型场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"轻量级Web应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"O2O、工具、内容分发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"企业级/高性能App")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"结论：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA适合跨平台、轻量级、快速迭代的Web应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"快应用适合国内安卓生态、原生能力要求高、无需安装的场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN APP适合追求原生体验、复杂交互、跨平台的中大型移动应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"三者可根据业务需求、目标用户和技术团队能力灵活选型。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"workbox-详解"},"Workbox 详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"定义："),"\nWorkbox 是由 Google 推出的渐进式 Web 应用（PWA）开发工具库，专注于简化 Service Worker 的编写和管理，帮助开发者轻松实现离线缓存、资源预缓存、网络策略等核心 PWA 能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"核心功能：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Service Worker 注册与生命周期管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"静态资源预缓存与动态缓存"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多种缓存策略（如 Cache First、Network First、Stale While Revalidate 等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"后台同步、推送通知支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"离线回退页面、路由控制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动生成 Service Worker 脚本（CLI/webpack 插件）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"应用场景：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"PWA 应用离线体验优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"静态资源加速与缓存"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"网络不稳定场景下的内容可用性保障"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提升 Web 应用首屏加载速度")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生态与优势：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"官方文档完善，社区活跃"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与主流前端框架（React、Vue、Angular 等）和构建工具（Webpack、Vite 等）无缝集成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持自定义扩展，灵活配置"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"由 Google 官方维护，安全可靠")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"典型用法示例：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { precacheAndRoute } from 'workbox-precaching';\nprecacheAndRoute(self.__WB_MANIFEST);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结："),"\nWorkbox 是开发高质量 PWA 的首选工具，极大降低了 Service Worker 的开发门槛，让 Web 应用具备媲美原生 App 的离线与性能体验。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前端演进趋势/2025前端技术演进趋势",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/clientTrend/2026.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/前端演进趋势/2026前端技术演进趋势前瞻",mdxType:"Meta"}))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/前端演进趋势/2026前端技术演进趋势前瞻",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/desk/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/桌面端/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"桌面端开发详解与主流技术对比"},"桌面端开发详解与主流技术对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-什么是桌面端开发"},"1. 什么是桌面端开发？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"桌面端开发（Desktop Development）指为 Windows、macOS、Linux 等操作系统开发本地可执行应用程序。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型特征：本地安装、系统级权限、丰富 UI、可离线运行、与硬件/系统深度集成。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"应用场景：办公软件、设计工具、IDE、IM、运维工具、数据分析、音视频、游戏等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-主流桌面端开发技术"},"2. 主流桌面端开发技术"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"技术栈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"语言/框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"跨平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"生态/典型应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"优势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"劣势"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Electron"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JS/HTML/CSS/Node"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"VSCode、Slack、微信PC"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"前端技术栈、生态丰富、跨平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"体积大、内存占用高")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Tauri"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JS+Rust"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Tauri Studio"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"体积小、性能优、原生集成好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态新、部分API有限")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Qt"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C++/QML/PyQt"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信Mac、WPS、CAD"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能强、UI丰富、跨平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C++门槛高、商业授权")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},".NET/WPF"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C#/XAML"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Office、企业软件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Windows原生、开发效率高"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"仅限Windows")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JavaFX/Swing"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"IDEA、企业管理系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"跨平台、生态成熟"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"UI风格老旧、性能一般")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Flutter"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Dart"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"新兴桌面/移动App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"跨平台、UI一致、热重载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"桌面生态不如移动")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Swift/ObjC"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"macOS原生"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Xcode、Mac原生App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能极佳、系统集成好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"仅限macOS")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C++/MFC/Win32"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C++"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"❌"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"老牌Windows软件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能极高、底层控制力强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"开发复杂、UI现代化难")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"GTK"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C/多语言绑定"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"✅"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"GIMP、Linux工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Linux生态好、跨平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Windows/macOS体验一般")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-electron"},"2.1 Electron"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用 Web 技术开发桌面应用，内嵌 Chromium+Node.js。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：前端团队易上手，生态丰富，插件多。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：体积大、内存高、启动慢。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型应用：VSCode、Slack、微信PC、钉钉。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-tauri"},"2.2 Tauri"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Rust+Web 技术，极致轻量，原生窗口。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：体积小（几MB）、性能优、原生集成好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：生态新，部分高级API有限。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型应用：Tauri Studio、新一代轻量桌面工具。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-qt"},"2.3 Qt"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"C++/QML，跨平台UI框架，支持C++/Python等多语言。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：性能强、UI丰富、跨平台。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：C++门槛高、商业授权。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型应用：微信Mac、WPS、CAD、国产桌面软件。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"24-netwpf"},"2.4 .NET/WPF"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微软主推，C#/XAML，适合企业级Windows应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：开发效率高、UI现代、系统集成好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：仅限Windows。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型应用：Office、企业ERP、OA。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"25-javafxswing"},"2.5 JavaFX/Swing"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Java生态，跨平台，适合企业管理系统、工具类应用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：生态成熟、跨平台。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：UI风格老旧、性能一般。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型应用：IDEA、企业管理系统。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"26-flutter-桌面"},"2.6 Flutter 桌面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Google 推出，Dart 语言，移动/桌面/嵌入式一体化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：UI一致、热重载、跨平台。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：桌面生态不如移动。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型应用：新兴桌面/移动App。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"27-原生开发swiftobjccmfcgtk"},"2.7 原生开发（Swift/ObjC、C++/MFC、GTK）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能极致、系统集成度高，适合对性能/体验要求极高的场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"劣势：开发门槛高、跨平台难。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-趋势与选型建议"},"3. 趋势与选型建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"跨平台优先：Electron、Tauri、Flutter 适合互联网/工具类桌面App。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生优先：对性能/系统集成要求极高时选用 Qt、Swift、C++。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"企业/政务：.NET/WPF、JavaFX 生态成熟，适合大型管理系统。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"轻量/新项目：Tauri、Flutter 桌面值得关注。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需某一技术栈源码分析、跨平台实战、桌面端架构设计案例，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/桌面端/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/performence/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/性能优化/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"性能优化"},"性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"各端性能优化手段与业内方案"},"各端性能优化手段与业内方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-react-native-rn-app-性能优化"},"1. React Native (RN) APP 性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"减少重渲染"),"：使用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"PureComponent"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"React.memo"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"shouldComponentUpdate")," 避免不必要的渲染。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"列表优化"),"：大数据列表用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"FlatList"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"SectionList"),"，开启 windowing。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"图片优化"),"：图片懒加载、压缩、使用合适格式（如 WebP），本地缓存。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步加载"),"：资源、模块、数据异步加载，减少首屏压力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"JS与Native通信优化"),"：减少 bridge 频繁通信，合并批量操作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"动画优化"),"：使用 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Animated"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"reanimated")," 等原生驱动动画。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存管理"),"：及时释放不再使用的资源，避免内存泄漏。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码分包"),"：按需加载业务模块，减小包体积。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业内方案"),"：字节跳动、阿里、腾讯等均采用分包、图片CDN、骨架屏、预加载等手段。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-原生-app-性能优化"},"2. 原生 APP 性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"UI 渲染优化"),"：异步布局、合成层优化、减少主线程阻塞。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存优化"),"：对象池、图片缓存、及时回收无用对象。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"网络优化"),"：请求合并、断点续传、CDN加速、HTTP2。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"启动优化"),"：懒加载、延迟初始化、冷启动加速、Splash优化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"电量优化"),"：减少后台任务、优化定位与传感器使用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多线程"),"：合理使用线程池，避免主线程阻塞。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业内方案"),"：美团、微信、支付宝等采用冷启动优化、图片压缩、网络降级、A/B测试等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-h5-性能优化"},"3. H5 性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"资源压缩与合并"),"：JS/CSS/图片压缩，HTTP2多路复用，减少请求数。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"懒加载与预加载"),"：图片、路由、模块懒加载，首屏优先。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存优化"),"：Service Worker、localStorage、HTTP缓存、CDN。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渲染优化"),"：虚拟列表、骨架屏、减少重排重绘、合成层优化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"减少 JS 体积"),"：Tree Shaking、代码分割、动态 import。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步加载"),"：异步数据、异步组件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业内方案"),"：淘宝、京东、携程等采用骨架屏、PWA、SSR、CDN、图片懒加载等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-小程序性能优化"},"4. 小程序性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分包加载"),"：主包精简，业务分包，按需加载。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据绑定优化"),"：减少 setData 次数，避免大对象 diff。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"图片优化"),"：CDN、WebP、懒加载、压缩。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"组件复用"),"：自定义组件、虚拟列表。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"渲染层与逻辑层通信优化"),"：合并 setData，减少通信频率。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"启动优化"),"：首屏数据预加载、骨架屏、延迟加载非核心模块。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业内方案"),"：微信、支付宝、字节等小程序平台均采用分包、骨架屏、CDN、setData 优化等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"各端性能优化核心在于减少无效渲染、资源合理分配、异步与懒加载、缓存与分包、网络与图片优化。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业内主流方案多采用骨架屏、分包、CDN、图片压缩、首屏优化、异步加载等手段。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能优化需结合具体业务场景持续迭代。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/性能优化/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/program/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/编程范式/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"编程范式介绍"},"编程范式介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"编程范式是编程语言的基本风格和模式，它决定了我们如何组织和构建代码。以下是业界主流的编程范式："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-命令式编程-imperative-programming"},"1. 命令式编程 (Imperative Programming)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"命令式编程是最基础的编程范式，它通过一系列的命令来告诉计算机如何执行任务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 命令式编程示例\nlet sum = 0;\nfor (let i = 1; i <= 10; i++) {\n    sum += i;\n}\nconsole.log(sum);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'关注"如何做"（How）'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用变量存储状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过语句改变程序状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码执行顺序明确")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-声明式编程-declarative-programming"},"2. 声明式编程 (Declarative Programming)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,'声明式编程关注"做什么"（What），而不是"如何做"（How）。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 声明式编程示例\nconst sum = [1, 2, 3, 4, 5].reduce((acc, curr) => acc + curr, 0);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'关注"做什么"（What）'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码更简洁、可读性更强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"减少副作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"更容易进行代码优化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-面向对象编程-object-oriented-programming-oop"},"3. 面向对象编程 (Object-Oriented Programming, OOP)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"面向对象编程将数据和操作数据的方法组织在对象中。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 面向对象编程示例\nclass Animal {\n    constructor(name) {\n        this.name = name;\n    }\n    \n    speak() {\n        console.log(`${this.name} makes a sound.`);\n    }\n}\n\nclass Dog extends Animal {\n    speak() {\n        console.log(`${this.name} barks.`);\n    }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"封装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"继承"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"抽象")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-函数式编程-functional-programming-fp"},"4. 函数式编程 (Functional Programming, FP)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"函数式编程将计算视为数学函数的求值，避免改变状态和可变数据。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 函数式编程示例\nconst numbers = [1, 2, 3, 4, 5];\nconst doubled = numbers.map(n => n * 2);\nconst sum = doubled.reduce((acc, curr) => acc + curr, 0);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"纯函数"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"不可变性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"高阶函数"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"函数组合")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-响应式编程-reactive-programming"},"5. 响应式编程 (Reactive Programming)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"响应式编程关注数据流和变化的传播。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 响应式编程示例 (使用 RxJS)\nconst button = document.querySelector('button');\nconst clicks = fromEvent(button, 'click');\nconst result = clicks.pipe(\n    map(() => 1),\n    scan((acc, curr) => acc + curr, 0)\n);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据流"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"异步处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件驱动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动传播变化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-逻辑编程-logic-programming"},"6. 逻辑编程 (Logic Programming)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"逻辑编程基于形式逻辑，通过声明事实和规则来解决问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-prolog"},"% 逻辑编程示例 (Prolog)\nparent(john, mary).\nparent(mary, tom).\ngrandparent(X, Z) :- parent(X, Y), parent(Y, Z).\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"基于规则"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"声明式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动推理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"模式匹配")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-并发编程-concurrent-programming"},"7. 并发编程 (Concurrent Programming)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"并发编程处理多个任务的同时执行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 并发编程示例\nasync function fetchData() {\n    const [users, posts] = await Promise.all([\n        fetch('/api/users'),\n        fetch('/api/posts')\n    ]);\n    return { users, posts };\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"并行执行"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"任务调度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"同步机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源竞争处理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-元编程-metaprogramming"},"8. 元编程 (Metaprogramming)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"元编程是编写能够操作其他程序的程序。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 元编程示例\nclass User {\n    @log\n    getName() {\n        return this.name;\n    }\n}\n\nfunction log(target, key, descriptor) {\n    const original = descriptor.value;\n    descriptor.value = function(...args) {\n        console.log(`Calling ${key} with`, args);\n        return original.apply(this, args);\n    };\n    return descriptor;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码生成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"反射"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"注解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"宏")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-面向切面编程-aspect-oriented-programming-aop"},"9. 面向切面编程 (Aspect-Oriented Programming, AOP)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"面向切面编程将横切关注点与业务逻辑分离。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// AOP示例\nfunction log(target, key, descriptor) {\n    const original = descriptor.value;\n    descriptor.value = function(...args) {\n        console.log(`Before ${key}`);\n        const result = original.apply(this, args);\n        console.log(`After ${key}`);\n        return result;\n    };\n    return descriptor;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注点分离"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"横切关注点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码复用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"模块化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-领域驱动设计-domain-driven-design-ddd"},"10. 领域驱动设计 (Domain-Driven Design, DDD)"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"领域驱动设计是一种软件开发方法，强调领域模型和业务逻辑。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// DDD示例\nclass Order {\n    constructor(id, items) {\n        this.id = id;\n        this.items = items;\n        this.status = 'PENDING';\n    }\n    \n    place() {\n        if (this.items.length === 0) {\n            throw new Error('Order must have items');\n        }\n        this.status = 'PLACED';\n    }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"特点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"领域模型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一语言"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"限界上下文"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"领域事件")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"最佳实践建议"},"最佳实践建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"选择合适的范式："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"根据项目需求选择"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"考虑团队熟悉度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"评估维护成本"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"范式组合："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"不同范式可以组合使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"取长补短"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"保持代码一致性"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"代码质量："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"保持代码可读性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"遵循设计原则"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适当使用设计模式"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},"性能考虑："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"评估性能影响"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"进行性能优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控性能指标")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"编程范式是软件开发中的重要概念，不同的范式适用于不同的场景。在实际开发中，我们应该："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"理解各种范式的特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"根据需求选择合适的范式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"灵活组合不同范式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"保持代码质量和可维护性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"持续学习和实践")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"通过合理使用编程范式，我们可以："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提高代码质量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提升开发效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"降低维护成本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"增强代码可读性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"促进团队协作")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/编程范式/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/quickApp/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/快应用/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"什么是快应用"},"什么是快应用？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"快应用（Quick App）是一种基于 Web 技术（JavaScript、CSS、XML/JSON）开发的轻量级应用形态，由华为等主流手机厂商联合推出。快应用无需安装，扫码或点击即可使用，具备接近原生 App 的体验和系统能力，体积小、启动快、分发便捷，适合轻量、低频、活动类等场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"快应用的主要特点"},"快应用的主要特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"免安装即用"),"：用户无需下载安装，扫码/点击即可运行。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"体积小巧"),"：一般几十 KB 到几百 KB，启动极快。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"系统能力强"),"：可调用部分原生 API（如定位、相机、支付等），体验接近原生。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"统一标准"),"：由快应用联盟（华为、小米、OPPO、vivo 等）共同推动，生态开放。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开发高效"),"：采用 Web 技术栈，开发门槛低，支持主流前端框架（如 Taro、uni-app）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"快应用-vs-react-native-原生-app"},"快应用 vs React Native 原生 App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"对比项"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"快应用（Quick App）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"RN 原生 App（React Native）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"开发语言")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JS/CSS/XML（Web 技术）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JS + RN 组件 + 原生桥接")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"运行方式")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"容器/引擎中运行（非独立进程）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"独立进程，JS 代码通过 Bridge 调用原生")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"系统能力")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"部分原生能力，有限制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"可桥接全部原生能力")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"安装方式")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"免安装，扫码/点击即用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"需下载安装")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"体积/启动")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"极小/极快"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"较大/较快")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"UI体验")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"接近原生，部分组件有限"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"真正原生组件，体验最佳")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"分发渠道")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"快应用中心、扫码、分享"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"应用市场、企业分发")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"适用场景")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"轻量、低频、活动页、工具类"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂、重度、深度集成场景")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"简要总结"),"：  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"快应用适合轻量、低频、拉新、活动等场景，开发快、分发便捷，但能力有限。  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN 原生 App 适合复杂、重度、深度集成场景，体验和能力最强，但需安装和维护。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"业界主流快应用方案"},"业界主流快应用方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"快应用联盟标准（Quick App Alliance）"),"  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"由华为、小米、OPPO、vivo 等联合推出，统一标准，生态开放。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持主流安卓手机，开发一次多端运行。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"鸿蒙快应用（HarmonyOS Quick App）"),"  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"华为鸿蒙系统专属快应用，兼容联盟标准，支持更多鸿蒙原生能力。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Taro/uni-app 等多端框架"),"  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持快应用平台编译，开发者可用一套代码适配快应用、微信小程序、H5、App 等多端。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"小程序（如微信/支付宝/百度/抖音小程序）"),"  "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'虽与快应用不同，但同属"轻应用"范畴，理念类似，生态各自独立。')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"参考链接"},"参考链接"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://www.quickapp.cn/",target:"_blank",rel:"nofollow noopener noreferrer"},"快应用官网")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://taro-docs.jd.com/taro/docs/quickapp",target:"_blank",rel:"nofollow noopener noreferrer"},"Taro 快应用文档")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://uniapp.dcloud.net.cn/tutorial/quickapp.html",target:"_blank",rel:"nofollow noopener noreferrer"},"uni-app 快应用文档")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://developer.harmonyos.com/cn/docs/documentation/doc-guides/quick-app-overview-0000001050042013",target:"_blank",rel:"nofollow noopener noreferrer"},"鸿蒙快应用文档"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/快应用/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/rust/intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Meta=function makeShortcode(name){return function MDXDefaultShortcode(props){return console.warn("Component "+name+" was not imported, exported, or provided by MDXProvider as global scope"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",props)}}("Meta"),layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("em",{parentName:"p"}," @source cursor @line_count 100  @branch feat/xxx"),'/\nimport { Meta } from "@storybook/addon-docs";'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(Meta,{title:"Hundun/rust/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"rust-语言详解与生态工具"},"Rust 语言详解与生态工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-什么是-rust"},"1. 什么是 Rust？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'Rust 是由 Mozilla 主导开发的系统级编程语言，主打"安全、并发、性能"。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"最大特点：内存安全（无 GC）、零成本抽象、强类型、现代语法、极致性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合高性能服务端、嵌入式、区块链、WebAssembly、桌面端等场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"口号：Fearless Concurrency（无畏并发）、Memory Safety（内存安全）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"11-rust-语言特性"},"1.1 Rust 语言特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"所有权/借用/生命周期，彻底杜绝野指针、内存泄漏。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"零成本抽象，泛型/trait/模式匹配，表达力强。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"并发安全，线程/异步无数据竞争。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"丰富的包管理（Cargo）、文档、测试、构建工具链。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"跨平台，支持 Linux/macOS/Windows/嵌入式。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-rust-生态主流工具与框架"},"2. Rust 生态主流工具与框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"工具/框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"领域"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"说明/典型应用"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Cargo"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包管理/构建"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rust 官方包管理/构建/依赖工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Tokio"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"异步/网络"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高性能异步运行时，服务端/微服务")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Actix"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web 框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高性能 Web 框架，Actor 模型")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Serde"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"序列化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高性能序列化/反序列化库")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Tauri"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"桌面端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rust+Web 技术桌面应用，极致轻量")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Wasm/Wasm-bindgen"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"WebAssembly"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rust 编译 WebAssembly，前端/后端")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"SWC"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"构建工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高性能 JS/TS 编译器，Next.js/Parcel")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Deno"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"运行时"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"新一代 JS/TS 运行时，底层用 Rust")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Turbopack"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"构建工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Next.js 新一代打包器，基于 Rust")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"esbuild"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"构建工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"超快 JS/TS 打包器，部分用 Rust")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"ripgrep"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"超快文本搜索，VSCode 内置")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Clippy"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"静态分析"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rust 代码 Lint 工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rustfmt"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"格式化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"官方代码格式化工具")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Hyper"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"HTTP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高性能 HTTP 库")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rocket"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web 框架"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"现代 Web 框架")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-rust-对前端的影响"},"3. Rust 对前端的影响"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高性能构建工具"),"：SWC、Turbopack、esbuild、Parcel 等主流前端构建工具大量用 Rust 重写，极大提升打包/编译速度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"WebAssembly（Wasm）"),"：Rust 可直接编译为 Wasm，前端可用 Rust 写高性能模块（如图像处理、音视频、加密等），与 JS 无缝协作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"桌面端开发"),"：Tauri 用 Rust+Web 技术打造极致轻量桌面应用，成为 Electron 替代方案。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node.js 替代/补充"),"：Deno、Bun 等新一代 JS 运行时底层用 Rust，安全性/性能更优。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"工具链现代化"),"：ripgrep、Clippy、Rustfmt 等工具被 VSCode、前端工程广泛集成。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"31-典型前端场景"},"3.1 典型前端场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Next.js 13+ 默认用 SWC/Turbopack（Rust）做编译/打包。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Vite/Parcel/esbuild 等均有 Rust 相关实现或插件。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Tauri 桌面端、Wasm 前端模块、Deno/Bun 运行时。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"如需 Rust 生态源码分析、Wasm 实战、前端与 Rust 融合案例，欢迎继续提问！"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/rust/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/MQ.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/mq",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.rabbitmq.com/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://www.rabbitmq.com/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"mq消息队列详解"},"MQ（消息队列）详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-mq是什么"},"1. MQ是什么？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"MQ（Message Queue，消息队列）是一种异步通信中间件，常用于服务解耦、流量削峰、异步处理、消息广播等场景。常见实现有RabbitMQ、Kafka、RocketMQ、ActiveMQ等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-mq的作用"},"2. MQ的作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务解耦"),"：生产者和消费者通过消息队列通信，无需直接依赖。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"异步处理"),"：耗时操作异步化，提高系统响应速度。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"削峰填谷"),"：应对高并发流量，缓冲突发请求。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息广播"),"：一条消息可被多个消费者消费。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"可靠传递"),"：支持消息持久化、重试、确认机制，保障消息不丢失。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-mq的典型应用场景"},"3. MQ的典型应用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"订单异步处理、支付通知、注册邮件/短信推送、日志收集、数据同步、事件驱动架构等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs中使用rabbitmq示例"},"Node.js中使用RabbitMQ示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"依赖：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"amqplib")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 生产者 producer.js\nconst amqp = require('amqplib');\n(async () => {\n  const conn = await amqp.connect('amqp://localhost');\n  const ch = await conn.createChannel();\n  const queue = 'test-queue';\n  await ch.assertQueue(queue);\n  ch.sendToQueue(queue, Buffer.from('Hello MQ!'));\n  console.log('消息已发送');\n  await ch.close();\n  await conn.close();\n})();\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 消费者 consumer.js\nconst amqp = require('amqplib');\n(async () => {\n  const conn = await amqp.connect('amqp://localhost');\n  const ch = await conn.createChannel();\n  const queue = 'test-queue';\n  await ch.assertQueue(queue);\n  ch.consume(queue, msg => {\n    if (msg) {\n      console.log('收到消息:', msg.content.toString());\n      ch.ack(msg);\n    }\n  });\n})();\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"java中使用rabbitmq示例spring-boot"},"Java中使用RabbitMQ示例（Spring Boot）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"依赖：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"spring-boot-starter-amqp")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"application.yml")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  rabbitmq:\n    host: localhost\n    port: 5672\n    username: guest\n    password: guest\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"生产者 Producer")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'import org.springframework.amqp.rabbit.core.RabbitTemplate;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class Producer {\n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n\n    public void send() {\n        rabbitTemplate.convertAndSend("test-queue", "Hello MQ!");\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"消费者 Consumer")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'import org.springframework.amqp.rabbit.annotation.RabbitListener;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Consumer {\n    @RabbitListener(queues = "test-queue")\n    public void receive(String message) {\n        System.out.println("收到消息: " + message);\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"更多参考：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://www.rabbitmq.com/",target:"_blank",rel:"nofollow noopener noreferrer"},"RabbitMQ官网")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"mq常见问题与解决方案"},"MQ常见问题与解决方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-mq常见问题"},"1. MQ常见问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息丢失"),"：消息未被正确持久化或消费，导致数据丢失。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息重复"),"：网络抖动、消费端重试等导致同一消息被多次消费。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息积压"),"：消费端处理能力不足，消息堆积在队列中。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"顺序性问题"),"：分区、并发消费导致消息顺序错乱。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息延迟"),"：网络、磁盘IO、消费端阻塞等导致消息处理延迟。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-丢消息的原因与解决办法"},"2. 丢消息的原因与解决办法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"生产者未持久化消息"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：发送消息时设置持久化（如RabbitMQ的",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"deliveryMode=2"),"）。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Broker未持久化消息"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：开启队列和消息的持久化配置。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消费者未确认消息"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：使用手动ack，消费成功后再确认。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"网络异常/宕机"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：开启高可用集群、主从备份、消息重试机制。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息超时丢弃"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：合理设置消息过期时间，监控消费进度。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"代码示例rabbitmq消息持久化"},"代码示例：RabbitMQ消息持久化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// Node.js生产者\nch.assertQueue(queue, { durable: true });\nch.sendToQueue(queue, Buffer.from('msg'), { persistent: true });\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// Java生产者\nrabbitTemplate.convertAndSend("queue", (MessagePostProcessor) message -> {\n    message.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT);\n    return message;\n});\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-如何保障消息可靠性详细方案"},"3. 如何保障消息可靠性？（详细方案）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-消息持久化"},"1. 消息持久化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"生产者端"),"：发送消息时设置持久化参数（如RabbitMQ的persistent、Kafka的acks=all、RocketMQ的SYNC_FLUSH）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Broker端"),"：队列/主题开启持久化，消息写入磁盘，防止Broker宕机丢失。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RabbitMQ（Node.js）：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"ch.assertQueue(queue, { durable: true });\nch.sendToQueue(queue, Buffer.from('msg'), { persistent: true });\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Kafka（Node.js）：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"producer.send({ topic, messages, acks: -1 }); // acks=-1/all\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RocketMQ（Java）：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"Message msg = new Message(...);\nSendResult result = producer.send(msg, 3000); // 默认同步持久化\n")))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-消费端ack与重试"},"2. 消费端ack与重试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"手动ack"),"：消费端处理成功后手动ack，失败不ack，消息会重投。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动重试"),"：消费失败时，MQ自动/手动重试，避免消息丢失。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"死信队列（DLQ）"),"：多次重试仍失败的消息进入死信队列，便于后续人工/自动补偿。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RabbitMQ（Node.js）：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"ch.consume(queue, msg => {\n  try {\n    // 业务处理\n    ch.ack(msg);\n  } catch (e) {\n    ch.nack(msg, false, true); // 失败重投\n  }\n});\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Kafka：消费端自动commit或手动commit offset，失败可seek回重试。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RocketMQ：消费端返回ConsumeConcurrentlyStatus.RECONSUME_LATER实现重试。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-幂等消费"},"3. 幂等消费"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"消费端需保证幂等性（如唯一ID去重、状态校验），避免消息重复消费导致数据异常。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"方案：业务表加唯一索引、Redis去重、分布式锁等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-自动检测与监控"},"4. 自动检测与监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息堆积监控"),"：监控队列/主题的消息堆积量，及时发现消费异常。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消费延迟监控"),"：监控消息从生产到消费的延迟，发现处理瓶颈。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"告警系统"),"：如Prometheus+Alertmanager、RabbitMQ/Kafka自带管理界面、RocketMQ Console。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动补偿"),"：定时扫描死信队列/异常消息，自动重试或人工介入。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码/工具示例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RabbitMQ管理API、Prometheus exporter、Kafka JMX exporter、RocketMQ Console等。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-事务消息与最终一致性"},"5. 事务消息与最终一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RocketMQ/Kafka等支持事务消息，确保消息与业务操作一致。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键场景可用本地消息表、事务消息、补偿机制等保障最终一致性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"可靠性保障需生产端、Broker、消费端、监控告警多层协同，自动检测与补偿机制是高可用消息系统的关键。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-mq与postmessage的区别"},"4. MQ与postMessage的区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"postMessage"),"：浏览器端用于iframe、window间通信，属于前端进程内/跨窗口消息机制。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"MQ"),"：服务端分布式消息中间件，支持跨服务、跨进程、异步、持久化、可靠传递。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"应用场景不同"),"：postMessage适合前端页面通信，MQ适合后端服务解耦、异步、削峰等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"主流mq对比应用场景与区别"},"主流MQ对比：应用场景与区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"MQ类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"典型应用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"优势特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"不足/限制"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"RabbitMQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"业务解耦、异步处理、订单、通知"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持多协议、易用、社区活跃、可靠"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"吞吐量一般，适合中小型场景")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"Kafka")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"日志收集、流式计算、数据管道"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高吞吐、分区、可扩展、持久化强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"实时性一般，消息顺序弱")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"RocketMQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"金融、电商、事务消息、延迟队列"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高吞吐、事务消息、延迟消息强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"社区生态不如Kafka/RabbitMQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"td"},"ActiveMQ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"传统企业集成、老系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持JMS、协议多、易集成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能一般，社区活跃度下降")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-rabbitmq"},"1. RabbitMQ"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合：订单、注册、通知、异步任务等业务解耦、可靠性要求高但吞吐量中等的场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"特点：协议丰富（AMQP、MQTT等）、易用、管理界面友好、消息可靠性高。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-kafka"},"2. Kafka"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合：大数据、日志收集、流式处理、数据总线、监控等高吞吐、可扩展场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"特点：分区、顺序性、持久化、横向扩展能力强，适合大规模数据流。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-rocketmq"},"3. RocketMQ"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合：金融、电商、事务消息、延迟消息、海量消息处理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"特点：事务消息、延迟队列、顺序消息、吞吐高，阿里开源，云原生支持好。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-activemq"},"4. ActiveMQ"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合：传统企业应用、JMS集成、遗留系统对接。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"特点：JMS支持好、协议多、易集成，适合老系统。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"选择MQ时需结合业务场景、性能需求、生态兼容性、团队技术栈等综合考量。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/mq",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/RDS&Redis.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"rds-与-redis-详解"},"RDS 与 Redis 详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"一rds关系型数据库服务"},"一、RDS（关系型数据库服务）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-定义与用法"},"1. 定义与用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RDS（Relational Database Service）是云厂商提供的托管型关系型数据库服务，如阿里云RDS、腾讯云CDB、AWS RDS等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持MySQL、PostgreSQL、SQL Server、MariaDB、Oracle等主流数据库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供自动备份、主从高可用、弹性扩容、监控告警、自动运维等能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用法与自建数据库一致，支持标准SQL协议，连接方式与本地数据库类似。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-企业生产用途场景"},"2. 企业生产用途场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务数据存储（订单、用户、交易等核心表）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"金融、电商、SaaS、ERP等对数据一致性、事务性要求高的场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要高可用、自动备份、弹性扩容的中大型系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多地域容灾、读写分离、分库分表等复杂部署需求")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-常见问题与解决方案"},"3. 常见问题与解决方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"连接数瓶颈"),"：高并发下连接数耗尽",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：合理配置连接池、使用ProxySQL等中间件、升级实例规格"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"慢SQL/性能瓶颈"),"：大表、复杂查询导致慢SQL",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：加索引、SQL优化、分库分表、冷热数据分离"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主从延迟/切换"),"：高并发写入或网络抖动导致主从延迟",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：监控延迟、读写分离降级、自动主从切换"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"备份恢复慢"),"：大数据量恢复耗时长",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：分库分表、分区表、定期冷热归档"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全合规"),"：数据泄露、误删",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：开启SSL、权限最小化、定期备份、审计日志")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"二redis"},"二、Redis"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-定义与用法-1"},"1. 定义与用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Redis 是开源高性能的内存键值数据库，支持丰富数据结构（String、Hash、List、Set、ZSet等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型用法：缓存、分布式锁、排行榜、消息队列、会话存储、热点数据存储等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云Redis（如阿里云Redis、腾讯云Redis、AWS Elasticache）提供高可用、持久化、自动运维等能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用法：通过客户端库（如ioredis、redis-py、Jedis等）连接，支持多语言。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-企业生产用途场景-1"},"2. 企业生产用途场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存加速"),"：热点数据、接口结果、页面片段缓存，提升系统响应速度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式锁"),"：控制分布式环境下的并发访问"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"限流与计数"),"：API限流、秒杀、抢购等高并发场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息队列"),"：简单队列、发布订阅、延迟队列"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"会话存储"),"：用户Session、Token等临时数据"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"排行榜/计分板"),"：游戏、电商等实时排名")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-常见问题与解决方案-1"},"3. 常见问题与解决方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存穿透"),"：请求大量不存在的数据，导致DB压力大",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：缓存空值、布隆过滤器"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存雪崩"),"：大量缓存同一时间失效，DB被打爆",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：设置过期时间随机化、热点数据预热、分批失效"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存击穿"),"：热点key失效瞬间大量请求打到DB",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：互斥锁/单飞、预加载、永不过期+异步刷新"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主从延迟/数据丢失"),"：高并发写入或网络异常导致主从不一致",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：开启AOF持久化、主从高可用、哨兵/集群自动切换"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存溢出"),"：数据量超内存，Redis被杀死",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：合理设置maxmemory、淘汰策略、冷热分层"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式锁失效"),"：锁未正确释放或被误删",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"解决：RedLock算法、唯一标识+过期时间")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"RDS 适合核心业务数据存储，Redis 适合高性能缓存与高并发场景。两者常结合使用，需关注高可用、数据一致性与运维监控。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-与-java-如何使用-rds-与-redis"},"Node.js 与 Java 如何使用 RDS 与 Redis"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"一nodejs-使用示例"},"一、Node.js 使用示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-连接-rds以mysql为例使用mysql2"},"1. 连接 RDS（以MySQL为例，使用mysql2）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 安装依赖：npm install mysql2\nconst mysql = require('mysql2/promise');\nconst pool = mysql.createPool({\n  host: 'rds-host',\n  user: 'user',\n  password: 'pwd',\n  database: 'testdb',\n  waitForConnections: true,\n  connectionLimit: 10\n});\n// 查询\nconst [rows] = await pool.query('SELECT * FROM users WHERE id = ?', [1]);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-连接-redis使用ioredis"},"2. 连接 Redis（使用ioredis）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 安装依赖：npm install ioredis\nconst Redis = require('ioredis');\nconst redis = new Redis({ host: 'redis-host', port: 6379, password: 'pwd' });\n// 设置与获取\nawait redis.set('key', 'value', 'EX', 60);\nconst value = await redis.get('key');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"二java-使用示例"},"二、Java 使用示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-连接-rds以mysql为例spring-boot--jpa"},"1. 连接 RDS（以MySQL为例，Spring Boot + JPA）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"application.yml")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  datasource:\n    url: jdbc:mysql://rds-host:3306/testdb\n    username: user\n    password: pwd\n  jpa:\n    show-sql: true\n    hibernate:\n      ddl-auto: update\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"Repository 示例")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"@Entity\npublic class User {\n    @Id @GeneratedValue\n    private Long id;\n    private String username;\n}\n\npublic interface UserRepository extends JpaRepository<User, Long> {}\n\n// 查询\n@Autowired\nprivate UserRepository userRepository;\nList<User> users = userRepository.findAll();\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-连接-redisspring-boot--lettuce"},"2. 连接 Redis（Spring Boot + Lettuce）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"application.yml")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  redis:\n    host: redis-host\n    port: 6379\n    password: pwd\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"使用示例")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'@Autowired\nprivate StringRedisTemplate redisTemplate;\n// 设置\nredisTemplate.opsForValue().set("key", "value", Duration.ofSeconds(60));\n// 获取\nString value = redisTemplate.opsForValue().get("key");\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"Node.js 和 Java 都有丰富的数据库/缓存客户端库，连接云RDS与Redis与本地用法基本一致，建议结合连接池、超时、重试等配置提升健壮性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"rds与redis高级用法"},"RDS与Redis高级用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"一连接池优化"},"一、连接池优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-原理与作用"},"1. 原理与作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"连接池用于复用数据库/缓存连接，减少频繁建立/销毁连接的开销，提升并发和性能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"合理配置最大连接数、超时、空闲回收等参数，防止连接泄漏和资源耗尽。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-nodejs-示例"},"2. Node.js 示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const pool = mysql.createPool({\n  host: 'rds-host',\n  user: 'user',\n  password: 'pwd',\n  database: 'testdb',\n  waitForConnections: true,\n  connectionLimit: 20, // 最大连接数\n  queueLimit: 0,\n  connectTimeout: 10000\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-java-示例spring-boot--hikaricp"},"3. Java 示例（Spring Boot + HikariCP）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  datasource:\n    hikari:\n      maximum-pool-size: 30\n      minimum-idle: 5\n      idle-timeout: 30000\n      connection-timeout: 10000\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"二分布式锁"},"二、分布式锁"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-原理与作用-1"},"1. 原理与作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"分布式锁用于多节点/多进程间互斥访问共享资源，防止并发冲突。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Redis常用setnx+expire实现，推荐RedLock算法提升可靠性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-nodejs-实现ioredis"},"2. Node.js 实现（ioredis）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const Redis = require('ioredis');\nconst redis = new Redis();\nasync function acquireLock(key, value, ttl) {\n  return await redis.set(key, value, 'NX', 'PX', ttl); // 成功返回'OK'\n}\nasync function releaseLock(key, value) {\n  const script = `if redis.call('get', KEYS[1]) == ARGV[1] then return redis.call('del', KEYS[1]) else return 0 end`;\n  return await redis.eval(script, 1, key, value);\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-java-实现redisson"},"3. Java 实现（Redisson）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'RLock lock = redissonClient.getLock("myLock");\nlock.lock(10, TimeUnit.SECONDS); // 加锁10秒\ntry {\n    // 业务逻辑\n} finally {\n    lock.unlock();\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"三事务"},"三、事务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-rds事务"},"1. RDS事务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关系型数据库支持ACID事务，保障多条SQL原子性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"nodejs-示例mysql2"},"Node.js 示例（mysql2）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const conn = await pool.getConnection();\ntry {\n  await conn.beginTransaction();\n  await conn.query('UPDATE users SET ...');\n  await conn.query('INSERT INTO logs ...');\n  await conn.commit();\n} catch (e) {\n  await conn.rollback();\n  throw e;\n} finally {\n  conn.release();\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"java-示例spring事务"},"Java 示例（Spring事务）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"@Transactional\npublic void updateUserAndLog() {\n    userRepository.save(...);\n    logRepository.save(...);\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-redis事务"},"2. Redis事务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Redis支持MULTI/EXEC事务，适合简单原子操作，但不支持回滚。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"nodejs-示例"},"Node.js 示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const tx = redis.multi();\ntx.set('a', 1);\ntx.incr('a');\nconst results = await tx.exec();\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"java-示例spring-data-redis"},"Java 示例（Spring Data Redis）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'List<Object> txResults = redisTemplate.execute(new SessionCallback<Object>() {\n    public Object execute(RedisOperations ops) {\n        ops.multi();\n        ops.opsForValue().set("a", "1");\n        ops.opsForValue().increment("a");\n        return ops.exec();\n    }\n});\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"连接池优化提升并发与稳定性，分布式锁保障多节点互斥，事务机制保障数据一致性，是企业级系统不可或缺的高级能力。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"为什么有了mysql还要用rds"},"为什么有了MySQL还要用RDS？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-运维自动化"},"1. 运维自动化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：云厂商负责数据库的安装、升级、备份、恢复、主从切换、监控、补丁、扩容等运维工作，用户只需关注业务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：你需要自己搭建、维护、监控、备份、扩容、容灾等，运维成本高，易出错。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-高可用与容灾"},"2. 高可用与容灾"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：一键主从、自动故障切换、跨可用区容灾，极大提升可用性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：主从、切换、容灾都需自己实现，且切换慢、易出错。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-弹性扩容"},"3. 弹性扩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：支持在线升级实例规格、存储空间，按需付费，弹性伸缩。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：扩容需人工操作，甚至迁移数据，风险大、耗时长。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-安全与合规"},"4. 安全与合规"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：内置SSL加密、白名单、审计、自动备份、权限管理等安全能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：需自行配置安全策略，容易遗漏，合规难度大。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-性能监控与优化"},"5. 性能监控与优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：自带性能监控、慢SQL分析、告警、自动调优等工具。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：需自己搭建监控系统，分析和调优全靠人工。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-备份与恢复"},"6. 备份与恢复"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：自动定期备份，支持一键恢复到任意时间点。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：备份、恢复需人工脚本，容易出错且耗时。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"7-适合云原生微服务架构"},"7. 适合云原生/微服务架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：与云上其他服务（如ECS、Serverless、K8s等）无缝集成，支持API自动化管理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：集成和自动化能力弱。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"典型场景"},"典型场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"初创/中小团队"),"：无专职DBA，优先用RDS，省心省力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"大规模/高可用/多地域"),"：RDS可轻松实现高可用、容灾、弹性扩展。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"合规要求高"),"：RDS自带安全、审计、备份等能力，满足合规需求。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS = 云厂商帮你运维的MySQL/PG/SQLServer/Oracle"),"，让你专注业务开发，极大降低运维和出错风险。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL适合有强DBA团队、特殊定制需求的场景"),"，但大多数企业推荐优先用RDS。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"rds与云主机自建mysql在迁移成本性能等方面的实际案例与对比"},"RDS与云主机自建MySQL在迁移、成本、性能等方面的实际案例与对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-迁移对比与案例"},"1. 迁移对比与案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL迁移到RDS"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常用工具：mysqldump、阿里云DTS、AWS DMS、Percona XtraBackup等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"迁移流程：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"业务低峰期全量导出数据（mysqldump/XtraBackup）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"导入RDS实例，开启binlog增量同步。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"切换业务流量到RDS，确认无误后下线自建库。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"案例：某互联网公司自建MySQL迁移到RDS，利用DTS实现不停服迁移，业务无感知，迁移后运维压力大幅降低。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS迁移到自建MySQL"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适用于特殊插件、极致定制需求。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需全量导出+增量同步，切换窗口需严格控制。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-成本对比"},"2. 成本对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需购买云主机、存储、带宽，自己搭建高可用、备份、监控等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需专职DBA/运维，人工成本高。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"隐性成本：故障、数据丢失、运维失误带来的损失。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"按需付费，实例规格、存储、流量等可弹性调整。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"免去大量人力和风险成本。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"价格略高于单台自建，但综合TCO（总拥有成本）更低。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实际案例"),"：某SaaS公司迁移RDS后，DBA人力减少50%，故障率下降90%，综合成本下降30%。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-性能对比"},"3. 性能对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能取决于云主机配置、存储IO、网络等，需手动调优。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"高并发下易受限于单机资源，扩展性有限。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云厂商提供高性能存储、网络优化、专用硬件，性能更稳定。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持只读实例、分片、弹性扩容，适合高并发大数据量场景。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实际案例"),"：某电商平台自建MySQL高峰期QPS 2万，迁移RDS后通过只读实例扩展到QPS 10万，性能瓶颈大幅缓解。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-适用建议"},"4. 适用建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优先用RDS"),"：绝大多数企业、生产环境、对高可用/弹性/安全有要求的场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自建MySQL"),"：仅适合极致定制、特殊插件、强DBA团队、成本极致敏感的场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"迁移到RDS可大幅降低运维和风险，提升性能和可用性，是现代云原生架构的主流选择。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/RDS与Redis",mdxType:"Meta"}))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/RDS与Redis",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/RPC&HTTP.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/RPC与HTTP",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"rpc与http通信详解"},"RPC与HTTP通信详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-基本概念"},"1. 基本概念"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"HTTP通信"),"：基于HTTP协议的远程调用，常见于RESTful API、GraphQL等，数据格式多为JSON、XML。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RPC（Remote Procedure Call）"),"：远程过程调用，像调用本地方法一样调用远程服务，常见协议有gRPC、Dubbo、Thrift等，数据格式多为二进制（如Protobuf）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-优缺点对比"},"2. 优缺点对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"HTTP通信（RESTful等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"RPC通信（gRPC/Dubbo等）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"协议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"HTTP/1.1/2，开放标准"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"多为自定义协议/HTTP2")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"数据格式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JSON/XML"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"二进制（Protobuf/Thrift等）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"一般，文本传输"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高，二进制高效")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"易用性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单直观，易调试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"需IDL，学习曲线高")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"兼容性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"跨语言、跨平台好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"多语言支持但需生成代码")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"文档/生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"丰富，工具多"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"依赖特定生态")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"流式/推送"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持有限"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"支持双向流、推送")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"网关/安全"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态成熟，易集成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"需配合特定网关/安全组件")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-典型使用场景"},"3. 典型使用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"HTTP通信"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"对外开放API、Web前后端分离、移动端接口、第三方集成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要兼容性、易用性、调试友好"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RPC通信"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微服务内部高性能通信、服务间调用、数据量大、低延迟场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"需要强类型、接口自动生成、双向流、批量处理")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-现代微服务架构的通信方式"},"4. 现代微服务架构的通信方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"微服务架构既可用HTTP（RESTful）也可用RPC（gRPC、Dubbo等），选择取决于业务需求：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"对外接口"),"：多用HTTP/RESTful，兼容性好，易于开放"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务内部"),"：多用RPC，性能高、强类型、支持流式"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"现代主流：Spring Cloud（HTTP+Feign）、gRPC、Dubbo等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-示例对比"},"5. 示例对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"HTTP调用示例（RESTful）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-http"},'POST /api/order\nContent-Type: application/json\n{\n  "userId": 1,\n  "amount": 100\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"gRPC调用示例")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-proto"},"service OrderService {\n  rpc CreateOrder (OrderRequest) returns (OrderReply);\n}\nmessage OrderRequest { int32 userId = 1; int32 amount = 2; }\nmessage OrderReply { string status = 1; }\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"现代微服务架构通常对外HTTP、内部RPC，需结合团队技术栈、性能、安全、运维等多方面综合考量。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"rpc为什么快"},"RPC为什么快？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"二进制序列化高效")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RPC常用Protobuf、Thrift等二进制协议，编码/解码速度快，数据体积小，网络传输效率高。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"对比HTTP+JSON，二进制格式更紧凑，解析速度远高于文本格式。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"基于HTTP/2或自定义协议")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"gRPC等基于HTTP/2，支持多路复用、头部压缩、长连接，减少握手和延迟。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"传统RESTful基于HTTP/1.1，连接复用和并发能力有限。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"连接复用与长连接")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RPC框架通常采用长连接，避免频繁建立/关闭连接，降低延迟。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多路复用，多个请求可共用一条连接，提升吞吐量。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"强类型与自动代码生成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"接口强类型，序列化/反序列化自动化，减少数据转换和校验开销。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"批量与流式处理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持批量请求、流式数据传输，减少多次网络往返。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"总结：RPC快的核心在于二进制高效序列化、协议优化（HTTP/2）、连接复用和流式能力，适合高性能微服务内部通信。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/RPC与HTTP",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/api-style.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/接口风格",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"常见接口风格及特点"},"常见接口风格及特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"接口风格"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"主要特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"适用场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"RESTful"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基于HTTP，资源导向，URL语义清晰，方法规范（GET/POST/PUT/DELETE）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web服务、微服务、前后端分离")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"GraphQL"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"单一端点，前端可定制数据结构，减少多余数据，强类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"前端灵活、移动端、复杂数据聚合")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"gRPC"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基于HTTP/2和Protobuf，强类型，支持多语言，高性能，双向流"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微服务内部通信、高性能场景")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"WebSocket"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"全双工、长连接、实时推送"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"实时通信、IM、游戏、推送")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"SOAP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"基于XML，协议严格，支持事务、安全、标准化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"金融、电信、企业级集成")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"详细解读常见接口风格"},"详细解读常见接口风格"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-restful-api"},"1. RESTful API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：基于HTTP协议，使用URL定位资源，使用HTTP方法（GET/POST/PUT/DELETE）描述操作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"简单直观，易于理解和实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与HTTP协议天然契合，支持缓存、代理等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源语义清晰，易于文档化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"广泛支持，生态成熟"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"接口粒度固定，复杂查询需多次请求"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"版本管理、权限控制需自定义"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端聚合数据不灵活"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型应用"),"：Web后端、微服务、开放平台API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"设计要点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源用名词，操作用HTTP动词"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"状态码表达结果（200/201/400/404/500等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一错误返回格式"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-http"},"GET /users/123\nPOST /orders\nPUT /products/456\nDELETE /comments/789\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-graphql"},"2. GraphQL"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：客户端通过单一端点发送查询，按需获取数据，服务端根据查询返回精确结构。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端可定制数据结构，减少冗余"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"单请求聚合多资源，减少网络开销"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"强类型校验，开发体验好"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"服务端实现复杂，N+1查询问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缓存、权限控制难度大"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"查询过深可能影响性能"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型应用"),"：前端需求多变、移动端、BFF"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"设计要点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"设计合理的Schema和类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"控制查询深度和复杂度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据权限细粒度校验"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-graphql"},'query {\n  user(id: "123") {\n    name\n    orders { id amount }\n  }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-grpc"},"3. gRPC"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：基于HTTP/2和Protobuf协议，定义IDL（接口描述语言），自动生成多语言代码，支持流式通信。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"高性能、低延迟、二进制传输"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多语言支持，接口强类型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持双向流、服务发现"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"学习曲线高，调试不如HTTP直观"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"浏览器原生支持有限（需gRPC-Web）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型应用"),"：微服务内部通信、高性能分布式系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"设计要点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"设计.proto文件，定义服务和消息"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"合理拆分服务与方法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注兼容性和版本管理"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-proto"},"service UserService {\n  rpc GetUser (UserRequest) returns (UserReply);\n}\nmessage UserRequest { string id = 1; }\nmessage UserReply { string name = 1; repeated Order orders = 2; }\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-websocket"},"4. WebSocket"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：基于TCP的全双工通信协议，客户端与服务端建立长连接，支持实时数据推送。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"实时性强，支持双向通信"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"低延迟，适合高频交互"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"状态管理复杂，连接数多时服务端压力大"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"不适合简单请求/响应场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型应用"),"：IM、实时推送、在线游戏、协同编辑"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"设计要点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"连接管理与心跳机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"消息格式与协议约定"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"断线重连与容错"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 客户端\nconst ws = new WebSocket('wss://example.com/ws');\nws.onmessage = (msg) => console.log(msg.data);\nws.send('hello');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-soap"},"5. SOAP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：基于XML的协议，定义严格的消息格式和服务描述（WSDL），支持事务、安全、可靠消息。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"标准化、协议严格、跨平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事务、安全、可靠性高"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缺点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"报文冗长，开发复杂，性能一般"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"主流互联网场景较少用"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型应用"),"：金融、电信、企业级系统集成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"设计要点"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"设计WSDL和XSD，定义服务和数据结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置安全、事务、可靠消息等特性"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"示例"),"：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-xml"},"<soap:Envelope>\n  <soap:Body>\n    <GetUser>\n      <id>123</id>\n    </GetUser>\n  </soap:Body>\n</soap:Envelope>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"选择接口风格需结合业务需求、团队技术栈、性能和安全等多方面综合考量。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/接口风格",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/database.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/数据库选择",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"现代服务端数据库选择orm与管理后台"},"现代服务端数据库选择、ORM与管理后台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-数据库选择原则"},"1. 数据库选择原则"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"关系型数据库（RDBMS）"),"：如MySQL、PostgreSQL、SQL Server、Oracle",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合强一致性、事务型、结构化数据场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"NoSQL数据库"),"：如MongoDB、Redis、Elasticsearch、Cassandra",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合高并发、海量数据、灵活结构、缓存、全文检索等场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式/云数据库"),"：如TiDB、PolarDB、Aurora、Cloud SQL",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合弹性扩展、高可用、云原生场景")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-orm对象关系映射"},"2. ORM（对象关系映射）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"简化数据库操作，将表结构映射为对象，提升开发效率，减少SQL手写"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常见ORM：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node.js"),"：Sequelize、TypeORM、Prisma、Mongoose（MongoDB）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Java"),"：MyBatis、JPA（Hibernate）、Spring Data JPA")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-数据库管理后台"},"3. 数据库管理后台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开源/自建"),"：phpMyAdmin、Adminer、DBeaver、Navicat、pgAdmin、Mongo Express、RedisInsight"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云平台"),"：阿里云RDS控制台、腾讯云数据库控制台、AWS RDS Console"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自研/集成"),"：可通过ORM/框架集成后台管理（如Spring Boot Admin、NestJS Admin等）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-应用数据库选型与示例"},"Node.js 应用数据库选型与示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-选型建议"},"1. 选型建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务数据：MySQL/PostgreSQL + Sequelize/TypeORM/Prisma"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"文档/灵活结构：MongoDB + Mongoose"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缓存/高并发：Redis")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-orm-示例以sequelizemysql为例"},"2. ORM 示例（以Sequelize+MySQL为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 安装依赖：npm install sequelize mysql2\nconst { Sequelize, DataTypes } = require('sequelize');\nconst sequelize = new Sequelize('testdb', 'root', 'password', {\n  host: 'localhost', dialect: 'mysql'\n});\nconst User = sequelize.define('User', {\n  username: DataTypes.STRING,\n  email: DataTypes.STRING\n});\n// 新增用户\nawait User.create({ username: 'alice', email: 'alice@test.com' });\n// 查询用户\nconst users = await User.findAll();\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-数据库管理后台-1"},"3. 数据库管理后台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐 DBeaver、phpMyAdmin、Navicat、Mongo Express（MongoDB）等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"java-应用数据库选型与示例"},"Java 应用数据库选型与示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-选型建议-1"},"1. 选型建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务数据：MySQL/PostgreSQL + MyBatis/JPA/Spring Data JPA"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"文档/灵活结构：MongoDB + Spring Data MongoDB"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"缓存/高并发：Redis + Spring Data Redis")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-orm-示例以spring-data-jpamysql为例"},"2. ORM 示例（以Spring Data JPA+MySQL为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// User.java\n@Entity\npublic class User {\n    @Id @GeneratedValue\n    private Long id;\n    private String username;\n    private String email;\n    // getter/setter\n}\n\n// UserRepository.java\npublic interface UserRepository extends JpaRepository<User, Long> {\n    List<User> findByUsername(String username);\n}\n\n// 使用示例\n@Autowired\nprivate UserRepository userRepository;\nuserRepository.save(new User("alice", "alice@test.com"));\nList<User> users = userRepository.findByUsername("alice");\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-数据库管理后台-2"},"3. 数据库管理后台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐 DBeaver、Navicat、Adminer、Spring Boot Admin（监控）、pgAdmin、RedisInsight 等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"进阶分库分表读写分离与数据库中间件"},"进阶：分库分表、读写分离与数据库中间件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-分库分表"},"1. 分库分表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分库"),"：将数据按某种规则分散到多个数据库实例，提升容量和并发能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分表"),"：将单表数据按规则拆分为多张表，解决单表数据量过大导致的性能瓶颈。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"常用策略"),"：按用户ID、时间、地理等分片键分库分表。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"挑战"),"：跨库/跨表查询、事务一致性、分布式ID生成。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"常用中间件方案"},"常用中间件/方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Java"),"：ShardingSphere、MyCAT、TDDL（阿里）、Cobar"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node.js"),"：Sequelize/TypeORM自定义分表逻辑，或通过数据库Proxy（如Atlas、Cetus）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"java-shardingsphere-示例"},"Java ShardingSphere 示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"# application.yml\nspring:\n  shardingsphere:\n    datasource:\n      names: ds0,ds1\n      ds0:\n        url: jdbc:mysql://localhost:3306/db0\n        username: root\n        password: pwd\n      ds1:\n        url: jdbc:mysql://localhost:3306/db1\n        username: root\n        password: pwd\n    sharding:\n      tables:\n        user:\n          actual-data-nodes: ds$->{0..1}.user_$->{0..1}\n          table-strategy:\n            inline:\n              sharding-column: id\n              algorithm-expression: user_$->{id % 2}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"nodejs-分表逻辑示例"},"Node.js 分表逻辑示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 伪代码，按userId分表\nfunction getUserTable(userId) {\n  return userId % 2 === 0 ? 'user_0' : 'user_1';\n}\nconst table = getUserTable(userId);\nconst sql = `SELECT * FROM ${table} WHERE id = ?`;\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-读写分离"},"2. 读写分离"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"原理"),"：主库负责写操作，从库负责读操作，提升读性能和可用性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"同步方式"),"：主从复制（MySQL Replication、PostgreSQL Streaming Replication等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"挑战"),"：读写延迟、数据一致性、负载均衡。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"常用中间件方案-1"},"常用中间件/方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Java"),"：ShardingSphere、MyCAT、Spring Data多数据源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node.js"),"：Sequelize/TypeORM多数据源配置，或通过Proxy")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"java-spring-data多数据源配置"},"Java Spring Data多数据源配置"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  datasource:\n    master:\n      url: jdbc:mysql://localhost:3306/master\n    slave:\n      url: jdbc:mysql://localhost:3306/slave\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"nodejs-sequelize读写分离"},"Node.js Sequelize读写分离"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const sequelize = new Sequelize('db', 'user', 'pwd', {\n  replication: {\n    read: [{ host: 'slave1' }, { host: 'slave2' }],\n    write: { host: 'master' }\n  }\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-数据库中间件"},"3. 数据库中间件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),"：屏蔽分库分表、读写分离、路由、分布式事务等复杂性，提供统一访问入口。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主流产品"),"：ShardingSphere、MyCAT、Cetus、Atlas、TDDL、Cobar"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云原生"),"：阿里云DRDS、腾讯云TDSQL、AWS Aurora等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-orm配置细节"},"4. ORM配置细节"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"连接池"),"：合理配置最大连接数、超时、重试等参数，提升并发和稳定性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"懒加载/预加载"),"：根据业务场景选择，避免N+1查询。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"事务管理"),"：确保多表/多库操作的一致性，Java常用@Transactional，Node.js用事务API。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"索引与性能"),"：为高频查询字段建索引，避免全表扫描。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志与监控"),"：开启SQL日志，集成APM/监控工具。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"java-orm配置片段spring-boot--jpa"},"Java ORM配置片段（Spring Boot + JPA）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/db\n    username: root\n    password: pwd\n    hikari:\n      maximum-pool-size: 20\n      connection-timeout: 30000\n  jpa:\n    show-sql: true\n    hibernate:\n      ddl-auto: update\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"nodejs-orm配置片段sequelize"},"Node.js ORM配置片段（Sequelize）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const sequelize = new Sequelize('db', 'user', 'pwd', {\n  pool: {\n    max: 20,\n    min: 2,\n    acquire: 30000,\n    idle: 10000\n  },\n  logging: console.log\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"分库分表、读写分离和数据库中间件是现代高并发系统的核心能力，ORM配置优化可显著提升开发效率和系统性能。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"现代服务端数据库选型需结合业务场景、数据结构、扩展性、团队技术栈等综合考量。ORM和管理后台可大幅提升开发与运维效率。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/数据库选择",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/es.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/ES",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"什么是-es"},"什么是 ES？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"ES（Elasticsearch）")," 是一个开源的分布式搜索和分析引擎，基于 Apache Lucene 构建，具备高性能、可扩展、实时性强等特点。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"es-是干嘛的"},"ES 是干嘛的？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全文检索"),"：支持大规模文本的高效搜索，常用于网站、应用的搜索功能。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"结构化数据分析"),"：支持复杂的聚合、统计、分析，适合日志、监控、报表等场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式存储"),"：可横向扩展，支持PB级数据存储和检索。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实时数据处理"),"：数据写入后几乎可立即被检索，适合实时业务需求。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"主要应用场景"},"主要应用场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"网站/应用搜索（如电商、社区、文档检索）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志分析（ELK Stack：Elasticsearch + Logstash + Kibana）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控告警（APM、指标聚合）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据可视化与报表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"大数据分析与数据湖")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"基本原理"},"基本原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"倒排索引"),"：高效支持全文检索。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分片与副本"),"：分布式存储，支持高可用和扩展。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RESTful API"),"：通过HTTP接口进行数据的增删查改和查询分析。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"ES 是现代企业级系统中不可或缺的搜索与分析引擎，广泛应用于各类数据驱动场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-与-java-如何接入-es"},"Node.js 与 Java 如何接入 ES"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"nodejs-接入-elasticsearch"},"Node.js 接入 Elasticsearch"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"常用官方库：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"@elastic/elasticsearch")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 安装依赖\n// npm install @elastic/elasticsearch\nconst { Client } = require('@elastic/elasticsearch');\nconst client = new Client({ node: 'http://localhost:9200' });\n\n// 索引文档\nawait client.index({\n  index: 'products',\n  document: { id: 1, name: 'iPhone', desc: 'Apple phone' }\n});\n\n// 搜索文档\nconst result = await client.search({\n  index: 'products',\n  query: { match: { name: 'iPhone' } }\n});\nconsole.log(result.hits.hits);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"java-接入-elasticsearch"},"Java 接入 Elasticsearch"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"常用官方库：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"elasticsearch-rest-high-level-client"),"（7.x），8.x推荐",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"p"},"elasticsearch-java")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// 以7.x为例\nRestHighLevelClient client = new RestHighLevelClient(\n    RestClient.builder(new HttpHost("localhost", 9200, "http")));\n\n// 索引文档\nIndexRequest request = new IndexRequest("products").id("1")\n    .source("name", "iPhone", "desc", "Apple phone");\nclient.index(request, RequestOptions.DEFAULT);\n\n// 搜索文档\nSearchRequest searchRequest = new SearchRequest("products");\nSearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\nsourceBuilder.query(QueryBuilders.matchQuery("name", "iPhone"));\nsearchRequest.source(sourceBuilder);\nSearchResponse response = client.search(searchRequest, RequestOptions.DEFAULT);\nresponse.getHits().forEach(hit -> System.out.println(hit.getSourceAsString()));\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"es底层实现原理"},"ES底层实现原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"倒排索引"),"：ES基于Lucene，核心是倒排索引。将每个词映射到包含该词的文档ID列表，极大提升全文检索效率。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分片与副本"),"：数据分布在多个分片（shard）上，支持横向扩展和高可用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存+磁盘混合存储"),"：热数据常驻内存，冷数据落盘，查询时优先命中内存。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"批量写入与并发查询"),"：支持高并发写入和查询，适合大数据量场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"聚合与分析引擎"),"：内置聚合、分组、统计等分析能力。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"为什么es比mysql索引还快"},"为什么ES比MySQL索引还快？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"索引结构不同"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"MySQL主用B+树索引，适合范围/主键查找，不适合全文检索。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ES用倒排索引，专为全文检索和多条件查询优化。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式架构"),"：ES天然分布式，查询可并发分发到多个分片，速度远超单机数据库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"内存优化"),"：ES大量用内存缓存倒排索引，查询时极少磁盘IO。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"批量并行"),"：ES查询、聚合、排序等操作可并行处理，适合大数据量和复杂检索。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"专为搜索设计"),"：ES为搜索和分析场景专门优化，MySQL更适合事务型数据。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"总结：ES底层倒排索引+分布式+内存优化，使其在全文检索和复杂查询场景下远快于传统关系型数据库索引。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"mysql-b树索引-vs-es倒排索引"},"MySQL B+树索引 vs. ES倒排索引"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"区别与对比"},"区别与对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"特性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"MySQL B+树索引"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"ES倒排索引"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"适合场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"主键/范围查找、事务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"全文检索、复杂多条件查询")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"查询效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"主键/范围高，全文低"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"全文/多条件高")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"数据结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"B+树"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"倒排索引")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"事务支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"弱")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"分布式扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"一般"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"天然分布式")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"典型应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"业务库、交易库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"搜索、日志、分析")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"B+树索引"),"：适合结构化数据的高效主键/范围查找，不适合全文检索。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"倒排索引"),"：专为全文检索和复杂查询设计，速度远超关系型数据库在这类场景下的表现。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"es倒排索引是如何做到的"},"ES倒排索引是如何做到的？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"分词（Tokenization）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"文本字段写入ES时，先经过分词器（Analyzer）处理，将文本拆分为一个个词项（Token）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'例如："Elasticsearch is fast" → ','["elasticsearch", "is", "fast"]'))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"建立倒排表（Inverted Index）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"对每个词项，记录它出现在哪些文档（文档ID列表）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"例如：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'"elasticsearch" → ',"[doc1, doc3]"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'"fast" → ',"[doc1, doc2]"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"存储结构")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每个倒排表条目还可记录词频、位置、偏移量等，支持高亮、相关性排序。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"所有倒排表存储在Lucene的Segment文件中，支持高效合并和压缩。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"查询过程")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"查询时，直接查倒排表，瞬间定位包含某词的所有文档。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多条件查询时，取多个词的文档ID列表做交集/并集，效率极高。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"分片与分布式")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ES自动将索引分片，倒排表分布在多个节点，查询时并发检索，进一步提升速度。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"ES倒排索引通过分词、倒排表、分布式架构，实现了大规模文本的高效全文检索和复杂查询。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"什么是倒排表倒排索引"},"什么是倒排表（倒排索引）？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"倒排表（Inverted Index）是全文检索系统的核心数据结构。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"概念"},"概念"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"正排表"),'：记录"文档 → 词"，即每个文档包含哪些词。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"倒排表"),'：记录"词 → 文档"，即每个词出现在哪些文档中。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"类比"},"类比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'类似于图书馆的"图书主题卡片"：',Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每个主题（词）有一张卡片，卡片上列出所有包含该主题的书（文档ID）。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"示例"},"示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"假设有3个文档："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'doc1: "Elasticsearch is fast"'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'doc2: "Elasticsearch is distributed"'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'doc3: "Fast search engine"')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"分词后："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"doc1: ","[elasticsearch, is, fast]"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"doc2: ","[elasticsearch, is, distributed]"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"doc3: ","[fast, search, engine]")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"倒排表：\n| 词项           | 文档ID列表         |\n|----------------|-------------------|\n| elasticsearch  | doc1, doc2        |\n| is             | doc1, doc2        |\n| fast           | doc1, doc3        |\n| distributed    | doc2              |\n| search         | doc3              |\n| engine         | doc3              |"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"查询过程"},"查询过程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'查询"fast"时，直接查倒排表，得到doc1和doc3。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'查询"elasticsearch AND fast"，取两个词的文档ID列表交集，得到doc1。')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"图示"},"图示"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"词项:  elasticsearch   fast   search\n         |             |        |\n         v             v        v\n      [doc1,doc2]   [doc1,doc3] [doc3]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},'倒排表让全文检索变得极快，因为查找某个词出现在哪些文档时只需查一张"卡片"，无需全表扫描。')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/ES",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/java-code-style.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/java-代码风格增量检查",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"java代码风格与增量检查实践"},"Java代码风格与增量检查实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-代码风格与静态检查工具"},"1. 代码风格与静态检查工具"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Checkstyle"),"：检查Java代码风格，类似eslint。可集成到IDE、Maven/Gradle、CI。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"PMD"),"：检测潜在问题和坏味道。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SpotBugs（FindBugs）"),"：静态分析，发现bug和潜在缺陷。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SonarQube"),"：代码质量平台，支持静态检查、重复代码、复杂度、单元测试覆盖率等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-提交前钩子类似husky"},"2. 提交前钩子（类似husky）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Husky + lint-staged"),"：Husky支持Java项目（只要用git），可在",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},".husky/pre-commit"),"脚本中调用",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"mvn checkstyle:check"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"./gradlew check"),"等命令。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"lefthook"),"：轻量级git hook工具，支持多语言，配置简单，适合团队协作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"pre-commit"),"：跨语言git hook框架，支持Java、Python、JS等，易于集成各种检查脚本。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-提交信息规范类似commitlint"},"3. 提交信息规范（类似commitlint）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"commitlint"),"：也可用于Java项目，只要你的提交走git，可以用Node.js方式安装并在husky/pre-commit或pre-push hook里校验。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Conventional Commits"),"：约定式提交规范，配合commitlint、cz-customizable等工具，适用于所有git项目。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-增量提交检查"},"4. 增量提交检查"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"lint-staged"),"：可在提交时只检查变更的文件（如只对本次git staged的Java文件运行checkstyle）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SonarQube PR分析"),"：支持Pull Request增量代码质量检查。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-java项目集成checkstyle--husky--commitlint示例"},"5. Java项目集成Checkstyle + Husky + commitlint示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安装husky"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sh"},"npm install husky --save-dev\nnpx husky install\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"添加pre-commit钩子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sh"},'npx husky add .husky/pre-commit "mvn checkstyle:check"\n'))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"集成commitlint"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sh"},'npm install @commitlint/{config-conventional,cli} --save-dev\nnpx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"\n'))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置lint-staged（可选）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-json"},'// package.json\n"lint-staged": {\n  "*.java": "mvn checkstyle:check"\n}\n')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-总结与推荐"},"6. 总结与推荐"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Java项目完全可以实现前端类似的代码风格检查、提交规范、增量检查和自动化流程。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐结合Checkstyle/PMD/SonarQube + Husky/lefthook + commitlint，提升团队协作和代码质量。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"如需具体工具配置示例或脚本，欢迎告知你的构建工具（Maven/Gradle）和团队需求！")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/java-代码风格增量检查",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/java-mvc.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/java-SpringBoot实践",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"java-springboot订单微服务系统架构设计"},"Java SpringBoot订单微服务系统架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"本示例以订单微服务为核心，采用Spring Boot + MyBatis + MySQL + Kafka + Elasticsearch + MQ等技术栈，结合微服务架构进行设计。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-架构总览"},"1. 架构总览"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"微服务拆分"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"订单服务（Order Service）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户服务（User Service）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"商品服务（Product Service）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支付服务（Payment Service）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通知服务（Notification Service）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务间通信"),"：RESTful API + 消息队列（MQ/Kafka）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"注册与发现"),"：Nacos/Consul/Eureka"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置中心"),"：Nacos/Spring Cloud Config"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"网关"),"：Spring Cloud Gateway/Nginx")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-技术选型"},"2. 技术选型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"后端框架"),"：Spring Boot、Spring Cloud"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ORM"),"：MyBatis（数据访问层）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据库"),"：MySQL（主数据存储）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息中间件"),"：Kafka（异步解耦、事件驱动）、RocketMQ/RabbitMQ（可选）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"搜索引擎"),"：Elasticsearch（订单检索、分析）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存"),"：Redis（热点数据缓存、分布式锁）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"API文档"),"：Swagger/OpenAPI"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"监控"),"：Spring Boot Actuator、Prometheus、Grafana、ELK")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-典型业务流程"},"3. 典型业务流程"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"用户下单：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端调用订单服务API，订单服务校验用户、商品、库存等信息。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"订单数据写入MySQL，订单事件发送到Kafka。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"库存扣减：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"商品服务监听Kafka订单事件，扣减库存。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"支付处理：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"用户支付后，支付服务回调订单服务，更新订单状态。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"订单检索：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"订单服务将订单数据同步到Elasticsearch，支持复杂检索。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"通知推送：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通知服务通过MQ异步推送短信/邮件/站内信。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-关键设计要点"},"4. 关键设计要点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务解耦"),"：通过MQ/Kafka实现服务间异步通信，降低耦合。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据一致性"),"：采用本地消息表、事务消息、幂等处理等手段保障一致性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高可用"),"：服务多实例部署，数据库主从，MQ集群，ES集群。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"扩展性"),"：各服务可独立扩容，支持水平扩展。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"监控与追踪"),"：全链路追踪（如SkyWalking/Zipkin）、日志采集、指标监控。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-目录结构建议"},"5. 目录结构建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-plaintext"},"order-service/\n├── src/main/java/com/example/order\n│   ├── controller\n│   ├── service\n│   ├── repository\n│   ├── model\n│   ├── mq\n│   └── config\n├── src/main/resources\n│   ├── application.yml\n│   └── mapper\n└── Dockerfile\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-详细目录结构与核心代码示例"},"6. 详细目录结构与核心代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-plaintext"},"order-service/\n├── src/main/java/com/example/order\n│   ├── controller\n│   │   └── OrderController.java\n│   ├── service\n│   │   └── OrderService.java\n│   ├── service/impl\n│   │   └── OrderServiceImpl.java\n│   ├── repository\n│   │   └── OrderRepository.java\n│   ├── model\n│   │   └── Order.java\n│   ├── mq\n│   │   └── OrderEventProducer.java\n│   └── config\n│       └── KafkaConfig.java\n├── src/main/resources\n│   ├── application.yml\n│   └── mapper\n│       └── OrderMapper.xml\n└── Dockerfile\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"orderjava"},"Order.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.order.model;\n\npublic class Order {\n    private Long id;\n    private Long userId;\n    private Long productId;\n    private Integer amount;\n    private String status;\n    // getter/setter 省略\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"ordercontrollerjava"},"OrderController.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'package com.example.order.controller;\n\nimport com.example.order.model.Order;\nimport com.example.order.service.OrderService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\nimport java.util.List;\n\n@RestController\n@RequestMapping("/orders")\npublic class OrderController {\n    @Autowired\n    private OrderService orderService;\n\n    @GetMapping("/{id}")\n    public Order getOrder(@PathVariable Long id) {\n        return orderService.getOrderById(id);\n    }\n\n    @PostMapping("")\n    public Order createOrder(@RequestBody Order order) {\n        return orderService.createOrder(order);\n    }\n\n    @PostMapping("/{id}/process")\n    public Order processOrder(@PathVariable Long id) {\n        return orderService.processOrder(id);\n    }\n\n    @GetMapping("")\n    public List<Order> listOrders() {\n        return orderService.listOrders();\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"orderservicejava"},"OrderService.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.order.service;\n\nimport com.example.order.model.Order;\nimport java.util.List;\n\npublic interface OrderService {\n    Order getOrderById(Long id);\n    Order createOrder(Order order);\n    Order processOrder(Long id);\n    List<Order> listOrders();\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"orderserviceimpljava"},"OrderServiceImpl.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'package com.example.order.service.impl;\n\nimport com.example.order.model.Order;\nimport com.example.order.repository.OrderRepository;\nimport com.example.order.mq.OrderEventProducer;\nimport com.example.order.service.OrderService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport java.util.List;\n\n@Service\npublic class OrderServiceImpl implements OrderService {\n    @Autowired\n    private OrderRepository orderRepository;\n    @Autowired\n    private OrderEventProducer orderEventProducer;\n\n    @Override\n    public Order getOrderById(Long id) {\n        return orderRepository.findById(id);\n    }\n\n    @Override\n    public Order createOrder(Order order) {\n        order.setStatus("CREATED");\n        orderRepository.save(order);\n        orderEventProducer.sendOrderCreatedEvent(order);\n        return order;\n    }\n\n    @Override\n    public Order processOrder(Long id) {\n        Order order = orderRepository.findById(id);\n        if (order != null && "CREATED".equals(order.getStatus())) {\n            order.setStatus("PROCESSED");\n            orderRepository.update(order);\n            orderEventProducer.sendOrderProcessedEvent(order);\n        }\n        return order;\n    }\n\n    @Override\n    public List<Order> listOrders() {\n        return orderRepository.findAll();\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"orderrepositoryjava"},"OrderRepository.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.order.repository;\n\nimport com.example.order.model.Order;\nimport java.util.List;\n\npublic interface OrderRepository {\n    Order findById(Long id);\n    void save(Order order);\n    void update(Order order);\n    List<Order> findAll();\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"ordereventproducerjava"},"OrderEventProducer.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'package com.example.order.mq;\n\nimport com.example.order.model.Order;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class OrderEventProducer {\n    @Autowired\n    private KafkaTemplate<String, Object> kafkaTemplate;\n\n    public void sendOrderCreatedEvent(Order order) {\n        kafkaTemplate.send("order-created", order);\n    }\n    public void sendOrderProcessedEvent(Order order) {\n        kafkaTemplate.send("order-processed", order);\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"applicationyml片段"},"application.yml（片段）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/orderdb\n    username: root\n    password: password\n  kafka:\n    bootstrap-servers: localhost:9092\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"7-用户服务user-service与微服务协作示例"},"7. 用户服务（User Service）与微服务协作示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"目录结构"},"目录结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-plaintext"},"user-service/\n├── src/main/java/com/example/user\n│   ├── controller\n│   │   └── UserController.java\n│   ├── service\n│   │   └── UserService.java\n│   ├── service/impl\n│   │   └── UserServiceImpl.java\n│   ├── repository\n│   │   └── UserRepository.java\n│   ├── model\n│   │   └── User.java\n│   └── config\n│       └── ...\n├── src/main/resources\n│   ├── application.yml\n│   └── mapper\n│       └── UserMapper.xml\n└── Dockerfile\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"userjava"},"User.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.user.model;\n\npublic class User {\n    private Long id;\n    private String username;\n    private String email;\n    // getter/setter 省略\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"usercontrollerjava"},"UserController.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'package com.example.user.controller;\n\nimport com.example.user.model.User;\nimport com.example.user.service.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping("/users")\npublic class UserController {\n    @Autowired\n    private UserService userService;\n\n    @GetMapping("/{id}")\n    public User getUser(@PathVariable Long id) {\n        return userService.getUserById(id);\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"userservicejava"},"UserService.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.user.service;\n\nimport com.example.user.model.User;\n\npublic interface UserService {\n    User getUserById(Long id);\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"userserviceimpljava"},"UserServiceImpl.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.user.service.impl;\n\nimport com.example.user.model.User;\nimport com.example.user.repository.UserRepository;\nimport com.example.user.service.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl implements UserService {\n    @Autowired\n    private UserRepository userRepository;\n\n    @Override\n    public User getUserById(Long id) {\n        return userRepository.findById(id);\n    }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"userrepositoryjava"},"UserRepository.java"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"package com.example.user.repository;\n\nimport com.example.user.model.User;\n\npublic interface UserRepository {\n    User findById(Long id);\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"用户服务与订单服务的协作"},"用户服务与订单服务的协作"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"在订单服务中通过RestTemplate/OpenFeign等方式远程调用用户服务接口，实现微服务间协作："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h5",{id:"订单服务中调用用户服务"},"订单服务中调用用户服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// OrderServiceImpl.java 片段\nimport org.springframework.web.client.RestTemplate;\n// ...\n@Autowired\nprivate RestTemplate restTemplate;\n\n@Override\npublic Order createOrder(Order order) {\n    // 校验用户是否存在\n    User user = restTemplate.getForObject("http://user-service/users/" + order.getUserId(), User.class);\n    if (user == null) {\n        throw new RuntimeException("用户不存在");\n    }\n    // ...后续订单创建逻辑\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"生产环境推荐使用OpenFeign等声明式HTTP客户端，支持服务注册与发现、负载均衡。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"spring-cloud注册与发现配置简要"},"Spring Cloud注册与发现配置（简要）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"# application.yml 片段\nspring:\n  application:\n    name: order-service\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848\n\n---\nspring:\n  application:\n    name: user-service\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"通过上述方式，订单服务与用户服务实现了解耦、独立部署、服务注册与发现、远程调用等微服务核心特性。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/java-SpringBoot实践",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/java.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/java",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"java入门与工程体系介绍"},"java入门与工程体系介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"现代java企业级工程体系与技术栈"},"现代Java企业级工程体系与技术栈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"现代Java企业级工程体系涵盖了从开发、测试、部署、运维到监控和扩容的全生命周期，通常包括如下技术栈和体系："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-开发阶段"},"1. 开发阶段"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"编程语言"),"：Java 17+（LTS版本）、Kotlin（部分场景）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开发框架"),"：Spring Boot、Spring Cloud、Spring MVC、MyBatis、JPA、Hibernate"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"构建工具"),"：Maven、Gradle"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"API设计"),"：RESTful API、GraphQL、gRPC"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"前后端分离"),"：前端常用React/Vue/Angular，后端提供API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"单元测试/集成测试"),"：JUnit、Mockito、Testcontainers、Spring Test"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码质量"),"：SonarQube、Checkstyle、PMD、SpotBugs")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-持续集成与交付cicd"},"2. 持续集成与交付（CI/CD）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"CI/CD平台"),"：Jenkins、GitLab CI、GitHub Actions、ArgoCD"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代码管理"),"：Git（GitHub、GitLab、Gitee等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化测试与部署"),"：Pipeline自动化构建、测试、部署")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-运维与部署"},"3. 运维与部署"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"容器化"),"：Docker"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"编排与管理"),"：Kubernetes（K8s）、Helm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务注册与发现"),"：Eureka、Consul、Nacos"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置中心"),"：Spring Cloud Config、Nacos Config"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务网关"),"：Spring Cloud Gateway、Kong、Nginx"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"负载均衡"),"：Nginx、K8s Ingress、Ribbon")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-监控与告警"},"4. 监控与告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"监控系统"),"：Prometheus、Grafana、Spring Boot Actuator、Micrometer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志收集"),"：ELK（Elasticsearch、Logstash、Kibana）、EFK（Fluentd）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式追踪"),"：Zipkin、Jaeger、SkyWalking"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"告警系统"),"：Alertmanager、钉钉/企业微信/邮件集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-扩容与高可用"},"5. 扩容与高可用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动扩容"),"：Kubernetes HPA（Horizontal Pod Autoscaler）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高可用架构"),"：多实例部署、负载均衡、分布式缓存（Redis Cluster）、数据库主从/分库分表"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"容灾备份"),"：多机房部署、定期备份、灰度发布、蓝绿部署")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"6-云原生与云服务"},"6. 云原生与云服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云平台"),"：阿里云、腾讯云、华为云、AWS、Azure、Google Cloud"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云原生技术"),"：Kubernetes、Service Mesh（Istio）、Serverless（FaaS）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"中间件"),"：云数据库、消息队列（RocketMQ、Kafka）、对象存储（OSS、S3）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"7-安全与合规"},"7. 安全与合规"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全加固"),"：HTTPS、JWT/OAuth2、API网关限流、WAF"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"合规审计"),"：日志审计、权限管理、数据加密")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"现代Java企业级工程体系强调自动化、标准化、可观测性和弹性扩展，助力企业高效、稳定地交付和运维大规模分布式系统。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"8-云开发cloud-development"},"8. 云开发（Cloud Development）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"云开发是一种 Serverless 一体化开发平台，开发者无需关注服务器运维，专注于业务逻辑开发。常见云开发平台有腾讯云 CloudBase、阿里云云开发、华为云开发等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"特性"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"无需自建服务器，资源弹性伸缩"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一体化云端能力（数据库、存储、鉴权、函数计算、API 网关等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端一体化开发体验，适合小程序、Web、移动端等多端应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持云函数（FaaS）、云数据库、云存储、云托管等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化运维、监控、日志、告警"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"常见场景"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"快速原型开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序/移动端/轻量级Web应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"事件驱动型后端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"低运维成本的中小型项目"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"代表平台"),"："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"腾讯云 CloudBase"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"阿里云云开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"华为云开发平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Firebase（Google）")))))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/java",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/load-blance.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/负载均衡",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"负载均衡详解与实践"},"负载均衡详解与实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-负载均衡原理"},"1. 负载均衡原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"负载均衡（Load Balancing）用于将用户请求分发到多台后端服务器，实现高可用、高并发、弹性扩展。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"目标：提升系统吞吐、容错能力，消除单点故障。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常见算法：轮询、加权轮询、最少连接、IP哈希、健康检查等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-常见负载均衡方案"},"2. 常见负载均衡方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"L4（传输层）"),"：如LVS、云SLB，基于TCP/UDP，性能高，适合大流量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"L7（应用层）"),"：如Nginx、HAProxy、Traefik，支持HTTP/HTTPS、路由、重写、鉴权等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云平台SLB"),"：如阿里云SLB、腾讯云CLB、AWS ELB，弹性伸缩、自动健康检查、全托管"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务网格"),"：如Istio、Linkerd，微服务流量治理、灰度发布、熔断限流")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-nodejsjava项目负载均衡部署实践"},"3. Node.js/Java项目负载均衡部署实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1多实例部署"},"1）多实例部署"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"将Node.js/Java服务打包为多个实例（进程/容器），监听不同端口或主机"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可用PM2（Node.js）、Spring Boot多端口、Docker Compose/K8s等编排")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2nginx负载均衡手动配置"},"2）Nginx负载均衡（手动配置）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"安装Nginx，配置upstream",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-nginx"},"http {\n  upstream app_servers {\n    server 127.0.0.1:3000;\n    server 127.0.0.1:3001;\n    server 127.0.0.1:3002;\n  }\n  server {\n    listen 80;\n    location / {\n      proxy_pass http://app_servers;\n    }\n  }\n}\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适用于本地、物理机、虚拟机、Docker等多种环境")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3docker-compose负载均衡"},"3）Docker Compose负载均衡"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多个服务实例+Nginx容器",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},'version: \'3\'\nservices:\n  app1:\n    image: myapp:latest\n    ports: ["3000"]\n  app2:\n    image: myapp:latest\n    ports: ["3001"]\n  nginx:\n    image: nginx:latest\n    ports: ["80:80"]\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n    depends_on:\n      - app1\n      - app2\n')))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4kubernetes负载均衡"},"4）Kubernetes负载均衡"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用Deployment+Service暴露多副本，Service自动负载均衡",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n      - name: myapp\n        image: myapp:latest\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: myapp-svc\nspec:\n  type: LoadBalancer\n  selector:\n    app: myapp\n  ports:\n  - port: 80\n    targetPort: 3000\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云厂商自动分配公网/内网SLB")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-阿里云slb负载均衡方案"},"4. 阿里云SLB负载均衡方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SLB（Server Load Balancer）"),"：阿里云托管型负载均衡，支持L4/L7、自动健康检查、弹性扩容、证书管理、DDoS防护"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置流程"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"云主机/容器服务部署多实例应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"控制台创建SLB实例，添加后端服务器（ECS、容器、IP等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"配置监听端口、转发规则、健康检查、证书等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"绑定域名/公网IP，流量自动分发到后端实例"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优点"),"：无需手动维护，自动弹性伸缩，支持多可用区容灾，监控与告警一体化")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-负载均衡最佳实践与建议"},"5. 负载均衡最佳实践与建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"后端服务需无状态，支持横向扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"健康检查及时剔除故障节点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置合理的超时、重试、限流、熔断"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合云平台SLB与Nginx/Traefik等自建方案，满足不同场景需求"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志与监控联动，及时发现与定位流量异常")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"负载均衡是高可用、高并发系统的基石，推荐结合云平台SLB与开源方案，灵活应对不同规模和部署环境。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/负载均衡",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/mcor-server.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/微服务架构",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"什么是微服务架构"},"什么是微服务架构？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"微服务架构（Microservices Architecture）是一种将单一应用拆分为一组小型、自治、可独立部署的服务的架构风格。每个服务围绕特定业务能力构建，服务间通过网络通信（如HTTP、RPC、消息队列）协作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"微服务架构的核心特点"},"微服务架构的核心特点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"单一职责：每个服务聚焦单一业务能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"独立部署：服务可独立开发、测试、部署、扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术多样性：不同服务可用不同技术栈实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"去中心化：自治团队负责各自服务的全生命周期"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"容错与弹性：服务间隔离，单点故障影响有限")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"java-微服务架构设计与示例"},"Java 微服务架构设计与示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"设计思路"},"设计思路"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常用Spring Boot + Spring Cloud生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"服务注册与发现：Eureka/Nacos/Consul"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置中心：Spring Cloud Config/Nacos"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"服务网关：Spring Cloud Gateway"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通信方式：RESTful、gRPC、消息队列"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控：Spring Boot Actuator、Prometheus、ELK")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"目录结构示例"},"目录结构示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-plaintext"},"order-service/\n├── src/main/java/com/example/order\n│   ├── controller\n│   ├── service\n│   ├── repository\n│   └── model\nuser-service/\n├── src/main/java/com/example/user\n│   ├── controller\n│   ├── service\n│   ├── repository\n│   └── model\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"典型代码示例spring-boot-rest服务"},"典型代码示例（Spring Boot REST服务）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// OrderController.java\n@RestController\n@RequestMapping("/orders")\npublic class OrderController {\n    @GetMapping("/{id}")\n    public Order getOrder(@PathVariable Long id) {\n        // ... 查询订单逻辑\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// 服务间调用（RestTemplate 或 OpenFeign）\n@FeignClient(name = "user-service")\npublic interface UserClient {\n    @GetMapping("/users/{id}")\n    User getUser(@PathVariable Long id);\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-微服务架构设计与示例"},"Node.js 微服务架构设计与示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"设计思路-1"},"设计思路"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常用Express/Koa + 微服务框架（如Moleculer、Seneca、Micro）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"服务注册与发现：Consul、etcd、自实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通信方式：HTTP、gRPC、消息队列（如RabbitMQ、Kafka）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"API网关：API Gateway/Nginx"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控：Prometheus、ELK、PM2")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"目录结构示例-1"},"目录结构示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-plaintext"},"order-service/\n├── src/\n│   └── order.controller.js\nuser-service/\n├── src/\n│   └── user.controller.js\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"典型代码示例express--http"},"典型代码示例（Express + HTTP）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// order.controller.js\nconst express = require('express');\nconst router = express.Router();\nrouter.get('/orders/:id', (req, res) => {\n  // ... 查询订单逻辑\n  res.json({ id: req.params.id, status: 'ok' });\n});\nmodule.exports = router;\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 服务间调用（HTTP）\nconst axios = require('axios');\nasync function getUser(id) {\n  const res = await axios.get(`http://user-service:3000/users/${id}`);\n  return res.data;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"微服务中的服务注册与发现"},"微服务中的服务注册与发现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"服务注册与发现是微服务架构的核心能力之一，解决服务实例动态上下线、自动发现、负载均衡等问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"原理说明"},"原理说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务注册中心"),"：所有服务启动时将自身信息（服务名、地址、端口等）注册到注册中心。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务发现"),"：服务消费者通过注册中心获取目标服务的可用实例列表，实现自动发现和负载均衡。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"动态感知"),"：服务实例上下线、健康状态变化，注册中心会自动通知消费者。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"常用注册中心"},"常用注册中心"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Eureka"),"（Spring Cloud Netflix）：Java生态，易用、社区成熟。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Nacos"),"（阿里开源）：支持服务注册/发现+配置中心，支持多语言。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Consul"),"：支持健康检查、KV存储、跨语言，适合多技术栈。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"etcd、Zookeeper"),"：分布式一致性强，常用于底层协调。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"java微服务注册与发现示例以nacos为例"},"Java微服务注册与发现示例（以Nacos为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"1. 服务端注册")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"# application.yml\nspring:\n  application:\n    name: order-service\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"服务启动后自动注册到Nacos。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"2. 服务发现与调用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'@FeignClient(name = "user-service")\npublic interface UserClient {\n    @GetMapping("/users/{id}")\n    User getUser(@PathVariable Long id);\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Feign会自动从Nacos获取user-service的可用实例并负载均衡调用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"nodejs微服务注册与发现示例以consul为例"},"Node.js微服务注册与发现示例（以Consul为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"1. 服务注册")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 使用consul包\nconst Consul = require('consul');\nconst consul = new Consul();\nconsul.agent.service.register({\n  name: 'order-service',\n  address: '127.0.0.1',\n  port: 3000\n}, err => {\n  if (err) throw err;\n  console.log('Service registered to Consul');\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"2. 服务发现")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"consul.catalog.service.nodes('user-service', (err, result) => {\n  if (err) throw err;\n  console.log('user-service nodes:', result);\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"服务注册与发现让微服务系统具备自动化、弹性扩展和高可用能力，是现代分布式架构的基础设施。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/微服务架构",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/monitor.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/后端监控",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"完整的后端监控系统"},"完整的后端监控系统"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-需要监控的核心指标"},"1. 需要监控的核心指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"基础资源"),"：CPU、内存、磁盘、网络、负载、端口存活"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"应用服务"),"：接口响应时间、QPS、错误率、超时、慢请求、线程池、连接池"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据库"),"：连接数、慢SQL、主从延迟、QPS、TPS、缓存命中率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"中间件"),"：MQ堆积、消费延迟、失败率、Redis命中率、队列长度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志监控"),"：异常日志、关键业务日志、告警日志"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业务指标"),"：订单量、注册量、转化率、支付成功率等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"可用性"),"：服务存活、健康检查、自动重启、流量切换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全"),"：异常登录、接口攻击、SQL注入、权限变更")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-主流开源监控软件"},"2. 主流开源监控软件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Prometheus"),"：时序数据采集与告警，配合Grafana可视化，适合云原生、微服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Grafana"),"：强大的可视化仪表盘，支持多数据源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ELK/EFK（Elasticsearch + Logstash/Fluentd + Kibana）"),"：日志采集、检索、分析"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Zabbix"),"：传统IT基础设施监控，支持多种协议和自定义脚本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Alertmanager"),"：Prometheus告警管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Jaeger/Zipkin/SkyWalking"),"：分布式链路追踪，APM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node Exporter/JMX Exporter/Blackbox Exporter"),"：系统、JVM、接口探活等指标采集"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"VictoriaMetrics/Thanos"),"：Prometheus数据高可用与长时存储")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-大厂主流监控工具平台"},"3. 大厂主流监控工具/平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"阿里云云监控（CloudMonitor）"),"：主机、数据库、应用、业务、日志、告警一体化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"腾讯云云监控（CM）"),"：资源、应用、业务、日志、APM、可观测一体化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"华为云云监控"),"：基础设施、应用、业务、日志、APM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"AWS CloudWatch"),"：云资源、应用、日志、告警、自动伸缩"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Azure Monitor"),"：云资源、应用、日志、APM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Google Cloud Operations Suite（Stackdriver）"),"：监控、日志、APM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Datadog/New Relic/Sentry"),"：国际主流SaaS监控平台，支持多云多语言")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-典型监控系统架构"},"4. 典型监控系统架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"[Exporter/Agent] → [Prometheus/Zabbix/云监控] → [时序库/日志库] → [Grafana/Kibana/云平台] → [Alertmanager/告警]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"完整的后端监控体系需覆盖基础资源、应用、数据库、中间件、日志、业务、安全等全链路，推荐开源+云平台结合，满足不同规模和场景需求。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"后端监控系统落地实践详细方案"},"后端监控系统落地实践（详细方案）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-需要监控哪些内容"},"1. 需要监控哪些内容？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"基础资源"),"：CPU、内存、磁盘、网络、主机存活"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"应用服务"),"：接口响应时间、QPS、错误率、慢请求、线程池、连接池"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据库"),"：连接数、慢SQL、主从延迟、QPS、TPS、缓存命中率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"中间件"),"：MQ堆积、消费延迟、Redis命中率、队列长度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志监控"),"：异常日志、关键业务日志、告警日志"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业务指标"),"：订单量、注册量、转化率、支付成功率等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全"),"：异常登录、接口攻击、SQL注入、权限变更")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-监控平台选型建议"},"2. 监控平台选型建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开源组合"),"：Prometheus + Grafana + Alertmanager + ELK（Elasticsearch/Logstash/Kibana）",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合自建、可高度定制、无授权费用"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云平台"),"：阿里云云监控、腾讯云云监控、AWS CloudWatch、Datadog等",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合云上资源、快速集成、自动化运维"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"混合方案"),"：开源+云平台结合，满足多云/本地/定制需求")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-典型开源监控系统搭建与配置以prometheusgrafanaalertmanagerelk为例"},"3. 典型开源监控系统搭建与配置（以Prometheus+Grafana+Alertmanager+ELK为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"步骤一部署exporteragent采集指标"},"步骤一：部署Exporter/Agent采集指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Node Exporter"),"：采集主机CPU、内存、磁盘、网络等",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sh"},"# 安装\nwget https://github.com/prometheus/node_exporter/releases/download/v*/node_exporter-*.tar.gz\ntar -zxvf node_exporter-*.tar.gz\n./node_exporter &\n# 默认9100端口\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"JMX Exporter"),"：采集JVM/Java应用指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Blackbox Exporter"),"：接口探活、外部探测"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"MySQL Exporter/Redis Exporter"),"：采集数据库/缓存指标")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"步骤二部署prometheus采集与存储指标"},"步骤二：部署Prometheus采集与存储指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"prometheus.yml配置示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"global:\n  scrape_interval: 15s\nscrape_configs:\n  - job_name: 'node'\n    static_configs:\n      - targets: ['localhost:9100']\n  - job_name: 'mysql'\n    static_configs:\n      - targets: ['mysql-exporter:9104']\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"启动Prometheus，访问 http://localhost:9090")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"步骤三部署grafana可视化"},"步骤三：部署Grafana可视化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"安装Grafana，配置Prometheus为数据源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"导入官方仪表盘模板（如Node Exporter Full、MySQL Overview等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自定义业务指标大盘")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"步骤四部署alertmanager告警"},"步骤四：部署Alertmanager告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Prometheus配置告警规则（如CPU>80%、接口错误率>1%）",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},'groups:\n  - name: instance-alerts\n    rules:\n      - alert: HighCPUUsage\n        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "高CPU告警"\n          description: "{{ $labels.instance }} CPU使用率高于80%"\n'))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Alertmanager配置邮件、钉钉、微信、短信等告警通知")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"步骤五日志监控elkefk"},"步骤五：日志监控（ELK/EFK）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Filebeat/Fluentd"),"：采集应用/系统日志"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Logstash"),"：日志清洗、格式化、转发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Elasticsearch"),"：日志存储与检索"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Kibana"),"：日志可视化与检索"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型流程：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"[Filebeat/Fluentd] → [Logstash] → [Elasticsearch] → [Kibana]\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置日志关键字、异常、慢查询等自动告警")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-云平台监控配置以阿里云为例"},"4. 云平台监控配置（以阿里云为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云主机、RDS、Redis、SLB等云资源自动接入云监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"控制台一键开启资源、应用、业务、日志、APM等监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置自定义告警规则、自动伸缩、自动修复"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持API/SDK自动化集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-实践建议"},"5. 实践建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控体系需覆盖基础资源、应用、数据库、中间件、日志、业务、安全等全链路"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键指标建议多维度（实时+历史+趋势）监控，异常自动告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志与指标联动，便于故障定位与追溯"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐开源+云平台结合，满足不同规模和场景需求")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"按上述步骤搭建和配置，可实现企业级后端监控体系，保障系统稳定与业务可观测。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"调用链路追踪apmtracing"},"调用链路追踪（APM/Tracing）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-原理与作用"},"1. 原理与作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"调用链路追踪（Distributed Tracing）用于记录一次请求在分布式系统中经过的所有服务、节点、方法、数据库等的调用路径、耗时、状态。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'解决微服务、异步、消息队列等复杂架构下"请求去哪了、慢在哪、错在哪"的问题。'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型指标：TraceID、SpanID、服务名、方法名、耗时、状态码、异常、上下游依赖等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-监控内容"},"2. 监控内容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"全链路请求路径、每一跳的耗时与状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"慢请求、异常请求定位"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"服务依赖关系、拓扑图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务瓶颈、热点服务分析")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-主流开源与云平台方案"},"3. 主流开源与云平台方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"开源APM/Tracing"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Jaeger"),"（CNCF）：Uber开源，支持OpenTracing、Prometheus、K8s等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Zipkin"),"：Twitter开源，轻量易用，生态丰富"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SkyWalking"),"：国产APM，支持多语言、服务/数据库/缓存/消息队列全链路"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"OpenTelemetry"),"：CNCF标准，统一Tracing/Metrics/Logs，支持多语言"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云平台APM"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"阿里云ARMS、腾讯云APM、华为云应用性能管理、AWS X-Ray、Azure Application Insights、Datadog APM、New Relic等")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-nodejs与java集成示例"},"4. Node.js与Java集成示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"nodejs以opentelemetryjaeger为例"},"Node.js（以OpenTelemetry+Jaeger为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 安装依赖：npm install @opentelemetry/api @opentelemetry/sdk-node @opentelemetry/exporter-jaeger\nconst { NodeSDK } = require('@opentelemetry/sdk-node');\nconst { JaegerExporter } = require('@opentelemetry/exporter-jaeger');\nconst sdk = new NodeSDK({\n  traceExporter: new JaegerExporter({ endpoint: 'http://jaeger:14268/api/traces' })\n});\nsdk.start();\n// 业务代码自动注入TraceID/SpanID\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"java以spring-boot--skywalking为例"},"Java（以Spring Boot + SkyWalking为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"引入SkyWalking Agent（无需改代码）",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sh"},"java -javaagent:/opt/skywalking/agent/skywalking-agent.jar -Dskywalking.agent.service_name=order-service -jar app.jar\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Spring Cloud、Dubbo、gRPC等主流框架自动集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-最佳实践"},"5. 最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一TraceID贯穿全链路（HTTP头、MQ消息、日志等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采样率合理配置，兼顾性能与可观测性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合日志、指标联动，快速定位问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注慢请求、异常、依赖瓶颈，定期优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐开源APM与云平台APM结合，满足不同规模和合规需求")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"调用链路追踪是现代微服务、分布式系统可观测性的核心能力，强烈建议在生产环境全量接入。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/ccfos/nightingale",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/ccfos/nightingale")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/后端监控",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/mysql-doc.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/mysql高可用",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs下mysql微服务架构设计详解"},"Node.js下MySQL微服务架构设计详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-架构总览"},"1. 架构总览"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每个微服务独立数据库（Database per Service），服务间通过API/MQ通信，避免直接跨库操作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采用主从（主备）架构，主库负责写，从库负责读，提升读性能和高可用。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持分库分表、读写分离、分布式事务等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-主从数据库设计"},"2. 主从数据库设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主库（Master）"),"：负责所有写操作（INSERT/UPDATE/DELETE）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"从库（Slave/Replica）"),"：负责读操作（SELECT），通过主从复制机制同步主库数据。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"读写分离"),"：应用层或中间件根据SQL类型路由到主库或从库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"高可用"),"：主库故障时可自动切换到从库（如MHA、Orchestrator、ProxySQL等）。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"架构示意图"},"架构示意图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre"},"[Node.js服务] --写--\x3e [MySQL主库] --同步--\x3e [MySQL从库]\n         |--读-----------------------\x3e|\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-nodejs读写分离配置示例sequelize"},"3. Node.js读写分离配置示例（Sequelize）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const { Sequelize } = require('sequelize');\nconst sequelize = new Sequelize('db', 'user', 'pwd', {\n  replication: {\n    read: [\n      { host: 'slave1', username: 'user', password: 'pwd' },\n      { host: 'slave2', username: 'user', password: 'pwd' }\n    ],\n    write: { host: 'master', username: 'user', password: 'pwd' }\n  },\n  pool: { max: 20, min: 2 }\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-高并发高可用设计要点"},"4. 高并发高可用设计要点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"连接池"),"：合理配置连接池，提升并发处理能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分库分表"),"：大表/高并发场景可按业务分库分表，降低单库压力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"读写分离"),"：读多写少场景下，读请求分摊到多个从库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主从切换"),"：自动故障转移，保障服务连续性。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"中间件"),"：可用ProxySQL、Atlas等数据库中间件实现读写分离、负载均衡。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"分布式ID"),"：避免自增主键冲突，推荐雪花算法、UUID等。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"幂等与重试"),"：高并发下接口需幂等，失败自动重试。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-数据同步失败的应对措施监控代码配置多层面详解"},"5. 数据同步失败的应对措施（监控、代码、配置多层面详解）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-监控与告警"},"1. 监控与告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据库层监控"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置Prometheus + mysqld_exporter，采集主从延迟（Seconds_Behind_Master）、复制状态等指标。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Grafana可视化主从延迟、复制中断等告警。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键SQL：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sql"},"SHOW SLAVE STATUS\\G\n-- 关注 Seconds_Behind_Master、Last_IO_Error、Last_SQL_Error 等字段\n"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化告警脚本"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定时任务检测主从延迟，超阈值时自动发邮件/钉钉/微信告警。",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\ndelay=$(mysql -e "SHOW SLAVE STATUS\\G" | grep Seconds_Behind_Master | awk \'{print $2}\')\nif [ "$delay" -gt 10 ]; then\n  curl -X POST ... # 发送告警\nfi\n')))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-代码层处理"},"2. 代码层处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"读写路由降级"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Node.js应用检测到从库延迟/异常时，自动将读请求切换到主库。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"伪代码：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"async function safeRead(query) {\n  const delay = await getSlaveDelay();\n  if (delay > 10) {\n    // 读主库\n    return masterDb.query(query);\n  } else {\n    // 读从库\n    return slaveDb.query(query);\n  }\n}\n"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据版本校验"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"读写时带上数据版本号/时间戳，发现数据过旧时自动重试或提示用户。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"幂等与重试"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"写操作失败时自动重试，保证幂等性，避免重复写入。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-配置层处理"},"3. 配置层处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"MySQL主从复制配置"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"slave_net_timeout"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"master_connect_retry"),"等参数优化，提升断链自动重连能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"read_only=1")," 配置从库只读，防止误写。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"连接池配置"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Node.js ORM（如Sequelize）合理配置连接池参数，提升高并发下的稳定性。",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"const sequelize = new Sequelize('db', 'user', 'pwd', {\n  pool: { max: 20, min: 2, acquire: 30000, idle: 10000 }\n});\n"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"中间件配置"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ProxySQL/Atlas等中间件可自动检测主从状态，自动切换读写路由。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-自动修复与补偿"},"4. 自动修复与补偿"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动重建从库"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"运维脚本定期校验主从一致性，发现严重不一致时自动重建。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据校验与同步"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用pt-table-checksum、pt-table-sync等工具定期校验和同步主从数据。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"手动补偿"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过mysqldump全量导出主库，恢复到从库，再用binlog补齐增量。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-业务容错与最终一致性"},"5. 业务容错与最终一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"降级与提示"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务层检测到数据不一致时，降级处理或提示用户稍后重试。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"补偿任务队列"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键写操作失败时，记录补偿任务，后续自动重试或人工介入。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"监控、代码、配置、自动修复、业务容错需协同配合，才能保障MySQL主从架构下高可用和数据一致性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-典型nodejs微服务目录结构"},"6. 典型Node.js微服务目录结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-plaintext"},"order-service/\n├── src/\n│   ├── order.controller.js\n│   ├── order.service.js\n│   └── db.js\nuser-service/\n├── src/\n│   ├── user.controller.js\n│   ├── user.service.js\n│   └── db.js\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"7-代码片段高可用写入与幂等处理"},"7. 代码片段：高可用写入与幂等处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 幂等写入示例\nasync function createOrder(orderId, data) {\n  const [order, created] = await Order.findOrCreate({ where: { orderId }, defaults: data });\n  if (!created) {\n    // 已存在，幂等返回\n    return order;\n  }\n  return order;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"8-主表与子表同步失败的应对方案详细说明"},"8. 主表与子表同步失败的应对方案（详细说明）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1-场景与常见原因"},"1. 场景与常见原因"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主表（如订单表）写入成功，但子表（如订单明细、日志、状态表）同步失败"),"。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"常见原因：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"主表和子表分布在不同库/分片，网络/事务/复制异常导致部分写入失败。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务代码未做分布式事务，主表写成功但子表写失败。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"主从延迟/断链，主表数据已同步，从库子表未及时同步。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2-自动监控手段"},"2. 自动监控手段"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据一致性校验"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定期用脚本/工具比对主表与子表的关联数据（如订单有无明细、状态等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"工具：pt-table-checksum、定制SQL脚本、数据校验平台。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"业务层监控"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键写操作后，业务代码主动校验主表与子表数据是否齐全，发现异常自动上报。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"告警系统"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控主表与子表数据量差异、异常写入日志，自动触发告警。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3-自动修复与补偿"},"3. 自动修复与补偿"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"补偿任务队列"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键写操作失败时，将失败的子表写入操作记录到补偿队列（如MQ、任务表），后续自动重试。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码示例：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"async function createOrderWithDetail(order, detail) {\n  const t = await sequelize.transaction();\n  try {\n    const orderRes = await Order.create(order, { transaction: t });\n    try {\n      await OrderDetail.create(detail, { transaction: t });\n      await t.commit();\n    } catch (e) {\n      // 子表写失败，记录补偿任务\n      await CompensationTask.create({ type: 'order_detail', data: detail });\n      await t.commit(); // 主表已写，保证幂等\n    }\n  } catch (e) {\n    await t.rollback();\n    throw e;\n  }\n}\n"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"定时自动补偿脚本"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定时扫描补偿任务表，自动重试写入子表，成功后标记完成。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据修复脚本"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定期比对主表与子表，发现缺失数据自动补齐。",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-sql"},"-- 查找主表有但子表无的订单\nSELECT o.id FROM orders o LEFT JOIN order_detail d ON o.id = d.order_id WHERE d.id IS NULL;\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可用脚本自动补写缺失的子表数据。")))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4-业务容错与最终一致性"},"4. 业务容错与最终一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"读操作降级"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'查询订单时发现明细缺失，可提示用户"数据处理中"，后台自动补偿。'))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最终一致性"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"允许短暂不一致，通过补偿、重试、定期校验等手段，最终保证主表与子表数据一致。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"5-运维与平台化实践"},"5. 运维与平台化实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"平台化监控"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据平台/运维平台可自动监控主子表一致性，异常自动修复或推送工单。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化运维工具"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合Prometheus、定时任务、补偿服务，实现全链路自动监控与修复。")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"主子表同步失败不可避免，需监控、补偿、自动修复、业务容错多管齐下，保障数据最终一致性和用户体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"MySQL主从+读写分离+分库分表+幂等重试，是Node.js高并发高可用微服务架构的核心实践。同步失败需监控、自动修复与业务容错多管齐下。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/mysql高可用",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/nodejs.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_node_mvc_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/node-mvc.png"),_assets_node_mvc_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_node_mvc_png__WEBPACK_IMPORTED_MODULE_7__),_assets_mvc_flow_png__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./stories/assets/mvc-flow.png"),_assets_mvc_flow_png__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_assets_mvc_flow_png__WEBPACK_IMPORTED_MODULE_8__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/nodejs",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs-mvc-架构"},"nodejs mvc 架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"本文以前端视角介绍如何构建后端系统，如何设计系统。混沌工程化提供了koa-mvc架构模版项目。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1项目下载"},"1、项目下载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"11-cli下载"},"1.1 CLI下载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"http://hundun.site/?path=/docs/hundun-%E8%84%9A%E6%89%8B%E6%9E%B6-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B--page",target:"_blank",rel:"nofollow noopener noreferrer"},"快速开始"),"\n之后选择 【基于node-koa以及mysql的mvc服务端项目】项目模版即可"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"12-github下载"},"1.2 GitHub　下载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"也可以去github下载 链接：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://github.com/1623311678/koa-mvc",target:"_blank",rel:"nofollow noopener noreferrer"},"https://github.com/1623311678/koa-mvc")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2目录介绍"},"2、目录介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\nroot\n  |-client // 前端示例代码\n  |-package.json //\n  |-src // nodejs后端核心代码\n    |--constant // 常量\n    |--constroller // 控制层\n            |--asset.js //资产模块\n            |--user.js //用户模块\n    |--db // 数据库相关\n        |--api // 模型操作逻辑\n            |--asset.js // 资产模块CRUD\n            |--user.js // 用户模块CRUD\n        |--models // 数据库模型\n            |--asset.js // 资产模型，查询携带用户模型\n            |--user.js // 用户模型，查询携带用户资产\n        |--dbConn.js // 数据库连接脚本\n        |--syncTable.js // 同步表结构\n    |-middleware // 中间件\n        |--logger.js // 调用记录\n        |--verifyToken.js // token验证\n    |--app.js // 入口\n    |--router.js //路由\n\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3准备工作"},"3、准备工作"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"mysql的安装，推荐docker安装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4项目启动"},"4、项目启动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"41-服务启动"},"4.1 服务启动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"根目录下执行"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"# 安装依赖\n\nnpm install \n\n# 先同步数据库\nnpm run sync\n\n# 然后再启动服务\n\nnpm start\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"42-前端启动"},"4.2 前端启动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"进入client目录下，依次执行"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"\n# 安装依赖\n\nnpm install \n\n# 启动前端服务\n\nnpm start\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"43-结果展示"},"4.3 结果展示"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_node_mvc_png__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"mvcPng",style:{width:1080,height:500}}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-系统架构设计"},"5 系统架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{src:_assets_mvc_flow_png__WEBPACK_IMPORTED_MODULE_8___default.a,alt:"mvcFlowPng",style:{width:1080,height:500}}))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/nodejs",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/serve/server.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"服务端"},"服务端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"服务端常见技术java，go等，但是对前端来水，nodejs无疑是进入服务端领域的捷径。这只是语言层面，还有对应的配套技术，如mysql，mq，redis、kafka，es等，AI元年的到来，让我们更容易获得知识。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/sf/concurrent.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/常见算法与数据结构/并发控制的promise实现",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"并发控制的promise实现"},"并发控制的promise实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-基本概念"},"1. 基本概念"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Promise"),"：异步编程的一种解决方案，可以避免回调地狱，使代码更清晰。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"并发控制"),"：在多个异步任务同时执行时，控制它们的执行顺序和数量，避免资源浪费和竞争条件。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-实现思路"},"2. 实现思路"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"21-函数版本"},"2.1 函数版本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\nasync function concurrentReq(urls, count) {\n  let index = 0\n  let results = new Array(urls.length)\n  let finished = 0\n\n  return new Promise((resolve, reject) => {\n    function next() {\n      if (index >= urls.length) return\n      const cur = index++\n      fetch(urls[cur])\n        .then((data) => {\n          results[cur] = { status: 'success', data }\n        })\n        .catch((err) => {\n          results[cur] = { status: 'error', data: err }\n        })\n        .finally(() => {\n          finished++\n          if (index < urls.length) {\n            next()\n          }\n          if (finished === urls.length) {\n            resolve(results)\n          }\n        })\n    }\n    // 启动 count 个并发\n    for (let i = 0; i < Math.min(count, urls.length); i++) {\n      next()\n    }\n  })\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"22-class版本1"},"2.2 Class版本1"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\n/* @source cursor @line_count 54  @branch feature/athena/wjk/hemlet-order-imp */\nclass RequestPool {\n  constructor(limit = 5) {\n    this.limit = limit;           // 最大并发数\n    this.running = 0;             // 当前正在执行的任务数\n    this.queue = [];              // 等待队列\n    this.results = [];            // 结果收集\n    this.index = 0;               // 当前任务索引\n    this.finished = 0;            // 已完成任务数\n    this.total = 0;               // 总任务数\n    this._resolve = null;         // 外部resolve\n  }\n\n  addTask(task) {\n    // task: () => Promise\n    this.queue.push(task);\n    this.total++;\n  }\n\n  runTask() {\n    return new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      // 启动limit个并发\n      for (let i = 0; i < Math.min(this.limit, this.queue.length); i++) {\n        this._next();\n      }\n    });\n  }\n\n  _next() {\n    if (this.index >= this.queue.length) return;\n    const curIndex = this.index++;\n    this.running++;\n    this.queue[curIndex]()\n      .then((data) => {\n        this.results[curIndex] = { status: 'success', data };\n      })\n      .catch((err) => {\n        this.results[curIndex] = { status: 'error', data: err };\n      })\n      .finally(() => {\n        this.running--;\n        this.finished++;\n        if (this.index < this.queue.length) {\n          this._next();\n        }\n        if (this.finished === this.total && this._resolve) {\n          this._resolve(this.results);\n        }\n      });\n  }\n}\n\n// 用法示例\n// const pool = new RequestPool(3);\n// urls.forEach(url => pool.addTask(() => fetch(url)));\n// pool.runTask().then(res => console.log(res));\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"23-class版本2"},"2.3 Class版本2"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\n\nclass ConcurrentController {\n  constructor(maxRunningNum = 3) {\n    this.queue = []; // 任务队列\n    this.runningNum = 0; // 当前运行的任务数量\n    this.maxRunningNum = maxRunningNum; // 最大并发任务数量\n    this.results = []; // 存储任务结果\n  }\n\n  addTask(task) {\n    this.queue.push(task);\n    this.run();\n  }\n\n  run() {\n    // 判断是否可以启动新的任务\n    if (this.runningNum < this.maxRunningNum && this.queue.length > 0) {\n      this.runningNum++;\n      const currentTaskIndex = this.results.length; // 当前任务索引\n      const task = this.queue.shift();\n\n      task()\n        .then((result) => {\n          // 处理任务结果\n          console.log(`Task ${currentTaskIndex + 1} completed with result:`, result);\n          this.results[currentTaskIndex] = { status: 'fulfilled', value: result };\n        })\n        .catch((error) => {\n          // 处理任务中的错误\n          console.error(`Task ${currentTaskIndex + 1} failed with error:`, error);\n          this.results[currentTaskIndex] = { status: 'rejected', reason: error };\n        })\n        .finally(() => {\n          this.runningNum--;\n          this.run(); // 尝试启动下一个任务\n        });\n    }\n  }\n\n  getResults() {\n    return this.results;\n  }\n}\n\n// 示例使用\nconst controller = new ConcurrentController(3);\n\nfunction createTask(id, time, shouldFail = false) {\n  return () => new Promise((resolve, reject) => {\n    console.log(`Task ${id} started`);\n    setTimeout(() => {\n      if (shouldFail) {\n        reject(`Task ${id} error`);\n      } else {\n        resolve(`Task ${id} result`);\n      }\n    }, time);\n  });\n}\n\n// 添加任务\ncontroller.addTask(createTask(1, 1000));\ncontroller.addTask(createTask(2, 500));\ncontroller.addTask(createTask(3, 300, true)); // 此任务将失败\ncontroller.addTask(createTask(4, 400));\ncontroller.addTask(createTask(5, 600));\n\n// 等待所有任务完成后获取结果\nsetTimeout(() => {\n  console.log('All tasks completed. Results:', controller.getResults());\n}, 2000);\n\n\n\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/常见算法与数据结构/并发控制的promise实现",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/sf/event-bus.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/常见算法与数据结构/发布订阅&观察者模式",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"发布订阅模式-vs-观察者模式"},"发布订阅模式 vs 观察者模式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"一核心区别"},"一、核心区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"发布订阅模式（Publish/Subscribe）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"观察者模式（Observer）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"依赖关系"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"发布者与订阅者之间无直接依赖，通过第三方调度中心（事件总线）解耦"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"观察者与被观察者直接关联，被观察者维护观察者列表")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"通信方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"通过事件中心/消息中间件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"直接回调通知")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂系统、跨模块、异步解耦"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"简单对象间、同步通知")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"典型实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"EventBus、消息队列（MQ）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"DOM事件、数据绑定")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"发布订阅模式"),"：发布者和订阅者都不知道对方的存在，事件中心负责消息分发。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"观察者模式"),"：被观察者直接持有观察者引用，状态变更时主动通知。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"二原理图"},"二、原理图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{parentName:"p",src:"../assets/mvc-flow.png",alt:"MVC事件流"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"三代码实现与例子"},"三、代码实现与例子"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-观察者模式observer-pattern"},"1. 观察者模式（Observer Pattern）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 被观察者（Subject）\nclass Subject {\n  constructor() {\n    this.observers = [];\n  }\n  addObserver(observer) {\n    this.observers.push(observer);\n  }\n  removeObserver(observer) {\n    this.observers = this.observers.filter(obs => obs !== observer);\n  }\n  notify(data) {\n    this.observers.forEach(observer => observer.update(data));\n  }\n}\n// 观察者（Observer）\nclass Observer {\n  constructor(name) {\n    this.name = name;\n  }\n  update(data) {\n    console.log(`${this.name} received:`, data);\n  }\n}\n// 用法\nconst subject = new Subject();\nconst obs1 = new Observer('A');\nconst obs2 = new Observer('B');\nsubject.addObserver(obs1);\nsubject.addObserver(obs2);\nsubject.notify('Hello Observers!');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-发布订阅模式publishsubscribe-pattern"},"2. 发布订阅模式（Publish/Subscribe Pattern）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// 事件总线（EventBus）\nclass EventBus {\n  constructor() {\n    this.events = {};\n  }\n  subscribe(event, handler) {\n    if (!this.events[event]) this.events[event] = [];\n    this.events[event].push(handler);\n  }\n  unsubscribe(event, handler) {\n    if (!this.events[event]) return;\n    this.events[event] = this.events[event].filter(h => h !== handler);\n  }\n  publish(event, data) {\n    if (!this.events[event]) return;\n    this.events[event].forEach(handler => handler(data));\n  }\n}\n// 用法\nconst bus = new EventBus();\nfunction handler1(data) { console.log('handler1:', data); }\nfunction handler2(data) { console.log('handler2:', data); }\nbus.subscribe('test', handler1);\nbus.subscribe('test', handler2);\nbus.publish('test', 'Hello EventBus!');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"四应用场景对比"},"四、应用场景对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"观察者模式"),"：适合对象间一对多、同步、强关联场景，如UI组件、数据绑定。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"发布订阅模式"),"：适合模块解耦、异步、跨系统通信，如前端全局事件、微服务消息总线、MQ等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"五总结"},"五、总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"发布订阅模式更适合复杂、解耦、异步场景。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"观察者模式适合简单、同步、对象间直接通信。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"实际开发中，EventBus、消息队列等都是发布订阅模式的工程化实现。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/常见算法与数据结构/发布订阅&观察者模式",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/BS-CS.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/BS或CS架构",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"现代高可用bs与cs架构的区别"},"现代高可用B/S与C/S架构的区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-架构定义"},"1. 架构定义"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"B/S（Browser/Server）架构"),"：基于浏览器和服务器，用户通过浏览器访问Web应用，前端页面+后端服务，典型如现代Web系统。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"C/S（Client/Server）架构"),"：基于专用客户端和服务器，用户需安装客户端程序，客户端与服务器直接通信，典型如传统桌面软件、企业ERP、IM等。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-前后端分工与技术栈"},"2. 前后端分工与技术栈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"前端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"后端"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"B/S"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"HTML/CSS/JS/SPA/Vue/React/Angular"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web API/RESTful/GraphQL/Java/Node.js/Python")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"C/S"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"专用客户端（C++/Java/.NET/Qt等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"专用协议服务/Socket/RPC/数据库")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"B/S前后端分离"),"：前端负责UI与交互，后端提供API，前后端独立开发、部署、扩展。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"C/S前后端耦合"),"：客户端与服务端协议紧密绑定，升级需同步，兼容性要求高。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-部署与运维"},"3. 部署与运维"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"B/S"),"：服务端统一部署，前端用户无需安装，浏览器即用，易于升级与维护，支持弹性扩容与高可用（如多副本、负载均衡、CDN等）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"C/S"),"：客户端需分发与安装，升级复杂，服务端可集中部署但需兼容多版本客户端，运维成本高。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-优缺点对比"},"4. 优缺点对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"维度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"B/S"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"C/S"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"用户体验"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"依赖浏览器，跨平台，响应速度略慢"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"原生体验好，性能高，可深度集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"部署维护"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"易于统一升级，低运维"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"客户端需分发升级，兼容性难")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"扩展性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"易于横向扩展，云原生友好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"扩展性一般，升级需全链路配合")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"安全性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"依赖Web安全机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"可实现更强本地安全策略")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"典型场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web系统、SaaS、移动Web"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"金融、IM、桌面软件、工业控制")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-现代web前后端分离模式"},"5. 现代Web前后端分离模式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端：SPA（React/Vue/Angular）、静态资源CDN分发、PWA、移动端H5"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"后端：RESTful API、GraphQL、微服务、Serverless"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：开发效率高、部署灵活、弹性扩展、易于接入多端（Web/小程序/APP）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-总结与选型建议"},"6. 总结与选型建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"互联网/企业信息化优先B/S，易于维护与扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"对原生性能、深度集成、离线能力要求高的场景可选C/S"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"现代高可用架构推荐B/S+前后端分离+云原生部署，结合CDN、负载均衡、自动化运维，提升可用性与效率")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"B/S与C/S架构各有优势，选型需结合业务需求、用户体验与运维能力综合考量。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"现代cs架构小程序一码多端与动态化"},"现代C/S架构：小程序、一码多端与动态化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-现代cs架构的演进"},"1. 现代C/S架构的演进"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"传统C/S：专用客户端+服务端，升级分发难，平台适配复杂"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'现代C/S：以小程序、App壳、H5容器等为代表，支持"一码多端"、动态化、热更新，极大提升了灵活性与可维护性')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-小程序与一码多端"},"2. 小程序与一码多端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"小程序"),"：如微信/支付宝/抖音/百度小程序，运行在超级App容器内，开发者只需一套代码，平台自动适配多端（iOS/Android/桌面/车机等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"一码多端"),"：基于统一技术栈（如Taro、uni-app、Flutter、React Native等），一套代码可编译/运行于Web、App、小程序、快应用等多端，极大提升开发效率与一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"动态化"),"：支持远程下发页面/业务逻辑，热更新，无需用户手动升级")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-技术实现原理"},"3. 技术实现原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序/多端框架将业务代码编译为各平台支持的中间代码（如JS Bundle、WXML、Swan等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"容器负责渲染、API适配、权限管理，保障安全与性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"动态化通过远程配置、代码分包、热更新等机制实现")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-与传统cs的区别"},"4. 与传统C/S的区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"维度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"传统C/S"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"现代C/S（小程序/多端）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"客户端形态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"专用App/桌面程序"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"超级App容器/多端适配")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"升级方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"手动下载安装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"动态下发/热更新/自动适配")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"适配能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"单一/多套代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"一码多端/统一技术栈")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"运维效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"低，升级慢"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高，自动化、弹性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"典型场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"金融、ERP、IM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"电商、O2O、内容、IoT、SaaS")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-高可用与最佳实践"},"5. 高可用与最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前端：小程序/多端代码分包、CDN分发、动态下发、灰度发布、A/B测试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"后端：API网关、微服务、弹性伸缩、服务发现、统一鉴权"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"运维：自动化CI/CD、监控告警、远程配置、热修复"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"安全：容器沙箱、权限隔离、数据加密、风控防刷")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-典型架构图"},"6. 典型架构图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  User[用户] --\x3e SuperApp[超级App/小程序容器]\n  SuperApp --\x3e|JS Bundle/配置| CDN[CDN/远程下发]\n  SuperApp --\x3e|API请求| API[API网关/后端服务]\n  API --\x3e Service[微服务/数据库/存储]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"现代C/S架构以小程序和多端技术为代表，兼具原生体验与Web灵活性，适合高频迭代、跨端一致、动态化需求强的业务场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"小程序多端技术的跨平台方案"},"小程序/多端技术的跨平台方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-跨平台目标与挑战"},"1. 跨平台目标与挑战"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一套代码，适配Web（PC/H5）、移动App、各类小程序（微信/支付宝/抖音等）、快应用等多端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"挑战：平台API差异、UI适配、性能优化、生态兼容、动态化需求")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-主流跨平台技术选型"},"2. 主流跨平台技术选型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"技术方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"支持端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"原理/特点"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Taro"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web/H5/小程序/快应用/React Native"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React语法，编译为各端代码，生态丰富")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web/H5/小程序/快应用/App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Vue语法，编译多端，插件生态好")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Flutter"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"iOS/Android/Web/桌面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"跨平台原生渲染，性能优，UI一致")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React Native"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"iOS/Android"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JS+原生桥接，适合高性能App")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Electron"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"PC桌面应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web技术打包桌面，适合工具类")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"H5+容器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web/H5/移动端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"纯Web，适配性强，原生能力有限")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-技术原理与架构"},"3. 技术原理与架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"框架将业务代码编译/转换为各端支持的代码（如WXML、Swan、H5、原生组件等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"公共业务逻辑/组件复用，平台差异通过适配层/条件编译/平台API封装解决"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"动态化：远程下发页面/配置，支持热更新与灰度发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-优缺点对比-1"},"4. 优缺点对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"优点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"局限"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Taro/uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态好，支持多端，开发效率高"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂原生能力需自定义扩展")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Flutter"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能优，UI一致，体验好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"小程序/Web兼容性有限")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React Native"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"性能高，原生扩展强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"仅限App，生态不如小程序")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Electron"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"桌面开发快，Web生态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"包体大，性能一般")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"H5"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"适配快，易接入"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"原生能力弱，体验略逊")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-典型架构图"},"5. 典型架构图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  Dev[统一业务代码] --\x3e Build[多端编译/适配层]\n  Build --\x3e|H5| Web[Web/PC/H5]\n  Build --\x3e|小程序| Mini[微信/支付宝/抖音等]\n  Build --\x3e|App| App[iOS/Android]\n  Build --\x3e|桌面| Desktop[Electron/桌面]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-最佳实践与建议"},"6. 最佳实践与建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"选型优先Taro/uni-app等主流多端框架，提升开发效率与一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"公共组件/业务逻辑最大化复用，平台差异通过适配层/条件编译解决"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"动态化下发、灰度发布、A/B测试，提升灵活性与可维护性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合CI/CD自动化构建与多端发布，保障交付效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注性能优化与平台兼容性，关键场景可用原生能力补充")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"小程序/多端技术已成为企业级跨平台开发主流方案，建议结合业务需求、团队技术栈与目标平台综合选型。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/BS或CS架构",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/aliyun-dev.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/云开发架构设计",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考阿里云yun开发",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://developer.aliyun.com/ebook/6836/read?spm=a2c6h.26392459.ebook-detail.2.15467df3tarkfo",target:"_blank",rel:"nofollow noopener noreferrer"},"https://developer.aliyun.com/ebook/6836/read?spm=a2c6h.26392459.ebook-detail.2.15467df3tarkfo")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"阿里云原生服务平台 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://help.aliyun.com/zh/cap/?spm=a2c4g.11186623.0.0.74c4144962g5BZ",target:"_blank",rel:"nofollow noopener noreferrer"},"https://help.aliyun.com/zh/cap/?spm=a2c4g.11186623.0.0.74c4144962g5BZ")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"基于阿里云的云开发高可用方案"},"基于阿里云的云开发高可用方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-方案概述"},"1. 方案概述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采用阿里云Serverless（函数计算FC、Serverless应用引擎SAE、云开发平台等）实现弹性、高可用、免运维的轻量级后端架构。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合API服务、Webhook、定时任务、轻量Web后端、事件驱动等场景。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-架构设计与核心产品"},"2. 架构设计与核心产品"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"函数计算FC"),"：按需弹性伸缩，自动容灾，支持Java/Node.js/Golang等多语言，事件驱动（HTTP、定时、消息、对象存储等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Serverless应用引擎SAE"),"：支持Spring Boot、Node.js、Golang等Web框架，自动弹性、秒级扩缩容、无状态服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云开发平台"),"：一站式Serverless开发，集成数据库、存储、鉴权、API网关等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"API网关"),"：统一入口，流量管理、鉴权、限流、监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云数据库RDS/表格存储OTS/云存储OSS"),"：持久化存储"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志服务SLS/ARMS"),"：全链路监控、日志采集、告警")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-高可用与弹性设计"},"3. 高可用与弹性设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多可用区部署，平台自动容灾"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"按请求/事件弹性伸缩，无需预置资源，极致性价比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"无状态服务，支持秒级扩缩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"平台自动健康检查、故障自愈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合API网关/SLB实现多入口高可用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-监控与安全"},"4. 监控与安全"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SLS/ARMS采集函数/应用日志、调用链、异常、性能指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"API网关/SAE支持限流、鉴权、IP白名单、WAF防护"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云数据库/存储支持多副本、自动备份、权限隔离")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-典型serverless函数用例"},"5. 典型Serverless函数用例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"java函数计算fc"},"Java（函数计算FC）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'package example;\nimport com.aliyun.fc.runtime.Context;\nimport com.aliyun.fc.runtime.StreamRequestHandler;\nimport java.io.*;\npublic class Handler implements StreamRequestHandler {\n    @Override\n    public void handleRequest(InputStream input, OutputStream output, Context context) throws IOException {\n        output.write("Hello from Java FC!".getBytes());\n    }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"nodejs函数计算fc"},"Node.js（函数计算FC）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// index.js\nexports.handler = async (event, context) => {\n  return 'Hello from Node.js FC!';\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"golang函数计算fc"},"Golang（函数计算FC）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-go"},'package main\nimport (\n    "context"\n    "github.com/aliyun/fc-runtime-go-sdk/fc"\n)\nfunc HandleRequest(ctx context.Context, event []byte) (string, error) {\n    return "Hello from Golang FC!", nil\n}\nfunc main() {\n    fc.Start(HandleRequest)\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-最佳实践与建议"},"6. 最佳实践与建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务无状态，函数/应用可随时弹性扩缩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合API网关统一入口，支持多协议、鉴权、限流"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志、监控、告警全链路覆盖，快速定位与恢复故障"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合云数据库/存储实现持久化与高可用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"充分利用Serverless平台自动弹性、免运维、按量计费优势")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"阿里云Serverless云开发方案适合轻量级、高弹性、免运维场景，支持多语言，极大提升开发与运维效率。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/云开发架构设计",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/aliyun.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/基于阿里云的高可用架构设计",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"基于阿里云的高可用架构设计"},"基于阿里云的高可用架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-架构设计目标"},"1. 架构设计目标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"高可用：消除单点，自动容灾，故障自愈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"高并发：弹性扩容，流量削峰，异步解耦"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"高性能：全链路优化，缓存加速，负载均衡")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-典型高可用架构总览"},"2. 典型高可用架构总览"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  User[用户] --\x3e CDN[CDN加速]\n  CDN --\x3e SLB[负载均衡SLB]\n  SLB --\x3e ECS1[ECS/容器服务]\n  SLB --\x3e ECS2[ECS/容器服务]\n  ECS1 & ECS2 --\x3e RDS[云数据库RDS]\n  ECS1 & ECS2 --\x3e Redis[云Redis]\n  ECS1 & ECS2 --\x3e MQ[消息队列RocketMQ]\n  ECS1 & ECS2 --\x3e OSS[对象存储OSS]\n  ECS1 & ECS2 --\x3e SLS[日志服务SLS]\n  ECS1 & ECS2 --\x3e ARMS[监控ARMS]\n  ECS1 & ECS2 --\x3e API[API网关]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-核心云产品选型与作用"},"3. 核心云产品选型与作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"CDN"),"：静态资源全网加速，防止源站压力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SLB（负载均衡）"),"：L4/L7流量分发，自动健康检查，弹性扩容，消除单点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ECS/ACK（云服务器/容器服务K8s）"),"：弹性计算，支持多语言（Java/Node.js等），支持自动伸缩（ESS）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RDS/PolarDB"),"：高可用数据库，主从/多可用区，读写分离，自动备份"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Redis/数据库缓存"),"：高性能缓存，主从/集群，自动故障切换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息队列（RocketMQ/MQ）"),"：异步解耦，削峰填谷，事务消息"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"OSS"),"：对象存储，静态资源、备份、归档"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"SLS（日志服务）/ARMS（监控）"),"：全链路监控、日志采集、告警、APM"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"API网关"),"：统一入口，流量管理、鉴权、限流、监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"WAF/安全组/堡垒机"),"：安全防护，DDoS防护，访问控制")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-弹性与容灾设计"},"4. 弹性与容灾设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多可用区部署，SLB自动分发，ECS/ACK多实例，RDS主备，Redis集群，MQ多副本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动弹性伸缩（ESS），按需扩容/缩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"健康检查与自动剔除故障节点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据多副本、自动备份、异地容灾"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"灰度发布、蓝绿部署，降低变更风险")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-监控日志与安全"},"5. 监控、日志与安全"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"ARMS/APM：应用性能监控，调用链追踪，异常告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"SLS：日志采集、检索、实时告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云监控：资源、流量、数据库、缓存等全栈监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WAF/安全组：防护DDoS、SQL注入、XSS等攻击"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"堡垒机：运维安全审计")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-前后端高可用方案"},"6. 前后端高可用方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"前端"),"：OSS+CDN多云多CDN分发，DNS智能切换，静态资源多版本回滚，ARMS前端监控，自动告警与切流"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"后端"),"：多副本部署，SLB负载均衡，微服务拆分，API网关统一入口，消息队列削峰解耦，数据库/缓存/存储高可用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-最佳实践与建议"},"7. 最佳实践与建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"充分利用阿里云托管服务，减少自运维压力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关键服务多可用区、主备、集群部署，消除单点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务无状态化，支持弹性扩容与自动恢复"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合消息队列、缓存、CDN等提升并发与性能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"全链路监控、日志、告警，快速定位与恢复故障"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定期演练容灾、备份恢复、流量切换，提升韧性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"基于阿里云的高可用架构，建议优先用云原生托管服务，结合多副本、弹性、监控与安全，打造高并发、高可用、高性能的现代系统。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/基于阿里云的高可用架构设计",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/k8s.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/基于阿里云的k8s自动扩容架构",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"基于阿里云的k8s自动扩容架构"},"基于阿里云的k8s自动扩容架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://kubernetes.io/zh-cn/docs/home/supported-doc-versions/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://kubernetes.io/zh-cn/docs/home/supported-doc-versions/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"nodejs服务在k8s上的部署与自动扩容全流程以阿里云主机为例"},"Node.js服务在K8s上的部署与自动扩容全流程（以阿里云主机为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-环境准备"},"1. 环境准备"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一台或多台阿里云ECS主机，推荐CentOS/Ubuntu，已开放必要端口（如6443、30000-32767等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"安装Docker、Kubernetes（可用kubeadm/k3s/ACK等）、kubectl"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可选：使用阿里云ACK托管K8s，省去集群搭建")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"关键命令"},"关键命令"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 安装Docker\ncurl -fsSL https://get.docker.com | bash\n# 安装kubectl\ncurl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\nchmod +x ./kubectl && mv ./kubectl /usr/local/bin/\n# 安装kubeadm/kubelet（如自建K8s）\nyum install -y kubelet kubeadm kubectl\nsystemctl enable kubelet && systemctl start kubelet\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-构建nodejs服务镜像"},"2. 构建Node.js服务镜像"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"编写Dockerfile")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-dockerfile"},'FROM node:18-alpine\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install --production\nCOPY . .\nEXPOSE 3000\nCMD ["node", "app.js"]\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"构建并推送镜像（以阿里云镜像仓库为例）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 登录阿里云镜像仓库\ndocker login --username=xxx registry.cn-hangzhou.aliyuncs.com\n# 构建镜像\ndocker build -t registry.cn-hangzhou.aliyuncs.com/yourrepo/node-demo:latest .\n# 推送镜像\ndocker push registry.cn-hangzhou.aliyuncs.com/yourrepo/node-demo:latest\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-编写k8s部署yaml"},"3. 编写K8s部署YAML"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"deploymentyaml"},"deployment.yaml"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: node-demo\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: node-demo\n  template:\n    metadata:\n      labels:\n        app: node-demo\n    spec:\n      containers:\n      - name: node-demo\n        image: registry.cn-hangzhou.aliyuncs.com/yourrepo/node-demo:latest\n        ports:\n        - containerPort: 3000\n        env:\n        - name: NODE_ENV\n          value: "production"\n        resources:\n          requests:\n            cpu: 100m\n            memory: 128Mi\n          limits:\n            cpu: 500m\n            memory: 512Mi\n        livenessProbe:\n          httpGet:\n            path: /healthz\n            port: 3000\n          initialDelaySeconds: 10\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /healthz\n            port: 3000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n        volumeMounts:\n        imagePullSecrets:\n      # volumes:\n      # - name: config\n      #   configMap:\n      #     name: myapp-config\n      # - name: aliyun-registry\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"serviceyaml"},"service.yaml"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Service\nmetadata:\n  name: node-demo-svc\nspec:\n  type: NodePort\n  selector:\n    app: node-demo\n  ports:\n  - port: 80\n    targetPort: 3000\n    nodePort: 30080\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-部署到k8s"},"4. 部署到K8s"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f deployment.yaml\nkubectl apply -f service.yaml\nkubectl get pods,svc\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ECS公网IP:30080"),"访问服务")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-配置自动扩容hpa"},"5. 配置自动扩容（HPA）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"开启K8s Metrics Server（用于采集Pod资源指标）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"创建HPA自动扩容配置")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: node-demo-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: node-demo\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 60\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f hpa.yaml\nkubectl get hpa\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"当CPU利用率超过60%，Pod会自动扩容，低于阈值自动缩容")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-进阶与最佳实践"},"6. 进阶与最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置Ingress+SLB实现公网高可用访问"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置ConfigMap/Secret管理环境变量与敏感信息"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志采集接入SLS，监控接入ARMS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合CI/CD自动化发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"deploymentyaml-配置详解"},"deployment.yaml 配置详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Kubernetes Deployment 用于声明式管理无状态服务的副本、升级、回滚等。以下是典型 Node.js 服务 deployment.yaml 的详细字段说明："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: apps/v1           # API版本，生产建议用apps/v1\nkind: Deployment              # 资源类型\nmetadata:\n  name: node-demo             # Deployment名称\n  labels:\n    app: node-demo            # 标签，便于选择器和管理\nspec:\n  replicas: 2                 # 副本数，Pod数量，结合HPA可自动扩缩容\n  selector:\n    matchLabels:\n      app: node-demo          # 选择器，匹配Pod标签\n  template:\n    metadata:\n      labels:\n        app: node-demo        # Pod标签，需与selector一致\n    spec:\n      containers:\n      - name: node-demo       # 容器名称\n        image: registry.cn-hangzhou.aliyuncs.com/yourrepo/node-demo:latest # 镜像地址\n        ports:\n        - containerPort: 3000 # 容器对外暴露端口\n        env:                  # 环境变量（如有）\n        - name: NODE_ENV\n          value: "production"\n        resources:            # 资源请求与限制，便于调度与弹性扩容\n          requests:\n            cpu: 100m         # 最小CPU\n            memory: 128Mi     # 最小内存\n          limits:\n            cpu: 500m         # 最大CPU\n            memory: 512Mi     # 最大内存\n        livenessProbe:        # 存活探针，自动重启异常Pod\n          httpGet:\n            path: /healthz\n            port: 3000\n          initialDelaySeconds: 10\n          periodSeconds: 10\n        readinessProbe:       # 就绪探针，流量只转发给健康Pod\n          httpGet:\n            path: /healthz\n            port: 3000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n        volumeMounts:         # 挂载卷（如有）\n        # - name: config\n        #   mountPath: /app/config\n      # volumes:              # 卷定义（如有）\n      # - name: config\n      #   configMap:\n      #     name: myapp-config\n      imagePullSecrets:       # 私有仓库拉取镜像凭证（如有）\n      # - name: aliyun-registry\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"主要字段说明"},"主要字段说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"replicas"),"：Pod副本数，结合HPA可弹性伸缩"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"selector/template.metadata.labels"),"：Pod选择与分组依据，需一致"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"containers.image"),"：镜像地址，建议用CI/CD自动推送"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"resources"),"：合理设置可防止资源争抢，利于自动扩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"livenessProbe/readinessProbe"),"：健康检查，提升高可用性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"env/volumeMounts/volumes"),"：环境变量、配置挂载，便于多环境部署"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"imagePullSecrets"),"：私有镜像仓库需配置")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"最佳实践"},"最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置健康探针，避免流量打到未就绪/异常Pod"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"合理设置资源请求/限制，防止资源耗尽或浪费"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合ConfigMap/Secret管理配置与敏感信息"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"镜像版本号建议用CI自动生成，避免latest带来的不可控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合HPA实现自动弹性扩缩容")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"deployment.yaml 是K8s无状态服务的核心声明文件，建议结合实际业务需求灵活配置。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"以上流程适用于阿里云ECS自建K8s或ACK托管K8s，Node.js服务可实现弹性伸缩与高可用部署。遇到问题可参考",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://kubernetes.io/zh-cn/docs/home/supported-doc-versions/",target:"_blank",rel:"nofollow noopener noreferrer"},"官方文档"),"或阿里云ACK文档。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"serviceyaml-配置详解"},"service.yaml 配置详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Kubernetes Service 用于为一组Pod提供稳定的网络访问入口，实现服务发现与负载均衡。以下是典型 Node.js 服务 service.yaml 的详细字段说明："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1                # API版本\nkind: Service                 # 资源类型\nmetadata:\n  name: node-demo-svc         # Service名称\n  labels:\n    app: node-demo            # 标签，便于管理\nspec:\n  type: NodePort              # Service类型（ClusterIP/NodePort/LoadBalancer）\n  selector:\n    app: node-demo            # 选择器，关联Pod标签\n  ports:\n  - port: 80                  # Service暴露端口（集群内访问）\n    targetPort: 3000          # Pod容器端口\n    nodePort: 30080           # 节点端口（仅NodePort/LoadBalancer类型）\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"主要字段说明-1"},"主要字段说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"type"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ClusterIP"),"（默认）：仅集群内可访问，适合服务间调用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"NodePort"),"：集群每个节点开放端口，外部可通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"节点IP:nodePort"),"访问"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"LoadBalancer"),"：云平台自动分配公网负载均衡IP（如阿里云SLB），推荐生产环境"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"selector"),"：根据标签选择关联的Pod，需与Deployment一致"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ports.port"),"：Service对外暴露的端口（如80）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ports.targetPort"),"：Pod容器实际监听端口（如3000）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ports.nodePort"),"：节点端口，范围30000-32767，外部访问用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"最佳实践-1"},"最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生产环境推荐用",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"LoadBalancer"),"类型，结合云SLB实现高可用公网访问"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"内部服务间调用用",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"ClusterIP"),"，无需暴露外网"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端口命名规范，便于多端口服务管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"selector与Deployment保持一致，确保流量正确路由"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合Ingress实现基于域名的七层路由")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"进阶用法"},"进阶用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多端口、多协议（TCP/UDP）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可结合ExternalName、Headless Service实现服务发现/直连")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"service.yaml 是K8s服务暴露与发现的核心声明文件，建议结合实际访问需求灵活配置。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"hpahorizontalpodautoscaler自动扩容配置详解"},"HPA（HorizontalPodAutoscaler）自动扩容配置详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Kubernetes HPA（水平自动扩缩容）可根据Pod的CPU、内存或自定义指标，自动调整Deployment/StatefulSet的副本数，实现弹性伸缩。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"典型hpa配置示例"},"典型HPA配置示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: node-demo-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: node-demo\n  minReplicas: 2           # 最小副本数，低于此不会缩容\n  maxReplicas: 10          # 最大副本数，超过此不会再扩容\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 60  # 目标CPU利用率（百分比）\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"主要字段说明-2"},"主要字段说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"minReplicas"),"：最小Pod副本数，保证基础容量（如2）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"maxReplicas"),"：最大Pod副本数，扩容上限（如10），防止资源耗尽或费用失控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"metrics"),"：扩缩容依据，可选CPU、内存、或自定义指标（如QPS、队列长度等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"averageUtilization"),"：目标利用率，超出则扩容，低于则缩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"scaleTargetRef"),"：关联的Deployment/StatefulSet等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"扩容原理"},"扩容原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"K8s Metrics Server采集Pod资源指标，HPA控制器定期（默认30秒）评估是否需要扩/缩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"若平均CPU利用率>目标值，自动增加Pod副本，直至maxReplicas"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"若低于目标值，自动减少Pod副本，直至minReplicas")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"最佳实践-2"},"最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"maxReplicas建议结合节点资源、业务峰值合理设置，防止过度扩容导致节点资源耗尽"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"minReplicas建议≥2，保证高可用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生产环境建议监控HPA行为，防止频繁扩缩容（可调节cooldown参数）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可结合多指标（如CPU+自定义QPS）实现更智能的弹性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务需无状态，Pod可随时扩缩")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"常见问题"},"常见问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"HPA依赖Metrics Server，需提前部署并保证可用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"若Pod资源requests/limits未设置，HPA无法正确评估"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"maxReplicas受限于集群节点总资源，需结合节点数规划")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"HPA是K8s弹性伸缩的核心机制，合理配置minReplicas/maxReplicas和指标阈值，可实现高可用、高性价比的自动扩容。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"容器副本数与节点资源关系总结"},"容器副本数与节点资源关系总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-replicas-含义"},"1. replicas 含义"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"replicas")," 表示期望同时运行的 Pod（容器组）数量，K8s 会自动调度这些 Pod 到集群内的节点（虚拟机）上。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"每个 Pod 通常运行一个主业务容器（如 Node.js），也可包含 sidecar。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-一台虚拟机能运行多少容器"},"2. 一台虚拟机能运行多少容器？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"取决于节点（虚拟机）的 CPU、内存等资源，以及每个 Pod 的 requests/limits 配置。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"计算公式"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"最大容器数 = min(节点总CPU / Pod单个CPU requests, 节点总内存 / Pod单个内存 requests)"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"举例"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"节点资源：4核8G"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Pod requests: 0.5核1G"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"最大容器数 = min(4/0.5=8, 8/1=8) ⇒ 理论最多8个Pod"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"实际部署建议预留系统和K8s组件资源，实际可用6-7个Pod"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"若只有一台虚拟机，所有Pod都调度在这台机器上，",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"不建议生产只用一台"),"，否则高可用性无法保障。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-阿里云k8sack是什么"},"3. 阿里云K8s（ACK）是什么？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"ACK（Alibaba Cloud Container Service for Kubernetes）")," 是阿里云提供的托管Kubernetes服务。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优势"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一键创建高可用K8s集群，免去手动搭建和运维"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持弹性伸缩、自动修复、云原生生态集成（SLB、RDS、OSS、ARMS等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与阿里云安全、监控、网络、存储等产品深度集成"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"适合生产环境、企业级高可用、弹性、自动化场景"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"使用方式"),"：可在阿里云控制台直接创建ACK集群，支持ECS虚拟机、弹性裸金属、Serverless等多种节点类型")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-总结建议"},"4. 总结建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"replicas")," 控制Pod总数，K8s自动分布到节点上"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"单节点可容纳Pod数=节点资源/Pod requests，实际部署需预留系统资源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生产建议多节点+合理资源配置+HPA弹性扩容，保障高可用与资源利用率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"推荐使用阿里云ACK托管K8s，省心高可用，易于与云产品集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"合理设置replicas和资源requests/limits，结合ACK托管K8s，可实现高可用、弹性、自动化的现代云原生架构。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/基于阿里云的k8s自动扩容架构",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/moden.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/高可用架构设计",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"现代高可用架构设计"},"现代高可用架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://developer.aliyun.com/article/1529204",target:"_blank",rel:"nofollow noopener noreferrer"},"https://developer.aliyun.com/article/1529204")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://blog.csdn.net/icansoicrazy/article/details/133977354",target:"_blank",rel:"nofollow noopener noreferrer"},"https://blog.csdn.net/icansoicrazy/article/details/133977354")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/613497280",target:"_blank",rel:"nofollow noopener noreferrer"},"https://zhuanlan.zhihu.com/p/613497280")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/2383075",target:"_blank",rel:"nofollow noopener noreferrer"},"https://cloud.tencent.com/developer/article/2383075")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"业界服务架构演进全景"},"业界服务架构演进全景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-单体架构与idc时代"},"1. 单体架构与IDC时代"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特征"),"：物理机部署，单体应用，集中式数据库，手工运维，扩容靠加机器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：开发简单，部署慢，扩展性差，单点故障，资源利用率低"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：早期互联网、电商、企业内部系统")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-虚拟化与云计算iaas"},"2. 虚拟化与云计算（IaaS）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特征"),"：物理机虚拟化为VM，弹性分配资源，自动化运维，云主机（ECS）、对象存储（OSS）等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：资源利用率提升，弹性扩容，自动化部署，仍需手动运维，应用多为单体"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代表方案"),"：VMware、OpenStack、阿里云ECS、AWS EC2")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-微服务架构"},"3. 微服务架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特征"),"：应用拆分为多个小服务，独立部署、扩展、运维，服务间通过API/RPC通信"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：开发效率高，技术栈多样，易于扩展与容错，分布式复杂性提升，运维难度大"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代表方案"),"：Spring Cloud、Dubbo、gRPC、Kubernetes微服务编排"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：大型互联网、金融、SaaS平台")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-容器化与云原生"},"4. 容器化与云原生"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特征"),"：应用打包为容器（Docker），Kubernetes编排，声明式基础设施，自动弹性伸缩、服务发现、灰度发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：极致弹性、自动化、跨云迁移，DevOps友好，学习曲线高，生态复杂"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代表方案"),"：Docker、Kubernetes、Istio、Helm、Prometheus"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：新一代互联网、云厂商PaaS、AI/大数据平台")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-serverless无服务器架构"},"5. Serverless（无服务器架构）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"特征"),"：开发者只需关注业务代码，按需弹性伸缩，自动运维，事件驱动，极致弹性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"优缺点"),"：无需关心底层资源，极致弹性与成本优化，冷启动、状态管理、调试复杂"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"代表方案"),"：AWS Lambda、阿里云函数计算、腾讯云SCF、Knative、OpenFaaS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"典型场景"),"：API网关、定时任务、IoT、AI推理、弹性Web服务")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-总结与趋势"},"6. 总结与趋势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"架构演进驱动力：业务复杂度、弹性需求、运维自动化、成本优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"云原生与Serverless是未来主流，微服务与容器化为基础设施，AI与边缘计算持续推动新范式")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"服务架构的每一次演进，都是为了解决更高的弹性、效率与自动化需求。建议结合业务规模、团队能力与云平台生态，选择最适合的架构模式。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"基于云原生的高可用架构设计方案"},"基于云原生的高可用架构设计方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-架构设计原则"},"1. 架构设计原则"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"无状态优先，易于横向扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化部署与弹性伸缩"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"容错与自愈，单点最小化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控、告警、自动修复"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"基础设施即代码（IaC）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-关键技术选型"},"2. 关键技术选型"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"容器化"),"：Docker，所有服务（前后端、网关、任务等）容器化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"编排与调度"),"：Kubernetes（K8s），自动部署、弹性伸缩、服务发现、滚动升级"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务网格"),"：Istio/Linkerd，流量治理、熔断、灰度发布、可观测性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"CI/CD"),"：Jenkins/GitHub Actions/ArgoCD，自动化构建、测试、部署"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置中心"),"：K8s ConfigMap/Secret、Apollo/Nacos"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"监控与日志"),"：Prometheus+Grafana、ELK/EFK、Jaeger/Zipkin"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"云平台能力"),"：阿里云ACK、腾讯云TKE、AWS EKS等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-前端高可用方案"},"3. 前端高可用方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"静态资源托管"),"：OSS/S3+CDN，前端构建产物自动上传，全球加速"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多活部署"),"：多区域CDN、DNS智能解析，自动切流"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"前端容器化"),"：SSR/Node渲染服务容器化，K8s弹性伸缩"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"健康检查与回源"),"：CDN健康检查，自动回源，防止单点")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-后端高可用方案"},"4. 后端高可用方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多副本部署"),"：K8s Deployment副本数>2，Pod自动分布多节点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"服务发现与负载均衡"),"：K8s Service+Ingress，自动流量分发，结合云SLB"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"数据库高可用"),"：云RDS主从/多可用区，读写分离，自动故障切换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"缓存高可用"),"：Redis Cluster/Sentinel，自动主备切换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"消息队列高可用"),"：Kafka/RabbitMQ集群，分区与副本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"配置热更新"),"：配置中心+K8s热加载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动弹性伸缩"),"：HPA/VPA，按流量自动扩缩容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"无状态服务"),"：Session存Redis/Token，Pod随时可重建")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-基础设施与运维"},"5. 基础设施与运维"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"IaC"),"：Terraform/CloudFormation，自动化资源编排"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"自动化运维"),"：K8s Operator、ArgoCD、自动修复脚本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"全链路监控"),"：Prometheus监控K8s、服务、数据库，Grafana可视化，Alertmanager告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"日志采集"),"：EFK/ELK，日志统一采集、检索、告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"链路追踪"),"：Jaeger/Zipkin，服务间调用追踪"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"混沌工程"),"：Chaos Mesh/Gremlin，主动注入故障验证高可用性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-典型云原生高可用架构图"},"6. 典型云原生高可用架构图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  CDN[CDN/OSS/S3] --\x3e |静态资源| FE[前端Pod]\n  FE --\x3e |API请求| Ingress[Ingress/SLB]\n  Ingress --\x3e BE[后端Pod多副本]\n  BE --\x3e DB[云RDS/分布式数据库]\n  BE --\x3e MQ[Kafka/RabbitMQ集群]\n  BE --\x3e Redis[Redis Cluster]\n  BE --\x3e |监控/日志| Prometheus\n  BE --\x3e |链路追踪| Jaeger\n  Prometheus --\x3e Grafana\n  DB --\x3e |主从| DBSlave[只读实例]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"7-最佳实践与建议"},"7. 最佳实践与建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端、数据库、缓存、MQ等全链路多副本、分区、主备，消除单点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化CI/CD与IaC，提升交付效率与一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"健康检查、自动弹性、故障自愈，提升可用性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控、日志、追踪全覆盖，快速定位与恢复故障"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合云平台托管能力与自建K8s，灵活应对不同规模")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"云原生高可用架构需全链路自动化、弹性、可观测，建议优先用云平台托管能力，结合K8s与服务网格，打造弹性、可靠、可扩展的现代系统。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"前端静态资源容灾方案"},"前端静态资源容灾方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-多云多cdn分发"},"1. 多云多CDN分发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"静态资源同步部署到多家云存储（如阿里云OSS、腾讯云COS、AWS S3等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置多家CDN（阿里云CDN、腾讯云CDN、Cloudflare、Akamai等）分发同一资源，提升全球可用性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源URL支持多CDN前缀，前端可动态切换")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-dns智能解析与健康检查"},"2. DNS智能解析与健康检查"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用DNS服务（如阿里云云解析、DNSPod、Cloudflare DNS）配置多条CNAME，指向不同CDN"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"启用健康检查，自动剔除故障CDN节点，实现秒级切换"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持权重分配，主备或多活流量分担")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-自动回源与多级缓存"},"3. 自动回源与多级缓存"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"CDN配置回源到多云存储，主源故障自动回源到备源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"CDN多级缓存，边缘节点失效自动回源上一级，提升容灾能力")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-版本管理与回滚"},"4. 版本管理与回滚"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"静态资源采用内容哈希命名，支持多版本共存"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"发现CDN/存储异常时，快速切换到历史稳定版本")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-监控与自动告警"},"5. 监控与自动告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置CDN、云存储、DNS的可用性监控（如Ping、HTTP探测、CDN命中率等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"异常自动告警，触发切流或回滚脚本"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合APM/前端埋点，监控用户静态资源加载成功率")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-企业级最佳实践"},"6. 企业级最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多云多CDN+DNS智能切换，消除单点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化同步与发布脚本，保障多云一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控、告警、切流、回滚全链路自动化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定期演练容灾切换，确保方案有效")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"前端静态资源容灾的核心是多云多CDN、智能切换与自动化监控，建议企业级项目务必全链路演练，保障极端情况下的可用性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"前端静态资源容灾实战脚本配置与云平台操作指引"},"前端静态资源容灾实战：脚本、配置与云平台操作指引"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-自动化多云同步脚本osss3为例"},"1. 自动化多云同步脚本（OSS+S3为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 假设已配置好OSSUtil和AWS CLI\n# 构建产物目录为 ./dist\n# 上传到阿里云OSS\nossutil cp -r ./dist oss://your-oss-bucket/ --update\n# 上传到AWS S3\naws s3 sync ./dist s3://your-s3-bucket/ --delete\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-cdn多源配置示例以阿里云cdn为例"},"2. CDN多源配置示例（以阿里云CDN为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'登录阿里云CDN控制台，添加域名，源站类型选择"对象存储"，可配置主源（OSS）和备源（S3/COS等）'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置回源策略：主源不可用时自动回源到备源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多级缓存、回源Host自定义")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-dns智能切换配置以阿里云云解析为例"},"3. DNS智能切换配置（以阿里云云解析为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"添加CNAME记录，分别指向不同CDN加速域名"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置健康检查（HTTP/HTTPS探测），异常自动切换到可用CDN"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可设置权重，实现主备或多活流量分担")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-版本回滚与多cdn前缀切换前端代码示例"},"4. 版本回滚与多CDN前缀切换（前端代码示例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// 支持多CDN前缀，自动切换\nconst cdnList = [\n  'https://cdn1.example.com/',\n  'https://cdn2.example.com/',\n  'https://cdn3.example.com/'\n];\nfunction loadStaticResource(path) {\n  for (let cdn of cdnList) {\n    const url = cdn + path;\n    // 可用fetch/ping等方式检测可用性\n    // 如检测到可用即返回\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-监控与自动告警以阿里云为例"},"5. 监控与自动告警（以阿里云为例）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},'CDN控制台开启"可用性监控"，配置告警规则（如命中率、回源失败、带宽异常等）'),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"OSS/S3开启对象存储访问监控，异常自动告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可结合云监控（CloudMonitor）、钉钉/企业微信/短信等多渠道通知")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"6-企业级自动化发布与切流脚本伪代码"},"6. 企业级自动化发布与切流脚本（伪代码）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"# 自动同步、检测、切流\nossutil cp -r ./dist oss://your-oss-bucket/ --update\naws s3 sync ./dist s3://your-s3-bucket/ --delete\n# 检查CDN健康，异常时自动修改DNS权重或CNAME指向\n# 可用阿里云OpenAPI/SDK自动化操作\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"7-阿里云全链路操作指引"},"7. 阿里云全链路操作指引"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"OSS创建静态资源Bucket，配置跨域、读权限"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"CDN添加加速域名，源站选OSS，配置主备源、回源策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"云解析DNS添加CNAME，配置健康检查与权重"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"配置CDN/OSS监控与自动告警"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"前端构建产物自动上传OSS（可用CI/CD流水线集成）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"定期演练切流与回滚，确保容灾方案有效")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"结合自动化脚本、云平台配置与监控告警，可实现企业级前端静态资源多云多CDN容灾，极大提升可用性与韧性。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"oss与cdn的区别与协同"},"OSS与CDN的区别与协同"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1-定义与作用"},"1. 定义与作用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"OSS（对象存储）"),"：Object Storage Service，云端海量文件存储服务，适合存储图片、音视频、静态资源、备份等，支持高可用、持久化、权限管理。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"CDN（内容分发网络）"),"：Content Delivery Network，将内容缓存到全球各地的边缘节点，用户就近访问，提升访问速度和并发能力，降低源站压力。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2-核心区别"},"2. 核心区别"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"维度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"OSS（对象存储）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"CDN（内容分发网络）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"主要功能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"存储与管理文件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"分发与加速内容")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"访问入口"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"云存储服务域名/接口"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"边缘节点分发域名")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"访问速度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"取决于存储地与用户距离"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"用户就近节点，极快")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"计费方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"存储容量+流量"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"带宽/流量+请求数")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"持久化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"高持久化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"非持久化，缓存失效后回源")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"权限控制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"精细化（Bucket、对象）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"一般无，依赖源站")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"典型场景"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"静态资源、备份、归档"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"网站加速、下载分发、直播等")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"3-协同用法"},"3. 协同用法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型模式：静态资源先上传到OSS，CDN以OSS为源站进行全网加速，用户优先从CDN边缘节点获取，未命中时回源OSS。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"优势：兼具高可用存储与极速分发，降低源站压力，提升用户体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"4-场景举例"},"4. 场景举例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"图片/视频/前端静态资源：OSS存储，CDN加速分发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"大文件下载：OSS存储，CDN分发，断点续传"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"直播/点播：CDN边缘节点实时分发，源站为OSS或流媒体服务器")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},'总结：OSS负责"存"，CDN负责"快"，两者结合是现代互联网内容分发的最佳实践。')))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/高可用架构设计",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/monitor-sdk.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/监控sdk如何设计",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"监控sdk设计全流程详解"},"监控SDK设计全流程详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"监控SDK是现代高可用系统的基础设施，负责采集、上报、分析应用运行过程中的各类数据。一个优秀的监控SDK应具备高可用、易接入、低侵入、跨端、可扩展等特性。以下为详细设计流程："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-需求分析与架构设计"},"1. 需求分析与架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"明确监控目标（前端/后端/移动/小程序/IoT等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多端（Web、Node.js、iOS、Android、小程序等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采集范围：性能、错误、行为、API、资源、日志、业务等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"设计可插拔、模块化架构，便于扩展与裁剪"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"兼容主流框架（React/Vue/Angular/Flutter/原生等）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-sdk开发"},"2. SDK开发"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"采集层：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能监控（FP、FCP、LCP、TTFB、白屏、卡顿、内存等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"错误监控（JS异常、Promise、资源加载、API失败、Native崩溃等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"行为监控（点击、路由、页面停留、表单、埋点等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"网络监控（XHR/Fetch、API耗时、失败率、慢接口等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源监控（图片、脚本、样式、第三方依赖等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志采集（自定义日志、业务日志、调试日志等）"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"上报层：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持批量、实时、延迟、离线重传等多种上报策略"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多协议（HTTP、HTTPS、gRPC、WebSocket等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据压缩与加密，保障传输安全"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"配置与扩展：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持动态配置、远程开关、灰度发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"插件机制，便于业务自定义扩展"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"性能与安全：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"低侵入、低开销、异步采集与上报"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"隐私合规（脱敏、加密、用户授权）")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-跨端与兼容性设计"},"3. 跨端与兼容性设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Web端：兼容主流浏览器，支持SPA/MPA"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"移动端：原生SDK（iOS/Android）、Flutter/React Native等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序：微信/支付宝/字节等平台SDK"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Node.js/服务端：进程、接口、资源、异常等监控"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一数据模型与上报协议，便于多端聚合分析")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-接入与应用"},"4. 接入与应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供简洁API与自动化埋点能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持无侵入/低侵入接入（如自动注入、装饰器、AOP等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"丰富文档、Demo、接入指引、错误码说明"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持灰度/分组/多实例接入"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"提供可视化配置平台，便于业务方自助管理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-上线与运维"},"5. 上线与运维"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持版本管理、灰度发布、回滚机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控SDK自身健康（初始化、上报、异常等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志与告警，便于问题追踪与定位"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"兼容主流CI/CD流程，自动化测试与发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-数据上报与采集"},"6. 数据上报与采集"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一数据格式（如JSON、Protobuf等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持批量、实时、离线、断点续传等多种上报方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据脱敏、加密、压缩，保障安全与合规"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持自定义事件与业务埋点")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-数据分析与可视化"},"7. 数据分析与可视化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"后端数据聚合、清洗、存储（如Kafka、ES、ClickHouse等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"实时/离线分析，支持多维度查询与聚合"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可视化大屏（如Grafana、Kibana、DataV等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持自定义报表、告警、趋势分析、根因定位"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"与APM、日志、埋点、BI等系统集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-业内最佳实践与案例"},"8. 业内最佳实践与案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"字节跳动、阿里、腾讯等均采用模块化、插件化、跨端统一的监控SDK"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持自动化埋点、全链路追踪、灰度发布、动态配置"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"监控SDK与APM、日志、埋点、告警平台深度集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"p"},"总结："),"\n一个现代监控SDK应具备："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"跨端、模块化、低侵入、易扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多种采集与上报策略，保障数据完整与安全"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"丰富的接入文档与可视化平台，便于业务方自助接入与管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"强大的后端分析与可视化能力，助力业务健康与高可用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"持续演进，适应新技术与业务场景变化")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/监控sdk如何设计",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/mp-client.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/基于小程序的一码多端架构设计",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"基于小程序的一码多端架构设计"},"基于小程序的一码多端架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-设计目标与挑战"},"1. 设计目标与挑战"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一套代码，适配微信/支付宝/百度/抖音/QQ/快应用/H5/APP等多端小程序"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"降低开发/维护成本，提升一致性与交付效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"兼容各平台API、组件、路由、生命周期等差异")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-业界主流开源方案对比"},"2. 业界主流开源方案对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"技术栈/语法"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"支持端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"生态/代表厂商"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"优势"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"局限"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Vue2/Vue3"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信/支付宝/百度/抖音/QQ/快应用/H5/APP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"DCloud、阿里、腾讯"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态丰富，插件多，官方云打包"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"复杂原生能力需自定义")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Taro"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React/Vue/Nerv"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信/支付宝/百度/字节/QQ/快应用/H5/APP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"京东、携程、字节跳动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"多端支持，React友好"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态略逊于uni-app")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Remax"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信/支付宝/百度/字节/QQ/H5"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"蚂蚁金服、字节跳动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"纯React语法，组件化强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态较小，文档偏技术向")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"mpx"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"类Vue"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信/支付宝/百度/字节/QQ/H5"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"美团"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"响应式、增强小程序能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态有限")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"mini-program-build"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JSX/TS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信/支付宝/百度/字节/H5"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"京东"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"现代工程化，TS支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"生态有限")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"NutUI"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Vue3/React"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"微信/支付宝/百度/字节/H5/APP"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"京东"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"组件库丰富，UI一致"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"仅UI层，需配合主框架")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-方案原理与技术架构"},"3. 方案原理与技术架构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一业务代码（Vue/React/TS等），通过编译/适配层转换为各端小程序代码（WXML、WXSS、JSON、JS等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"公共业务逻辑/组件最大化复用，平台差异通过条件编译/适配器/polyfill解决"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多端路由、生命周期、API、组件、事件等统一封装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"动态化：部分方案支持远程下发页面/配置，热更新、灰度发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-典型方案详解与代码示例"},"4. 典型方案详解与代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"41-uni-app"},"4.1 uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术栈：Vue2/Vue3，支持TypeScript"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <view>\n    <text>{{ msg }}</text>\n    <button @click=\"goDetail\">跳转</button>\n  </view>\n</template>\n<script>\nexport default {\n  data() { return { msg: 'Hello uni-app!' } },\n  methods: {\n    goDetail() { uni.navigateTo({ url: '/pages/detail/detail' }) }\n  }\n}\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态：插件市场、云打包、uniCloud、uView、NutUI等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"企业案例：阿里、腾讯、京东、支付宝、抖音等大厂小程序/H5/APP项目")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"42-taro"},"4.2 Taro"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术栈：React/Vue/Nerv/TS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import Taro from '@tarojs/taro';\nimport { View, Button } from '@tarojs/components';\nexport default function Home() {\n  const goDetail = () => Taro.navigateTo({ url: '/pages/detail/index' });\n  return (\n    <View>\n      Hello Taro!\n      <Button onClick={goDetail}>跳转</Button>\n    </View>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态：Taro UI、NutUI、Taro Cloud、丰富的插件"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"企业案例：京东、携程、字节跳动、B站等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"43-remax"},"4.3 Remax"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术栈：React/TS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { View, Text } from 'remax/one';\nexport default () => <View><Text>Hello Remax!</Text></View>;\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态：Remax Antd、Remax Ali、Remax Wechat"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"企业案例：蚂蚁金服、字节跳动、B站等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"44-mpx"},"4.4 mpx"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术栈：类Vue/TS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// mpx页面\nimport { createPage } from '@mpxjs/core';\ncreatePage({\n  data: { msg: 'Hello mpx!' },\n  methods: {\n    goDetail() { this.$router.push('/pages/detail') }\n  }\n});\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态：美团、mpt-ui、mpx-cloud"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"企业案例：美团、快手等")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"45-mini-program-build"},"4.5 mini-program-build"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术栈：JSX/TS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"export default () => <view>Hello mini-program-build!</view>;\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态：京东、现代工程化工具链")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"46-nutui"},"4.6 NutUI"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"技术栈：Vue3/React，UI组件库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <nut-button type="primary">主要按钮</nut-button>\n</template>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"生态：Taro/uni-app/小程序/H5/APP均可用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-路由api组件适配"},"5. 路由、API、组件适配"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由：各方案均提供统一路由API（如uni.navigateTo、Taro.navigateTo、Remax的usePageEvent等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"API：统一API封装，底层适配各端（如uni.request、Taro.request、Remax API等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件：跨端组件库（NutUI、uView、Taro UI等），支持多端一致UI"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"条件编译：支持",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"#ifdef MP-WEIXIN"),"等多端差异处理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-动态化与灰度发布"},"6. 动态化与灰度发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"uni-app、Taro等支持远程下发页面/配置，热更新、A/B测试、灰度发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持云函数/Serverless，弹性扩展")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-企业级最佳实践"},"7. 企业级最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"选型优先生态成熟、文档完善、社区活跃的方案（如uni-app、Taro）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"公共业务逻辑/组件最大化复用，平台差异通过适配层/条件编译解决"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API、路由、组件库，提升多端一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合CI/CD自动化多端构建与发布，保障交付效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注性能优化与平台兼容性，关键场景可用原生能力补充"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"动态化、灰度、A/B测试提升灵活性与可维护性")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"基于小程序的一码多端架构已成为企业级多端开发主流，建议结合业务需求、团队技术栈与目标平台综合选型，充分利用开源生态与工程化能力，打造高可用、可扩展的多端产品。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/基于小程序的一码多端架构设计",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/mp-h5-imp.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/小程序-H5性能优化方案",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"小程序h5-性能优化方案"},"小程序/H5 性能优化方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-首屏加载优化"},"1. 首屏加载优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源预加载与懒加载，减少首屏资源体积"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"首页骨架屏/Loading占位，提升感知速度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序分包加载，H5路由懒加载（如Vue/React动态import）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"预渲染/SSR（如Next.js、Nuxt.js）提升首屏渲染速度")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-资源加载与网络优化"},"2. 资源加载与网络优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"静态资源CDN分发，OSS/云存储加速，减少跨地域延迟"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"图片WebP/AVIF等新格式，按需加载、懒加载、压缩"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"JS/CSS压缩、Tree Shaking、去除无用依赖"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序/SPA开启Gzip/Brotli压缩，HTTP2/3多路复用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"资源缓存（Service Worker、AppCache、小程序缓存API）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"DNS预解析、预连接、预获取（dns-prefetch、preconnect、prefetch、preload）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-渲染与交互优化"},"3. 渲染与交互优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"虚拟列表、长列表分片渲染，避免一次性渲染过多节点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序/SPA避免频繁setData/setState，合并更新，减少重绘"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件懒加载、按需渲染，避免全量渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用Web Worker/小程序Worker分担计算密集型任务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"合理拆分大页面为小组件，提升复用与渲染效率")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-代码分包与体积优化"},"4. 代码分包与体积优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序分包（主包+分包/独立分包），主包≤2M，分包≤2M，按需加载"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5/SPA路由懒加载、动态import，减少主包体积"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"公共依赖提取（如vendor.js），避免重复打包"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码压缩、去除console/log/debug代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用CDN外链大库（如lodash、moment）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-图片字体与多媒体优化"},"5. 图片、字体与多媒体优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"图片压缩、格式转换（WebP/AVIF），多分辨率适配"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序image组件/图片懒加载，H5用IntersectionObserver"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"雪碧图/ICONFONT/字体子集，减少HTTP请求"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"视频/音频分片加载、首帧优化、自动降码率")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-网络与数据缓存优化"},"6. 网络与数据缓存优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"接口合并/批量请求，减少HTTP请求数"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用HTTP缓存（ETag/Last-Modified）、本地缓存（localStorage、IndexedDB、小程序Storage）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"数据预取、离线包、增量更新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"异步请求并发控制，超时重试、降级兜底")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-监控与性能调优"},"7. 监控与性能调优"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"接入前端监控（如ARMS、Sentry、Fundebug、神策等），采集白屏、慢接口、JS错误、资源加载、FPS等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序/SPA开启性能面板，定期分析慢点、内存泄漏、卡顿"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"埋点首屏时间、TTI、FCP、LCP、CLS等核心指标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化性能测试（Lighthouse、PageSpeed、微信小程序助手）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-其他最佳实践"},"8. 其他最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务无关代码异步加载，首屏只加载核心功能"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"组件/页面按需注册，减少全局依赖"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注小程序/SPA平台限制（包体积、API调用频率、setData限制等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"定期分析依赖包体积，升级/替换大依赖"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合Serverless/云函数，后端预处理数据，减轻前端压力")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-企业级案例与参考资料"},"9. 企业级案例与参考资料"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"京东、阿里、腾讯、字节等大厂小程序/H5均采用分包、CDN、骨架屏、懒加载、监控等全链路优化"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"参考：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://developers.weixin.qq.com/miniprogram/dev/framework/performance/perf-guide.html",target:"_blank",rel:"nofollow noopener noreferrer"},"微信小程序性能优化官方指南")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://developer.aliyun.com/article/771857",target:"_blank",rel:"nofollow noopener noreferrer"},"阿里云前端性能优化实践")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"li",href:"https://web.dev/vitals/",target:"_blank",rel:"nofollow noopener noreferrer"},"Google Web Vitals")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"[Taro/uni-app官方优化文档]")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"小程序与H5性能优化需全链路协同，建议结合业务场景、平台特性与监控数据，持续迭代优化，提升用户体验与业务转化。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/小程序-H5性能优化方案",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/software-sys-design/mulity-client.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=(__webpack_require__("./stories/assets/node-mvc.png"),__webpack_require__("./stories/assets/mvc-flow.png"),["components"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/现代高可用软件设计/C端一码多端架构设计",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"c端一码多端架构设计"},"C端一码多端架构设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1-一码多端架构设计目标"},"1. 一码多端架构设计目标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"一套代码，适配多端（Web/H5、iOS、Android、各类小程序、快应用、桌面等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"降低开发/维护成本，提升一致性与交付效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持动态化、热更新、A/B测试、灰度发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2-业界主流方案对比"},"2. 业界主流方案对比"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("table",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("thead",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"thead"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"支持端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"技术栈/原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("th",{parentName:"tr",align:null},"生态/代表厂商"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tbody",{parentName:"table"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React Native"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"iOS/Android"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"JS+原生桥，原生渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Facebook、字节跳动")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web/H5/小程序/快应用/App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Vue语法，编译多端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"DCloud、阿里、腾讯")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Taro"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Web/H5/小程序/快应用/App"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"React语法，编译多端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"京东、携程、字节跳动")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Flutter"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"iOS/Android/Web/桌面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Dart，原生渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Google、阿里")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"阿里方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rax+MiniApp"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"Rax+多端适配器"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"阿里巴巴")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("tr",{parentName:"tbody"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"腾讯方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"TMagicEditor、TDesign、uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"多端适配/组件库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("td",{parentName:"tr",align:null},"腾讯")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"uni-app"),"：Vue语法，支持H5、App、小程序、快应用，生态丰富，插件多，DCloud/阿里/腾讯均有大规模实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"Taro"),"：React语法，支持H5、App、小程序，灵活度高，适合React团队，京东/携程/字节跳动等大厂使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"RN/Flutter"),"：适合高性能原生体验场景，部分支持Web/H5，动态化能力强"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"阿里Rax/MiniApp"),"：Rax为React风格，MiniApp多端适配，阿里系小程序/IoT/车载等广泛应用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"腾讯TMagic/uni-app"),"：TMagicEditor、TDesign等多端组件库，uni-app深度集成")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3-桥接层bridge设计"},"3. 桥接层（Bridge）设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"作用"),"：实现JS与原生/小程序/宿主环境的双向通信，屏蔽平台差异，统一API调用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"实现方式"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN/Flutter：JS/JSCore与原生通过Bridge通信，支持异步、事件、回调"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"uni-app/Taro：框架自动注入平台API，开发者通过统一API调用，底层适配各端"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"小程序/快应用：通过JSBridge/NativeBridge实现WebView与原生通信"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最佳实践"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API接口，平台差异通过适配层/条件编译处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持Promise/Callback，兼容异步/同步调用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件订阅/发布，便于消息推送、状态同步")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4-路由设计"},"4. 路由设计"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"需求"),"：多端一致的路由声明、跳转、参数传递、历史管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"主流方案"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"uni-app：内置uni.navigateTo/redirectTo等API，支持页面栈管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Taro：taro-router，支持多端路由声明与跳转"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN/Flutter：react-navigation、Navigator等，原生路由栈"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"阿里Rax：rax-app/router，支持多端路由"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最佳实践"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由声明式配置，支持嵌套路由、动态参数"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由守卫/中间件，支持鉴权、埋点、A/B测试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由与页面解耦，便于动态化与热更新")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"5-h5结合与多端渲染"},"5. H5结合与多端渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"WebView嵌套"),"：App/小程序内嵌H5页面，桥接层实现JS与原生通信"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多端渲染"),"：同一业务组件可渲染为H5、原生、Canvas等，提升复用率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"动态化"),"：远程下发H5/JS Bundle，支持热更新、灰度发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最佳实践"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"业务核心用多端框架开发，特殊场景用H5补充"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"桥接层支持H5与原生/小程序互调，提升体验"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一埋点、监控、鉴权，保障多端一致性")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"6-通讯机制"},"6. 通讯机制"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"前后端通讯"),"：统一API接口（RESTful/GraphQL），多端共用一套后端服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"端内通讯"),"：事件总线（EventBus）、全局状态管理（Vuex/Redux/MobX）、消息订阅发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"端间通讯"),"：WebSocket、MQTT、推送服务，支持实时消息、状态同步"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"最佳实践"),"：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"API接口规范化，支持多端鉴权、限流、灰度"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端内用事件/状态管理，端间用WebSocket/推送"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合云函数/Serverless，提升弹性与扩展性")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"7-典型架构图"},"7. 典型架构图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  Dev[统一业务代码] --\x3e Build[多端编译/适配层]\n  Build --\x3e|H5| Web[Web/PC/H5]\n  Build --\x3e|小程序| Mini[微信/支付宝/抖音等]\n  Build --\x3e|App| App[iOS/Android]\n  Build --\x3e|桌面| Desktop[Electron/桌面]\n  App & Mini & Web --\x3e Bridge[桥接层/统一API]\n  Bridge --\x3e Native[原生能力/平台API]\n  App & Mini & Web --\x3e Router[统一路由]\n  Router --\x3e Page[页面组件]\n  App & Mini & Web --\x3e Comm[通讯/状态管理]\n  Comm --\x3e API[后端API/推送/云函数]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"8-最佳实践与建议"},"8. 最佳实践与建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"选型优先Taro/uni-app等主流多端框架，提升开发效率与一致性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"桥接层/适配层统一API，平台差异用条件编译/适配器处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由声明式、支持守卫与动态化，便于灰度与A/B"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5与原生/小程序互通，提升体验与灵活性"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通讯机制规范化，前后端接口统一，端内/端间消息高效同步"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"结合CI/CD自动化构建与多端发布，保障交付效率"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"关注性能优化与平台兼容性，关键场景可用原生能力补充")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"一码多端是现代C端高可用架构的主流趋势，建议结合业务需求、团队技术栈与目标平台综合选型，充分利用桥接层、路由、通讯等技术实现多端一致、高效、可扩展的产品体验。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"9-主流方案落地代码与实践"},"9. 主流方案落地代码与实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"91-react-nativern"},"9.1 React Native（RN）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"组件代码示例"},"组件代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport { View, Text, Button } from 'react-native';\nexport default function Home({ navigation }) {\n  return (\n    <View>\n      <Text>Hello RN!</Text>\n      <Button title=\"Go Detail\" onPress={() => navigation.navigate('Detail')} />\n    </View>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"桥接层实现原生与js通信"},"桥接层实现（原生与JS通信）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"JS调用原生：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { NativeModules } from 'react-native';\nNativeModules.MyNativeModule.showToast('Hello from JS!');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生调用JS：通过事件分发（DeviceEventEmitter）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"路由实现"},"路由实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"使用",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"react-navigation"),"，支持多端路由栈、参数传递、守卫")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"通讯实现"},"通讯实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端：fetch/axios请求RESTful API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端内：Redux/MobX全局状态"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端间：WebSocket/推送服务")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"企业级案例"},"企业级案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"字节跳动、Facebook、滴滴等大规模RN实践，支持动态化、热更新（CodePush）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"cicd实践"},"CI/CD实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Fastlane+Jenkins/GitHub Actions自动打包、测试、发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"92-uni-app"},"9.2 uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"组件代码示例-1"},"组件代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <view>\n    <text>{{ msg }}</text>\n    <button @click=\"goDetail\">跳转</button>\n  </view>\n</template>\n<script>\nexport default {\n  data() { return { msg: 'Hello uni-app!' } },\n  methods: {\n    goDetail() { uni.navigateTo({ url: '/pages/detail/detail' }) }\n  }\n}\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"桥接层实现"},"桥接层实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API（如",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"uni.getLocation()"),"），底层自动适配各端")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"路由实现-1"},"路由实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"uni.navigateTo"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"uni.redirectTo"),"，页面栈管理")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"通讯实现-1"},"通讯实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"uni.request"),"/axios"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端内：Vuex"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端间：WebSocket/uniCloud云函数")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"企业级案例-1"},"企业级案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支付宝/微信/百度/抖音小程序、阿里/腾讯/京东等均有大规模uni-app项目")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"cicd实践-1"},"CI/CD实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"DCloud云打包、Jenkins/GitHub Actions自动化多端构建与发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"93-taro"},"9.3 Taro"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"组件代码示例-2"},"组件代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import Taro from '@tarojs/taro';\nimport { View, Button } from '@tarojs/components';\nexport default function Home() {\n  const goDetail = () => Taro.navigateTo({ url: '/pages/detail/index' });\n  return (\n    <View>\n      Hello Taro!\n      <Button onClick={goDetail}>跳转</Button>\n    </View>\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"桥接层实现-1"},"桥接层实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Taro API自动适配多端（如",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Taro.getLocation()"),"）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"路由实现-2"},"路由实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Taro.navigateTo"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"Taro.redirectTo"),"，支持多端路由")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"通讯实现-2"},"通讯实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端：Taro.request/axios"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端内：Redux/MobX"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端间：WebSocket/云开发")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"企业级案例-2"},"企业级案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"京东、携程、字节跳动等大厂多端项目")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"cicd实践-2"},"CI/CD实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Taro CLI+Jenkins/GitHub Actions自动化多端构建与发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"94-flutter"},"9.4 Flutter"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"组件代码示例-3"},"组件代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-dart"},"import 'package:flutter/material.dart';\nclass Home extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(child: Text('Hello Flutter!')),\n      floatingActionButton: FloatingActionButton(\n        onPressed: () => Navigator.pushNamed(context, '/detail'),\n        child: Icon(Icons.arrow_forward),\n      ),\n    );\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"桥接层实现-2"},"桥接层实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"MethodChannel实现Dart与原生通信")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-dart"},"static const platform = MethodChannel('com.example/native');\nFuture<void> showToast() async {\n  await platform.invokeMethod('showToast', {'msg': 'Hello from Dart!'});\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"路由实现-3"},"路由实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Navigator/GoRouter，支持多端路由")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"通讯实现-3"},"通讯实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"前后端：http/dio"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端内：Provider/Bloc"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"端间：WebSocket/Firebase推送")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"企业级案例-3"},"企业级案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Google、阿里、腾讯、百度等多端App")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"cicd实践-3"},"CI/CD实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Flutter CLI+Codemagic/GitHub Actions自动化打包与发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"95-阿里raxminiapp"},"9.5 阿里Rax/MiniApp"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"组件代码示例-4"},"组件代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import { createElement, useState } from 'rax';\nimport View from 'rax-view';\nimport Text from 'rax-text';\nexport default function Home() {\n  const [msg] = useState('Hello Rax!');\n  return <View><Text>{msg}</Text></View>;\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"桥接层实现-3"},"桥接层实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Rax API自动适配多端，MiniApp适配器对接阿里小程序/IoT/车载")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"路由实现-4"},"路由实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"rax-app/router，声明式路由")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"通讯实现-4"},"通讯实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"fetch/axios，云函数/Serverless")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"企业级案例-4"},"企业级案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"阿里巴巴、钉钉、天猫精灵等多端项目")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"cicd实践-4"},"CI/CD实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Rax CLI+阿里云流水线/自研平台自动化构建与发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"96-腾讯tmagicuni-app"},"9.6 腾讯TMagic/uni-app"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"组件代码示例-5"},"组件代码示例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <view><text>{{ msg }}</text></view>\n</template>\n<script>\nexport default { data() { return { msg: 'Hello TMagic!' } } }\n<\/script>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"桥接层实现-4"},"桥接层实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TMagicEditor/uni-app统一API，底层适配多端")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"路由实现-5"},"路由实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"uni-app路由，TMagic支持多端页面跳转")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"通讯实现-5"},"通讯实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"腾讯云API、WebSocket、云开发")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"企业级案例-5"},"企业级案例"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"腾讯云、企业微信、QQ小程序等多端项目")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"cicd实践-5"},"CI/CD实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"腾讯云开发平台、Jenkins/GitHub Actions自动化多端发布")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"10-通用cicd自动化实践"},"10. 通用CI/CD自动化实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"代码托管：GitHub/GitLab/企业自研平台"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化构建：Jenkins/GitHub Actions/Coding/阿里云流水线/腾讯云流水线"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"多端打包：框架CLI+云打包服务"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化测试：Jest/Mocha/Flutter Test等"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"自动化发布：各端应用市场/小程序后台/云端一键发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"版本管理与回滚：自动生成版本号，支持灰度、A/B测试、回滚")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"以上为主流一码多端方案的典型落地代码、桥接层/路由/通讯实现、企业级案例与CI/CD自动化实践，建议结合团队技术栈与业务需求选型落地。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"11-app与h5桥bridge实现与设计详解"},"11. App与H5桥（Bridge）实现与设计详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"111-bridge的作用与设计目标"},"11.1 Bridge的作用与设计目标"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"实现App原生与H5（WebView）/JS的双向通信，屏蔽平台差异，统一API调用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持异步/同步调用、事件订阅/发布、数据回传、权限校验、调试与扩展")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"112-react-nativern桥实现"},"11.2 React Native（RN）桥实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"原理"},"原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN内置JSCore引擎，JS与原生通过Bridge通信（C++/Java/ObjC层），支持异步消息队列")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"加载方式"},"加载方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App启动时自动加载Bridge，JS Bundle与原生模块注册")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"典型实现"},"典型实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"JS调用原生：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"import { NativeModules } from 'react-native';\nNativeModules.MyNativeModule.showToast('Hello from JS!');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生注册模块（Android示例）：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"public class MyNativeModule extends ReactContextBaseJavaModule {\n  @ReactMethod\n  public void showToast(String msg) {\n    Toast.makeText(getReactApplicationContext(), msg, Toast.LENGTH_SHORT).show();\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生调用JS：通过事件分发（DeviceEventEmitter）")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"设计建议"},"设计建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API接口，参数/回调序列化，支持Promise"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"权限校验、异常处理、日志埋点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持动态注册/扩展新能力")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"113-uni-apptaro桥实现"},"11.3 uni-app/Taro桥实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"原理-1"},"原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"框架自动注入平台API，H5端通过JSBridge与原生通信，App端WebView注入JS对象")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"加载方式-1"},"加载方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App启动时WebView注入JSBridge对象，H5页面可直接调用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"典型实现-1"},"典型实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5调用原生：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// uni-app H5端\nuni.getLocation({\n  success: res => { /* ... */ }\n});\n// 实际底层通过JSBridge转发到原生\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生注入JS对象（Android示例）：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'webView.addJavascriptInterface(new JsBridge(), "uni" /* JS对象名 */);\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生调用H5：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"webView.evaluateJavascript(\"window.onNativeMessage('data')\", null);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"设计建议-1"},"设计建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API命名，参数校验，支持回调/Promise"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件订阅/发布，便于消息推送"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"兼容多端（App/H5/小程序）差异")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"114-flutter桥实现"},"11.4 Flutter桥实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"原理-2"},"原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Dart与原生通过MethodChannel通信，支持双向异步消息")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"加载方式-2"},"加载方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App启动时注册MethodChannel，H5通过WebView与原生通信")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"典型实现-2"},"典型实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Dart调用原生：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-dart"},"static const platform = MethodChannel('com.example/native');\nFuture<void> showToast() async {\n  await platform.invokeMethod('showToast', {'msg': 'Hello from Dart!'});\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生注册通道（Android示例）：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'new MethodChannel(flutterView, "com.example/native").setMethodCallHandler(\n  (call, result) -> { /* ... */ }\n);\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Flutter内嵌H5：通过flutter_webview_plugin等插件，WebView与原生通信")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"设计建议-2"},"设计建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一通道命名，参数序列化，支持异步回调"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件流（EventChannel）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"权限与安全校验")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"115-阿里raxminiapp桥实现"},"11.5 阿里Rax/MiniApp桥实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"原理-3"},"原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"Rax多端适配器自动注入Bridge，H5端通过window.JSBridge与原生通信")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"加载方式-3"},"加载方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App/小程序容器启动时注入JSBridge对象，H5页面可直接调用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"典型实现-3"},"典型实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5调用原生：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.JSBridge.invoke('getLocation', {}, res => { /* ... */ });\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生注入JSBridge（伪代码）：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},'webView.addJavascriptInterface(new JSBridge(), "JSBridge");\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生调用H5：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"webView.evaluateJavascript(\"window.onNativeEvent('data')\", null);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"设计建议-3"},"设计建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API、事件命名，支持Promise/回调"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多端适配与扩展"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"日志、埋点、权限校验")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"116-腾讯tmagicuni-app桥实现"},"11.6 腾讯TMagic/uni-app桥实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"原理-4"},"原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"TMagic/uni-app底层自动注入Bridge，H5端通过window.TMagicBridge/uni对象与原生通信")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"加载方式-4"},"加载方式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App/小程序容器启动时注入Bridge对象，H5页面可直接调用")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"典型实现-4"},"典型实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5调用原生：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.TMagicBridge.invoke('getUserInfo', {}, res => { /* ... */ });\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生注入Bridge（Android示例）：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'webView.addJavascriptInterface(new TMagicBridge(), "TMagicBridge");\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生调用H5：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"webView.evaluateJavascript(\"window.onNativeEvent('data')\", null);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"设计建议-4"},"设计建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一API、事件命名，支持异步/同步、回调/Promise"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持多端扩展、权限校验、埋点")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"117-通用桥bridge设计要点"},"11.7 通用桥（Bridge）设计要点"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"API统一"),"：所有端暴露一致的API接口，参数/回调序列化，支持Promise/Callback"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"事件机制"),"：支持事件订阅/发布，便于消息推送、状态同步"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"安全与权限"),"：参数校验、权限控制、防止XSS/注入"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"动态扩展"),"：支持动态注册新API，便于灰度/热更新"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"调试与埋点"),"：日志、异常、性能监控全链路可观测"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",{parentName:"li"},"多端兼容"),"：适配App/H5/小程序/快应用等多端差异")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"桥（Bridge）是多端架构的核心基础设施，建议结合业务需求、平台能力与安全要求，设计统一、可扩展、可观测的桥接层，提升多端一致性与开发效率。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"12-h5webview与app通信与路由适配详解"},"12. H5（WebView）与App通信与路由适配详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"121-h5与app通信的本质"},"12.1 H5与App通信的本质"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5页面通常运行在App的WebView容器中，WebView提供了原生与JS互通的能力。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通信分为两类：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5调用App（JS调用原生）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App调用H5（原生调用JS）")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"122-h5调用appjs调用原生"},"12.2 H5调用App（JS调用原生）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1android实现"},"1）Android实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"addJavascriptInterface"),"注入对象到WebView，H5可直接调用：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},'// 原生代码\nwebView.addJavascriptInterface(new MyBridge(), "AppBridge");\n\npublic class MyBridge {\n  @JavascriptInterface\n  public void showToast(String msg) { /* ... */ }\n}\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.AppBridge.showToast('Hello from H5!');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2ios实现"},"2）iOS实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WKWebView通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"WKScriptMessageHandler"),"注入对象，H5通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window.webkit.messageHandlers"),"调用：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.webkit.messageHandlers.AppBridge.postMessage({ action: 'showToast', msg: 'Hello from H5!' });\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生实现对应的",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"userContentController"),"方法")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3通用方案"},"3）通用方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一封装Bridge对象，H5端通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window.Bridge.xxx()"),"调用，底层自动适配Android/iOS"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持Promise/回调、参数校验、异步返回")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"123-app调用h5原生调用js"},"12.3 App调用H5（原生调用JS）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1android实现-1"},"1）Android实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"原生通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"evaluateJavascript"),"或",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"loadUrl"),"执行H5 JS代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"webView.evaluateJavascript(\"window.onNativeEvent('data')\", null);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2ios实现-1"},"2）iOS实现"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"WKWebView通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"evaluateJavaScript"),"方法：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-swift"},"webView.evaluateJavaScript(\"window.onNativeEvent('data')\")\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3h5端监听"},"3）H5端监听"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.onNativeEvent = function(data) { /* ... */ }\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件订阅/发布、回调机制")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"124-路由适配与跳转方案"},"12.4 路由适配与跳转方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1h5内路由"},"1）H5内路由"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5页面通常用前端路由（如vue-router、react-router），通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"pushState"),"/",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"hash"),"管理页面跳转"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5内跳转可直接用SPA路由API")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2app与h5路由联动"},"2）App与H5路由联动"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5需要跳转App原生页面时：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5通过Bridge调用App的",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"navigateTo"),"方法，传递目标页面标识和参数"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App收到后解析参数，跳转到对应原生页面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.AppBridge.navigateTo('nativePage', { id: 123 });\n"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App需要跳转H5页面时：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"App通过WebView加载指定URL，或通过Bridge调用H5的路由API"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-java"},"webView.evaluateJavascript(\"window.routerPush('/detail?id=123')\", null);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.routerPush = function(path) { router.push(path); }\n")))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3参数与回调"},"3）参数与回调"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由跳转时参数通过JSON序列化传递，支持回调/Promise获取结果"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"建议统一路由协议，约定页面标识、参数格式、回调机制")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"125-通信与路由适配最佳实践"},"12.5 通信与路由适配最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一Bridge对象，封装所有通信API，兼容Android/iOS/H5"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件订阅/发布，便于消息推送、状态同步"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由跳转协议化，支持原生与H5互跳、参数回传"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5与App路由解耦，H5内用SPA路由，App用原生路由，Bridge负责跳转桥接"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"安全校验、异常处理、埋点监控全链路覆盖")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"126-典型通信流程图"},"12.6 典型通信流程图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  H5[H5页面] --JS调用原生--\x3e Bridge[App注入Bridge对象]\n  Bridge --调用原生API/路由--\x3e Native[App原生模块]\n  Native --事件/回调--\x3e Bridge\n  Bridge --回调/事件--\x3e H5\n  Native --evaluateJavascript--\x3e H5\n  H5 --window.onNativeEvent--\x3e 处理事件\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"H5与App通信的核心是WebView注入Bridge对象，双向通过方法调用和事件机制实现互通，路由适配需协议化、解耦，建议统一API与路由协议，提升多端一致性与开发效率。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"13-react-nativernapp与h5webview桥的使用详解"},"13. React Native（RN）App与H5（WebView）桥的使用详解"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"131-通信原理"},"13.1 通信原理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN App内嵌H5页面时，通常通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"react-native-webview"),"组件加载WebView。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN与H5通过WebView的",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"injectJavaScript"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"onMessage"),"、",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"postMessage"),"等API实现双向通信。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"132-h5调用rn-appjs调用原生"},"13.2 H5调用RN App（JS调用原生）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1h5端代码"},"1）H5端代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5页面通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window.ReactNativeWebView.postMessage()"),"向RN发送消息：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.ReactNativeWebView.postMessage(JSON.stringify({ action: 'showToast', msg: 'Hello from H5!' }));\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2rn端代码"},"2）RN端代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN WebView组件监听",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"onMessage"),"事件：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport { WebView } from 'react-native-webview';\nimport { ToastAndroid } from 'react-native';\n\nexport default function MyWebView() {\n  const onMessage = event => {\n    const data = JSON.parse(event.nativeEvent.data);\n    if (data.action === 'showToast') {\n      ToastAndroid.show(data.msg, ToastAndroid.SHORT);\n    }\n  };\n  return (\n    <WebView\n      source={{ uri: 'https://your-h5-page.com' }}\n      onMessage={onMessage}\n    />\n  );\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"133-rn-app调用h5原生调用js"},"13.3 RN App调用H5（原生调用JS）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1rn端代码"},"1）RN端代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"通过WebView的",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"injectJavaScript"),"方法执行H5 JS代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const webviewRef = useRef();\nconst sendToH5 = () => {\n  webviewRef.current.injectJavaScript(`window.onNativeEvent && window.onNativeEvent('data from RN'); true;`);\n};\nreturn (\n  <WebView ref={webviewRef} ... />\n  <Button title=\"Send to H5\" onPress={sendToH5} />\n);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2h5端代码"},"2）H5端代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5页面监听window方法：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"window.onNativeEvent = function(data) {\n  // 处理来自RN的数据\n  alert('收到RN消息: ' + data);\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"134-路由适配与跳转"},"13.4 路由适配与跳转"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5需要跳转RN原生页面时：H5通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"postMessage"),"发送跳转指令，RN端解析后调用",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"navigation.navigate"),"等API跳转。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN需要跳转H5页面时：通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"injectJavaScript"),"调用H5的路由API（如",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window.router.push('/detail')"),"）。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"建议统一消息协议，参数用JSON序列化，支持回调。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"135-最佳实践"},"13.5 最佳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一消息协议，定义action、参数、回调格式"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5与RN端均需做好异常处理与安全校验"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持事件订阅/发布，便于消息推送与状态同步"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由跳转协议化，解耦H5与RN路由"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"可扩展为Promise风格，支持异步回调")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"136-通信流程图"},"13.6 通信流程图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  H5[H5页面] --postMessage--\x3e RNWebView[RN WebView onMessage]\n  RNWebView --injectJavaScript--\x3e H5\n  H5 --window.onNativeEvent--\x3e 处理事件\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"RN与H5桥的核心是WebView的postMessage/onMessage/injectJavaScript机制，建议统一协议、解耦路由、加强安全，提升多端一致性与开发效率。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"14-h5调用rn能力双端路由区分与互跳实践"},"14. H5调用RN能力、双端路由区分与互跳实践"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"141-h5如何调用rn原生能力"},"14.1 H5如何调用RN（原生）能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window.ReactNativeWebView.postMessage()"),"向RN发送消息，RN端",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"onMessage"),"监听并执行原生操作。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型代码：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// H5页面\nwindow.ReactNativeWebView.postMessage(JSON.stringify({\n  action: 'openNativePage',\n  page: 'UserProfile',\n  params: { userId: 123 }\n}));\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN端：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-jsx"},"const onMessage = event => {\n  const data = JSON.parse(event.nativeEvent.data);\n  if (data.action === 'openNativePage') {\n    navigation.navigate(data.page, data.params);\n  }\n};\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持回调：H5可传递callbackId，RN操作完成后通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"injectJavaScript"),"回调H5")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"142-路由区分与互跳"},"14.2 路由区分与互跳"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"1h5内路由-1"},"1）H5内路由"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5页面内跳转（如SPA）：直接用前端路由（如",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"router.push('/about')"),"），不通知RN。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"2rn内路由"},"2）RN内路由"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN原生页面跳转：直接用",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"navigation.navigate('PageName')"),"，不通知H5。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"3h5跳转rn页面"},"3）H5跳转RN页面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5通过Bridge（postMessage）发送跳转指令，RN端解析后跳转原生页面。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"建议action统一为",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"openNativePage"),"，参数包含目标页面和参数。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"4rn跳转h5页面"},"4）RN跳转H5页面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"RN通过",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"injectJavaScript"),"调用H5的路由API（如",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window.router.push('/detail')"),"），或直接WebView加载新URL。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"建议action统一为",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"openH5Page"),"，参数包含目标路径。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"143-返回路径与历史管理"},"14.3 返回路径与历史管理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"H5与RN需各自维护自己的路由栈。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"互跳时建议：",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"跳转前记录来源（from），如H5跳转RN时，H5记录当前路径，RN记录来源为H5。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"返回时优先回到来源页面，若无则按各自历史栈返回。"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"典型协议：")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-js"},"// H5跳转RN\nwindow.ReactNativeWebView.postMessage(JSON.stringify({\n  action: 'openNativePage',\n  page: 'UserProfile',\n  params: { userId: 123 },\n  from: window.location.pathname\n}));\n// RN返回H5\nwebviewRef.current.injectJavaScript(`window.router.push('${from || '/'}')`);\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持回调/Promise，确保跳转和返回链路可控。")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"144-路由与跳转协议设计建议"},"14.4 路由与跳转协议设计建议"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"统一action命名（如openNativePage/openH5Page/goBack）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"参数结构化（page/path/params/from/callbackId等）"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"跳转前记录来源，返回时优先回到来源"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"支持回调/Promise，便于异步处理"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"路由跳转与业务解耦，便于动态化和灰度")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("hr",null),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"145-典型跳转与返回流程图"},"14.5 典型跳转与返回流程图"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n  H5[H5页面] --postMessage:openNativePage--\x3e RN[RN onMessage]\n  RN --navigation.navigate--\x3e RNPage[RN原生页面]\n  RNPage --injectJavaScript:openH5Page--\x3e H5[H5页面]\n  H5 --router.push--\x3e H5Page[H5页面]\n  RNPage --injectJavaScript:goBack--\x3e H5[H5页面]\n  H5 --router.back--\x3e H5Page[H5页面]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("blockquote",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",{parentName:"blockquote"},"H5与RN的路由跳转建议协议化、来源可追溯、回调可控，确保多端跳转与返回链路一致、体验流畅。")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/现代高可用软件设计/C端一码多端架构设计",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/ssr/ssr.intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/服务端渲染/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"服务端渲染"},"服务端渲染"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"服务端渲染"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/服务端渲染/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/standardTemplates/Intro.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/标准化模版/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"标准化模版"},"标准化模版"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"标准化模版，涵盖PC，移动端H5，移动端native，服务端渲染，nodejs等。技术栈涵盖React，Vue，Taro，Taro-UI，Antd，Next.js等"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/标准化模版/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/standardTemplates/mobile.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/标准化模版/移动端/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"综述"},"综述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"web移动端适配一直是一个非常火爆的话题，业界比较流行的就是淘宝的flexible.js + rem  方案了，另外随着前端技术的发展，viewport的兼容性也越来越好。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"主要介绍着两种适配方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"一rem--flexiblejs"},"一、rem + flexible.js"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null," rem 方案，引入使用阿里淘宝的 flexible.js，flexible-puls.js 与 flexible.js 二者选择一个使用即可。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"flexible 总的思想就是利用动态设置根元素(html 标签)的 font-size 大小，来动态改变 css3 中 rem 这个单位中对应 px 的大小。因为 html 的 font-size 默认为 16px，所以，1rem 就默认为 16px。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"flexible.js 的思想是把整个视图宽度区域分为 10 份，每一份为一个 1rem，总的就是 10rem，与现在的 viewport 类似。例如 375px 的宽度，那么 1rem 就是 37.5px，因此设置根元素的 font-size 为 37.5px。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"当然为了方便我们这里改成了-1rem100px"},"当然为了方便，我们这里改成了 1rem=100px。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'//flexible-plus.js,手淘新版\n(function flexible(window, document) {\n  var docEl = document.documentElement;\n  var dpr = window.devicePixelRatio || 1;\n\n  // adjust body font size\n  function setBodyFontSize() {\n    if (document.body) {\n      document.body.style.fontSize = 12 * dpr + "px";\n    } else {\n      document.addEventListener("DOMContentLoaded", setBodyFontSize);\n    }\n  }\n  setBodyFontSize();\n\n  // set 1rem = viewWidth / 7.5\n  function setRemUnit() {\n    //1rem = 100px\n    var rem = docEl.clientWidth / 7.5;\n    docEl.style.fontSize = rem + "px";\n  }\n\n  setRemUnit();\n\n  // reset rem unit on page resize\n  window.addEventListener("resize", setRemUnit);\n  window.addEventListener("pageshow", function (e) {\n    if (e.persisted) {\n      setRemUnit();\n    }\n  });\n\n  // detect 0.5px supports\n  if (dpr >= 2) {\n    var fakeBody = document.createElement("body");\n    var testElement = document.createElement("div");\n    testElement.style.border = ".5px solid transparent";\n    fakeBody.appendChild(testElement);\n    docEl.appendChild(fakeBody);\n    if (testElement.offsetHeight === 1) {\n      docEl.classList.add("hairlines");\n    }\n    docEl.removeChild(fakeBody);\n  }\n})(window, document);\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'//flexible.js ,手淘老版\n(function (win, lib) {\n  var doc = win.document; // win = window,lib = window.lib;\n  var docEl = doc.documentElement;\n  var metaEl = doc.querySelector(\'meta[name="viewport"]\');\n  var flexibleEl = doc.querySelector(\'meta[name="flexible"]\'); //这样的写法没有尝试过\n  var dpr = 0;\n  var scale = 0;\n  var tid;\n  var flexible = lib.flexible || (lib.flexible = {});\n  var mobileDesignWidth = 750;\n\n  //创建meta:vp,并根据设备屏幕像素比来设置dpr的值，设置scale =1/dpr,保留小数点后2位;\n  // 当设置过meta标签之后，其根据其自定义的缩放放比来设置\n  if (metaEl) {\n    console.warn("将根据已有的meta标签来设置缩放比例");\n    var match = metaEl\n      .getAttribute("content")\n      .match(/initial\\-scale=([\\d\\.]+)/);\n    if (match) {\n      scale = parseFloat(match[1]);\n      dpr = parseInt(1 / scale); //获取屏幕像素比\n    }\n  } else if (flexibleEl) {\n    var content = flexibleEl.getAttribute("content");\n    if (content) {\n      var initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/);\n      var maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/);\n      if (initialDpr) {\n        dpr = parseFloat(initialDpr[1]);\n        scale = parseFloat((1 / dpr).toFixed(2));\n        //3.1415.toFixed(2),保留2位小数点\n      }\n      if (maximumDpr) {\n        dpr = parseFloat(maximumDpr[1]);\n        scale = parseFloat((1 / dpr).toFixed(2));\n      }\n    }\n  }\n\n  //当没有设置meta标签之后，根据设备信息来设置屏幕缩放比\n  if (!dpr && !scale) {\n    var isAndroid = win.navigator.appVersion.match(/android/gi);\n    var isIPhone = win.navigator.appVersion.match(/iphone/gi);\n    var devicePixelRatio = win.devicePixelRatio;\n    if (isIPhone) {\n      // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n      if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\n        dpr = 3;\n      } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {\n        dpr = 2;\n      } else {\n        dpr = 1;\n      }\n    } else {\n      // 其他设备下，仍旧使用1倍的方案，但是fs并不是固定的\n      dpr = 1;\n    }\n    scale = 1 / dpr;\n  }\n\n  //给文档设置自定义属性，保存dpr的值\n  docEl.setAttribute("data-dpr", dpr);\n\n  //创建meta标签，设置初始比、最小比和最大比均为scale值，并将其插入到页面\n  //设置了缩放比，那么相当于这个屏幕渲染在一个被放大的画布之上。\n  if (!metaEl) {\n    metaEl = doc.createElement("meta");\n    metaEl.setAttribute("name", "viewport");\n    metaEl.setAttribute(\n      "content",\n      "initial-scale=" +\n        scale +\n        ", maximum-scale=" +\n        scale +\n        ", minimum-scale=" +\n        scale +\n        ", user-scalable=no"\n    );\n    if (docEl.firstElementChild) {\n      docEl.firstElementChild.appendChild(metaEl);\n    } else {\n      //并没有什么作用\n      var wrap = doc.createElement("div");\n      wrap.appendChild(metaEl);\n      doc.write(wrap.innerHTML);\n    }\n  }\n\n  // 自定义页面元素的fontsize，方便rem的配置\n  function refreshRem() {\n    var width = docEl.getBoundingClientRect().width;\n    //屏幕信息，屏幕宽度，bound：绑定；rect：矩形\n    if (width / dpr > mobileDesignWidth) {\n      width = mobileDesignWidth * dpr;\n    }\n    // 750/100 = 7.5\n    var rem = width / (mobileDesignWidth / 100);\n    docEl.style.fontSize = rem + "px";\n    flexible.rem = win.rem = rem;\n  }\n\n  /**\n   * 对于设计稿为320px的，根元素fontsize = 32px;\n   * 对于设计稿为1080px的，根元素fontsize = 108px;\n   * 设屏幕的宽度为w(rem*10),设计稿尺寸为w,那么有比例关系w:rem*10 = x:1 ;\n   * ==> x= w/(rem*10);（单位）\n   * 那么任意设计稿尺寸 L 转化为相应的尺寸就为：L/x = (L*rem*10)/w;\n   * 由于rem设置给根元素了，那么所有的尺寸均可以用rem单位来操作;\n   * xrem = (L*rem*10)/w*fontsize = (L*10)/w;\n   * 那么在设计稿中量取 L长度的，在编辑器中就为(L*10/w) rem;\n   * 如此便完成了rem的自动适配\n   */\n\n  win.addEventListener(\n    "resize",\n    function () {\n      clearTimeout(tid);\n      tid = setTimeout(refreshRem, 300);\n    },\n    false\n  );\n  win.addEventListener(\n    "pageshow",\n    function (e) {\n      if (e.persisted) {\n        clearTimeout(tid);\n        tid = setTimeout(refreshRem, 300);\n      }\n    },\n    false\n  );\n\n  // 设置页面的body的字体 大小 ，目前发现有何用\n  if (doc.readyState === "complete") {\n    doc.body.style.fontSize = 12 * dpr + "px";\n  } else {\n    doc.addEventListener(\n      "DOMContentLoaded",\n      function (e) {\n        doc.body.style.fontSize = 12 * dpr + "px";\n      },\n      false\n    );\n  }\n\n  // 页面初始化\n  refreshRem();\n\n  // 提供一些方法\n  flexible.dpr = win.dpr = dpr;\n  flexible.refreshRem = refreshRem;\n  flexible.rem2px = function (d) {\n    var val = parseFloat(d) * this.rem;\n    if (typeof d === "string" && d.match(/rem$/)) {\n      val += "px";\n    }\n    return val;\n  };\n  flexible.px2rem = function (d) {\n    var val = parseFloat(d) / this.rem;\n    if (typeof d === "string" && d.match(/px$/)) {\n      val += "rem";\n    }\n    return val;\n  };\n})(window, window["lib"] || (window["lib"] = {}));\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"引入-flexiblejs-之后还需要做什么"},"引入 flexible.js 之后还需要做什么？"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"1确定设计稿尺寸宽度为750"},"1、确定设计稿尺寸宽度为750"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"宽度750px的设计稿，是iphone的UI设计标准，为什么是这个标准，这与iphone手机的迭代有关，我们可以看到，自iphone6开始到iphone8这过程，它们的屏幕物理像素都是750*1334px，这几代机现在也依然受大家的喜爱，750px的设计标准也慢慢的成为移动端设计的标准。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"2在-indexhtml-中加入下面的两段代码"},"2、在 index.html 中加入下面的两段代码"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<meta\n  name="viewport"\n  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"\n/>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},"<style>\n  /* 如果屏幕超过了750px，那么我们就按照750px设计稿来走，不会让页面超过750px ,使用媒体查询来设置*/\n  @media screen and (min-width: 750px) {\n    html {\n      font-size: 100px !important;\n    }\n  }\n  body {\n    min-width: 320px;\n    max-width: 750px;\n    width: 10rem;\n    margin: 0 auto;\n  }\n</style>\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"meta这段代码是让layout viewport　= visual viewport = ideal viewport = 设备屏幕宽度，设置初始缩放比例为1，不允许用户缩放，这样操作之后，其实几乎近似等于vw了，帮助我们之间解决掉很多问题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"注意"},"注意："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"但是需要注意的是，这时候，字体依旧还是需要写px，不然字体大小会不准确，图片考虑到iphone 2倍像素以及3倍像素问题的问题直接用两倍图，设计稿的尺寸一定要遵循宽度750，宽度750，对iphone6来说，是用了2倍的像素。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"这样以来，在3倍像素的iphone上以及各种dpr不是1的安卓机上看起来也还好。当然了，如果需要特殊处理某些地方，那就只处理iphone的3倍像素与两倍像素的区别即可，flexible.js已经帮我们做了处理，可以稍微修改一下逻辑，通过设置data-dpr属性来媒体查询。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"有关几个viewport"},"有关几个viewport"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"参考这篇文章 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://juejin.cn/post/6844903951012200456#heading-24",target:"_blank",rel:"nofollow noopener noreferrer"},"https://juejin.cn/post/6844903951012200456#heading-24")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"二viewport方案"},"二、viewport方案"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"vw（Viewport Width）、vh(Viewport Height)是基于视图窗口的单位，是css3的一部分，基于视图窗口的单位，除了vw、vh还有vmin、vmax。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"vw:1vw 等于视口宽度的1%"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Vh:1vh 等于视口高度的1%"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"vmin: 选取 vw 和 vh 中最小的那个,即在手机竖屏时，1vmin=1vw"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"vmax:选取 vw 和 vh 中最大的那个 ,即在手机竖屏时，1vmax=1vh"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{alt:"vw-img",src:"https://pic3.zhimg.com/80/v2-5bdd94d5f6a70eb0015d2a21ce764512_1440w.webp"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"比较"},"比较"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"rem"},"rem"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"优点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"使用广泛，有很多成功经验，兼容性好，适配神器。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"缺点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"（1）在奇葩的dpr设备上表现效果不太好，比如一些华为的高端机型用rem布局会出现错乱。 "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"（2）使用 iframe 引用也会出现问题。 "),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"（3）rem在多屏幕尺寸适配上与当前两大平台的设计哲学不一致。 即大屏的出现到底是为了看得又大又清楚，还是为了看的更多的问 题。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"（4）依赖js计算，淘宝已经不推荐使用了"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"vw"},"vw"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"优点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、浏览器原生支持，不需要js计算，体验更佳"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"缺点："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、vw单位兼容性比rem稍差，ios8、安卓4.4及以上才完全支持"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、没有经过大项目的考验"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"总结"},"总结"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"开发的时候，可以rem与vw，百分比等混用，如果面向现代浏览器的话。只要解决畏难而退即可，不必执着于用哪种技术。"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/标准化模版/移动端/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/standardTemplates/react-antd-mobile.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_antd_mobile_jpg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/antd-mobile.jpg"),_assets_antd_mobile_jpg__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_antd_mobile_jpg__WEBPACK_IMPORTED_MODULE_7__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/标准化模版/移动端/react-antd-mobile",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react-antd-mobile-标准化模版"},"react-antd-mobile 标准化模版"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"react-antd-mobile 标准化模版,整体采用 webpack+react+antd-mobile 组件库的技术方案。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"快速开始"},"快速开始"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"hundun create my-app\n#如果没有安装hundun脚手架可以运行sudo npm install @hun-dun/cli -g来安装，之后再执行创建命令即可\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{alt:"react-antd-mobile",src:"https://github-production-user-asset-6210df.s3.amazonaws.com/41052302/243120394-8ba7c6ff-a559-4495-aff1-d33777b6ddea.png"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"目录结构"},"目录结构"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"｜--root//根目录\n    |--src//前端资源目录\n        |--api//接口\n        |--components//组件\n        |--pages//\n              |--pageA//应用A\n                    |--app.less\n                    |--app.tsx//入口\n                    |--router//应用A路由\n              |--pageB//应用B\n        |--store//状态管理，redux\n        |--utils//工具包\n        |--theme.less//主题\n    |--config//编译配置\n        |--webpack.base.config.js//基础配置\n        |--webpack.dev.config.js//开发配置\n        |--webpack.prod.config.js//生产环境配置\n    |--public//静态资源，webpack不会打包里边的内容，需要借助插件copy到打包之后的目录。比如dist\n        |--flexible.js//阿里淘宝flexible\n        |--index.html\n    |--babel.config.js//babel配置\n    |--commitlintrc.js//commitlint\n    |--.eslintrc.js//eslint\n    |--.prettierrc.js//prettier\n    |--tsconfig.json\n    |--package.json\n    |--package-lock.json\n    |--README.md\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"内容"},"内容"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{style:{width:500,height:500,objectFit:"contain"},src:_assets_antd_mobile_jpg__WEBPACK_IMPORTED_MODULE_7___default.a}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1、引入了 flexible.js+rem 以及postcss-px-to-viewport的移动端适配方案，可以直接写px，自动转换vw，vh"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2、引入了 vconsole 来作为移动端线上调试"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"3、配置了 webpack-dev-server 的 host 为 0.0.0.0,在手机与电脑同一个局域网下，手机可以直接通过 IP 来访问本地页面。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"4、antd-mobild-UI, 引入了 swipper，并简单做 demo"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"5、多页面应用架构，本地可直接打包看静态页面"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"6、结合当下流行的commit Lint，prettier,eslint提供代码增量检查的能力"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"7、webpack多页面构建，axios封装"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"8、修改flexable，删去对字体的处理，设置1rem🟰100px，直接写px即可，本身就是独立像素，不要写rem"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"9、启动步骤 ："),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"1）npm install"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"2）npm start"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"之后会自动打开",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"http://0.0.0.0:9002/pageA.html#/",target:"_blank",rel:"nofollow noopener noreferrer"},"http://0.0.0.0:9002/pageA.html#/"),"  可以自己切换 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"http://0.0.0.0:9002/pageB.html#/",target:"_blank",rel:"nofollow noopener noreferrer"},"http://0.0.0.0:9002/pageB.html#/")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"demo"},"Demo"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{alt:"image",style:{width:350,height:700,objectFit:"contain"},src:"https://github-production-user-asset-6210df.s3.amazonaws.com/41052302/243124339-8ff62f3d-4dbd-4f85-952c-22c0bf37f45c.png"}))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/标准化模版/移动端/react-antd-mobile",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/standardTemplates/react-pc.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/标准化模版/PC端/react",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"pc端标准化模版"},"PC端标准化模版"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"PC端标准化模版"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/标准化模版/PC端/react",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/standardTemplates/react-ui-components.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_react_ui_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/react-ui.png"),_assets_react_ui_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_react_ui_png__WEBPACK_IMPORTED_MODULE_7__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/标准化模版/UI组件库/react18业务组件库",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"react18--antd5x-业务组件库"},"React18 + Antd5.x 业务组件库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1综述"},"1.综述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"React18 业务组件库采用当下流行的 React18 + Antd5.x框架，借助Rollup以及babel-plugin-component来实现按需引入，支持scss、less等，文档采用storybook书写。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2创建"},"2.创建"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"hundun create my-app\n#如果没有安装hundun脚手架可以运行sudo npm install @hun-dun/cli -g来安装，之后再执行创建命令即可\n\n# 执行命令之后，选择【基于Rollup+React18+antd5可按需引入的业务组件库模版】选项即可\n\n# 注意，UI组件库执行npm run build的时候，node版本要大于16，因为用的rollup比较新\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3介绍"},"3.介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"31-目录介绍"},"3.1 目录介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"｜--root//根目录\n    |--Demo // 可以跑组件库的Vue 应用，进入该目录后，npm install 安装依赖，之后执行npm start即可，node版本要求14\n    |--docs // 文档，使用vuepress起来的快速应用，node版本要大于18，目前该版本太高，无法跑Vue2.0的组件，写一下mdx转换成html还是可以的\n    |--dist // 打包之后的目录，最终会传递到npm上\n    |--src//组件资源\n        |--index.ts // 入口\n        |--components\n                |--h-d-button // button组件，固定这样命名，\n                            |--index.tsx //固定这样写\n                            |--type.d.ts //声明\n                            |--style.scss // 样式\n                |--h-d-input // input 组件 \n                            |--index.tsx\n                            |--type.d.ts\n      \n    |--package.json\n    |--rollup.prod.config.js // rollup构建配置\n    |--package-lock.json\n    |--README.md\n    |--tsconfig.json // ts配置\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"32架构介绍"},"3.2架构介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{style:{width:800,height:500,objectFit:"contain"},src:_assets_react_ui_png__WEBPACK_IMPORTED_MODULE_7___default.a}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"33-发布"},"3.3 发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"npm run build之后，npm publish就可以发布，不过要绑定自己的账号"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4使用"},"4、使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"41-babelrc配置"},"4.1 babelrc配置"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'\n// 使用的是babel7，整体参考Demo目录下的用法\n\n{\n  "presets": [\n    ["@babel/preset-env", { "modules": false }]\n  ],\n  "plugins": [\n  ["import", {\n      "libraryName": "antd",\n      "style": true // 或者 "css"\n    }],\n    [\n      "component",\n      {\n        "libraryName": "hundun-ui-library-react",\n        "libDir": "dist/components",\n        "libraryDirectory": "components",\n        "style": false\n      },\n      "hundun-ui-library-react"\n    ]\n  ]\n}\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"42-业务引入"},"4.2 业务引入"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'\n// app.tsx 或者对应的入口全局注册，整体参考Demo目录下用法\n\nimport "hundun-ui-library-react/dist/hundun-ui-library-react.css"\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'\n// home.tsx\n\nimport React from \'react\'\nimport { HDButton } from "hundun-ui-library-react"\n\nfunction Home() {\n  return (\n    <div>\n      <HDButton text="深化开始的"></HDButton>\n    </div>\n  )\n}\nexport default Home\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-node版本问题"},"5 Node版本问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"整体开发组件库以及文档docs都可以用node18，但是跑demo的时候需要切换成node14，因为项目本身比较老"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/标准化模版/UI组件库/react18业务组件库",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/standardTemplates/vue2-ui-components.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_assets_vue_ui_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./stories/assets/vue-ui.png"),_assets_vue_ui_png__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_vue_ui_png__WEBPACK_IMPORTED_MODULE_7__),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/标准化模版/UI组件库/Vue2.0业务组件库",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"vue20--element-ui-业务组件库"},"Vue2.0 + Element-UI 业务组件库"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"1综述"},"1.综述"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"Vue2.0 业务组件库采用当下流行的Vue2.0+Element-UI框架，借助Rollup以及babel-plugin-component来实现按需引入，支持scss、less等,文档采用vuepress书写。"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"2创建"},"2.创建"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-shell"},"hundun create my-app\n#如果没有安装hundun脚手架可以运行sudo npm install @hun-dun/cli -g来安装，之后再执行创建命令即可\n\n# 执行命令之后，选择【基于Rollup+Vue2.0+Element-UI可按需引入的业务组件库模版】选项即可\n\n# 注意，UI组件库执行npm run build的时候，node版本要大于16，因为用的rollup比较新\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"3介绍"},"3.介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"31-目录介绍"},"3.1 目录介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"｜--root//根目录\n    |--Demo // 可以跑组件库的Vue 应用，进入该目录后，npm install 安装依赖，之后执行npm start即可，node版本要求14\n    |--docs // 文档，使用vuepress起来的快速应用，node版本要大于18，目前该版本太高，无法跑Vue2.0的组件，写一下mdx转换成html还是可以的\n    |--dist // 打包之后的目录，最终会传递到npm上\n    |--src//组件资源\n        |--index.js // 入口\n        |--components\n                |--h-d-button // button组件，固定这样命名，方便babel-plugin-component 按需引入\n                            |--index.Vue //固定这样写\n                            |--style.scss\n                |--h-d-input // input 组件 \n                            |--index.vue\n      \n    |--package.json\n    |--rollup.prod.config.js // rollup构建配置\n    |--package-lock.json\n    |--README.md\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"32架构介绍"},"3.2架构介绍"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("img",{style:{width:800,height:500,objectFit:"contain"},src:_assets_vue_ui_png__WEBPACK_IMPORTED_MODULE_7___default.a}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"33-发布"},"3.3 发布"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"npm run build之后，npm publish就可以发布，不过要绑定自己的账号"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"4使用"},"4、使用"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"41-babelrc配置"},"4.1 babelrc配置"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},'\n// 使用的是babel7，整体参考Demo目录下的用法\n\n{\n  "presets": [\n    ["@babel/preset-env", { "modules": false }]\n  ],\n  "plugins": [\n    [\n      "component",\n      {\n        "libraryName": "element-ui",\n        "styleLibraryName": "theme-chalk"\n      },\n      "element-ui"\n    ],\n    [\n      "component",\n      {\n        "libraryName": "hundun-ui-library",\n        "libDir": "dist/lib/components",\n        "libraryDirectory": "components",\n        "style": false\n      },\n      "hundun-ui-library"\n    ]\n  ]\n}\n\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"42-业务引入"},"4.2 业务引入"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"\n// main.js 或者对应的入口全局注册，整体参考Demo目录下用法\n\nimport { HDButton } from 'hundun-ui-library'\n\nVue.component('h-d-button', HDButton); // 全局注册 HDButton 组件\n\n// home.vue\n\n<h-d-button>混沌 </h-d-button>\n\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h3",{id:"5-node版本问题"},"5 Node版本问题"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"整体开发组件库以及文档docs都可以用node18，但是跑demo的时候需要切换成node14，因为项目本身比较老"))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/标准化模版/UI组件库/Vue2.0业务组件库",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./stories/uniapp/uni-app.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",function(){return __page});__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Hundun/uniapp/介绍",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h2",{id:"uniapp"},"uniapp"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{parentName:"p",href:"https://uniapp.dcloud.net.cn/",target:"_blank",rel:"nofollow noopener noreferrer"},"https://uniapp.dcloud.net.cn/")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Hundun/uniapp/介绍",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,4,5]]]);